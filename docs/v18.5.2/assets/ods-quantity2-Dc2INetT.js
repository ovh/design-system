import{p,H as b,c as a,h as n,a as m}from"./index-DAZhnxgO.js";import{s as v,d as y}from"./dom-CO1DdTQY.js";import{a as o}from"./type-B5zI8QxY.js";import{d as f,b as l,O as u,a as h}from"./ods-button2-DJxJiLcj.js";import{O as c}from"./icon-name-C6aMXAXT.js";import{d as I}from"./ods-icon2-C2sSMg6h.js";import{d as _,O as g}from"./ods-input2-NhqVSkkH.js";import{d as E}from"./ods-spinner2-CPyWCS2f.js";const d=null;function O(s,t){return t!==void 0&&s===d?o(t)?t:d:o(s)?s:d}function V(s,t,e,i){return s||t||i!==void 0&&e!==null&&i>=e}function C(s,t,e,i){return s||t||i!==void 0&&e!==null&&i<=e}async function r(s,t,e){var i;s.setFormValue((i=t==null?void 0:t.toString())!==null&&i!==void 0?i:""),e&&await y(e,s)}const D=":host(.ods-quantity){display:inline-flex;align-items:center;justify-content:center}.ods-quantity__button::part(button){position:inherit}.ods-quantity__button::part(button):focus-visible{position:relative}.ods-quantity__button:first-of-type::part(button){border-top-right-radius:0;border-bottom-right-radius:0}.ods-quantity__button:last-of-type::part(button){border-top-left-radius:0;border-bottom-left-radius:0}.ods-quantity__input{position:inherit;width:inherit}.ods-quantity__input::part(input){border-right:0;border-left:0;border-radius:0;padding:4px;width:50px;text-align:center}.ods-quantity__input::part(input):focus-visible{position:relative}",q=D,R=p(class extends b{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.odsBlur=a(this,"odsBlur",7),this.odsChange=a(this,"odsChange",7),this.odsClear=a(this,"odsClear",7),this.odsFocus=a(this,"odsFocus",7),this.odsInvalid=a(this,"odsInvalid",7),this.odsReset=a(this,"odsReset",7),this.internals=this.attachInternals(),this.shouldUpdateIsInvalidState=!1,this.isInvalid=!1,this.ariaLabel=null,this.ariaLabelledby=void 0,this.defaultValue=void 0,this.hasError=!1,this.isDisabled=!1,this.isReadonly=!1,this.isRequired=!1,this.max=void 0,this.min=void 0,this.name=void 0,this.placeholder=void 0,this.step=void 0,this.value=d}onInvalidEvent(t){t.preventDefault(),this.isInvalid=!0}async checkValidity(){return this.isInvalid=!this.internals.validity.valid,this.internals.checkValidity()}async clear(){var t;await((t=this.odsInput)===null||t===void 0?void 0:t.clear()),this.shouldUpdateIsInvalidState=!0}async getValidationMessage(){return this.internals.validationMessage}async getValidity(){return this.internals.validity}async reportValidity(){return this.isInvalid=!this.internals.validity.valid,this.internals.reportValidity()}async reset(){var t;await((t=this.odsInput)===null||t===void 0?void 0:t.reset()),this.shouldUpdateIsInvalidState=!0}async willValidate(){return this.internals.willValidate}onIsInvalidChange(){this.odsInvalid.emit({isInvalid:!!this.isInvalid})}componentWillLoad(){this.value=O(this.value,this.defaultValue)}async componentDidLoad(){await r(this.internals,this.value,this.odsInput)}async formResetCallback(){await this.reset()}decrement(){if(this.isDisabled||this.isReadonly)return;const t=this.step||1;this.value=this.value!==null?Number(this.value)-t:0}increment(){if(this.isDisabled||this.isReadonly)return;const t=this.step||1;this.value=this.value!==null?Number(this.value)+t:0}async onOdsBlur(){var t;await((t=this.odsInput)===null||t===void 0?void 0:t.checkValidity()),this.isInvalid=!this.internals.validity.valid}async onOdsChange(t){var e,i;t.stopImmediatePropagation(),t.detail.value===null||t.detail.value===""?this.value=null:this.value=(e=Number(t.detail.value))!==null&&e!==void 0?e:null,await r(this.internals,this.value,this.odsInput),this.shouldUpdateIsInvalidState&&(await((i=this.odsInput)===null||i===void 0?void 0:i.checkValidity()),this.isInvalid=!this.internals.validity.valid),this.odsChange.emit({name:this.name,previousValue:typeof t.detail.previousValue=="number"&&o(t.detail.previousValue)?Number(t.detail.previousValue):t.detail.previousValue,validity:this.internals.validity,value:this.value})}async onOdsInvalid(t){t.stopImmediatePropagation(),await r(this.internals,this.value,this.odsInput),this.isInvalid=t.detail.isInvalid}getHasError(){return this.hasError||this.isInvalid}render(){return n(m,{key:"e9e16cb1a9e0e046ae02465624d2b3813c69987c",class:"ods-quantity",disabled:this.isDisabled,readonly:this.isReadonly},n("ods-button",{key:"a37b595650d60d2ff3b49e81be68cbd1d0b087cc",class:"ods-quantity__button",color:this.getHasError()?l.critical:l.primary,exportparts:"button:button-minus",isDisabled:V(this.isDisabled,this.isReadonly,this.value,this.min),icon:c.minus,label:"",onBlur:()=>this.onOdsBlur(),onClick:()=>this.decrement(),size:u.sm,variant:h.outline}),n("ods-input",{key:"f6d20ba0749715186b0714fbd7ac229b43d82448",ariaLabel:this.ariaLabel,ariaLabelledby:this.ariaLabelledby,class:"ods-quantity__input",defaultValue:o(this.defaultValue)?this.defaultValue:void 0,exportparts:"input",hasError:this.getHasError(),isDisabled:this.isDisabled,isReadonly:this.isReadonly,isRequired:this.isRequired,max:this.max,min:this.min,name:this.name,onKeyUp:t=>v(t,this.internals.form),onOdsBlur:()=>this.onOdsBlur(),onOdsChange:t=>this.onOdsChange(t),onOdsInvalid:t=>this.onOdsInvalid(t),placeholder:this.placeholder,ref:t=>this.odsInput=t,step:this.step,type:g.number,value:this.value}),n("ods-button",{key:"67c50238d3f629dd806d1a2a6d5693b8b9bc7586",class:"ods-quantity__button",color:this.getHasError()?l.critical:l.primary,exportparts:"button:button-plus",isDisabled:C(this.isDisabled,this.isReadonly,this.value,this.max),icon:c.plus,label:"",onBlur:()=>this.onOdsBlur(),onClick:()=>this.increment(),size:u.sm,variant:h.outline}))}static get delegatesFocus(){return!0}static get formAssociated(){return!0}static get watchers(){return{isInvalid:["onIsInvalidChange"]}}static get style(){return q}},[81,"ods-quantity",{ariaLabel:[513,"aria-label"],ariaLabelledby:[513,"aria-labelledby"],defaultValue:[514,"default-value"],hasError:[516,"has-error"],isDisabled:[516,"is-disabled"],isReadonly:[516,"is-readonly"],isRequired:[516,"is-required"],max:[514],min:[514],name:[513],placeholder:[513],step:[514],value:[1538],isInvalid:[32],checkValidity:[64],clear:[64],getValidationMessage:[64],getValidity:[64],reportValidity:[64],reset:[64],willValidate:[64]},[[0,"invalid","onInvalidEvent"]],{isInvalid:["onIsInvalidChange"]}]);function k(){if(typeof customElements>"u")return;["ods-quantity","ods-button","ods-icon","ods-input","ods-spinner"].forEach(t=>{switch(t){case"ods-quantity":customElements.get(t)||customElements.define(t,R);break;case"ods-button":customElements.get(t)||f();break;case"ods-icon":customElements.get(t)||I();break;case"ods-input":customElements.get(t)||_();break;case"ods-spinner":customElements.get(t)||E();break}})}k();export{k as d};
