import{p as c,H as m,c as a,h as o,a as p}from"./index-DAZhnxgO.js";import{s as f,b as v}from"./dom-8hoR-urs.js";import{d as C,O as T}from"./ods-input2-C6KOqFAM.js";import{d as U}from"./ods-button2-dPaqs0uX.js";import{d as y}from"./ods-icon2-DRPHarK1.js";import{d as b}from"./ods-select2-CEKvSxa4.js";import{d as g}from"./ods-spinner2-CPyWCS2f.js";var r;(function(i){i.all="all"})(r||(r={}));Object.freeze(Object.values(r));var d;(function(i){i.UTC_12="UTC-12",i.UTC_11="UTC-11",i.UTC_10="UTC-10",i.UTC_9="UTC-9",i.UTC_8="UTC-8",i.UTC_7="UTC-7",i.UTC_6="UTC-6",i.UTC_5="UTC-5",i.UTC_4="UTC-4",i.UTC_3="UTC-3",i.UTC_2="UTC-2",i.UTC_1="UTC-1",i.UTC="UTC+0",i.UTC1="UTC+1",i.UTC2="UTC+2",i.UTC3="UTC+3",i.UTC4="UTC+4",i.UTC5="UTC+5",i.UTC6="UTC+6",i.UTC7="UTC+7",i.UTC8="UTC+8",i.UTC9="UTC+9",i.UTC10="UTC+10",i.UTC11="UTC+11",i.UTC12="UTC+12"})(d||(d={}));const h=Object.freeze(Object.values(d)),u=null;function z(i,s){var e;const t=(e=i==null?void 0:i.match(/:/g))===null||e===void 0?void 0:e.length;if(!s&&t){if(t===1)return i;if(t===2){const n=i.split(":");return`${n[0]}:${n[1]}`}}if(s&&t){if(t===1)return`${i}:00`;if(t===2)return i}return""}function V(i,s){if(!i){const e=new Date().getTimezoneOffset()/60*-1,t=e>=0?`+${e}`:e.toString();return s.find(n=>n.indexOf(t)>-1)}return i}function I(i,s){return s!==void 0&&i===u?s:i}function w(i){if(i===r.all)return h;if(typeof i=="string")try{return JSON.parse(i).filter(e=>h.includes(e.toUpperCase())).map(e=>e.toUpperCase())}catch{return console.warn("[OdsTimepicker] timezones string could not be parsed."),[]}return[]}async function l(i,s,e){var t;i.setFormValue((t=s==null?void 0:s.toString())!==null&&t!==void 0?t:""),e&&await v(e,i)}const k=":host(.ods-timepicker){display:inline-flex;-moz-column-gap:8px;column-gap:8px}.ods-timepicker__input{width:inherit}.ods-timepicker__timezones{min-width:89px}",R=k,L=c(class extends m{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.odsBlur=a(this,"odsBlur",7),this.odsChange=a(this,"odsChange",7),this.odsClear=a(this,"odsClear",7),this.odsFocus=a(this,"odsFocus",7),this.odsInvalid=a(this,"odsInvalid",7),this.odsReset=a(this,"odsReset",7),this.internals=this.attachInternals(),this.hasTimezones=!1,this.timezonesList=[],this.shouldUpdateIsInvalidState=!1,this.isInvalid=!1,this.ariaLabel=null,this.ariaLabelledby=void 0,this.currentTimezone=void 0,this.defaultValue=void 0,this.hasError=!1,this.isDisabled=!1,this.isReadonly=!1,this.isRequired=!1,this.name=void 0,this.timezones=void 0,this.value=u,this.withSeconds=!1}onInvalidEvent(s){s.preventDefault(),this.isInvalid=!0}async checkValidity(){return this.isInvalid=!this.internals.validity.valid,this.internals.checkValidity()}async clear(){var s,e;await((s=this.odsInput)===null||s===void 0?void 0:s.clear()),await((e=this.odsSelect)===null||e===void 0?void 0:e.clear()),this.odsClear.emit(),this.shouldUpdateIsInvalidState=!0}async getValidationMessage(){return this.internals.validationMessage}async getValidity(){return this.internals.validity}async reportValidity(){return this.isInvalid=!this.internals.validity.valid,this.internals.reportValidity()}async reset(){var s,e;await((s=this.odsInput)===null||s===void 0?void 0:s.reset()),await((e=this.odsSelect)===null||e===void 0?void 0:e.reset()),this.odsReset.emit(),this.shouldUpdateIsInvalidState=!0}async willValidate(){return this.internals.willValidate}onIsInvalidChange(){this.odsInvalid.emit({isInvalid:!!this.isInvalid})}onTimezonesChange(){this.timezonesList=w(this.timezones),this.currentTimezone=V(this.currentTimezone,this.timezonesList),this.hasTimezones=!!this.timezonesList.length}async formatValue(){var s,e;const t=z((s=this.odsInput)===null||s===void 0?void 0:s.value,this.withSeconds);t&&(this.previousValue=(e=this.value)!==null&&e!==void 0?e:null,this.value=t),await l(this.internals,this.value,this.odsInput)}componentWillLoad(){this.value=I(this.value,this.defaultValue),this.onTimezonesChange(),this.defaultCurrentTimezone=this.currentTimezone}async componentDidLoad(){await this.formatValue()}async formResetCallback(){await this.reset()}onBlur(){this.isInvalid=!this.internals.validity.valid}async onOdsChange(s,e){s.stopImmediatePropagation(),e?this.currentTimezone=s.detail.value:(this.previousValue=s.detail.previousValue,this.value=s.detail.value,await l(this.internals,this.value,this.odsInput),this.shouldUpdateIsInvalidState&&(this.isInvalid=!this.internals.validity.valid,this.shouldUpdateIsInvalidState=!1)),this.odsChange.emit({currentTimezone:this.currentTimezone,name:this.name,previousValue:this.previousValue,validity:this.internals.validity,value:this.value})}async onOdsInvalid(s){s.stopImmediatePropagation(),await l(this.internals,this.value,this.odsInput),this.isInvalid=s.detail.isInvalid}render(){var s;return o(p,{key:"618d14b75b8d9ede15d71e242fa1e614e7a5ac5a",class:"ods-timepicker",disabled:this.isDisabled,readonly:this.isReadonly},o("ods-input",{key:"6a35a3a5c8556e443ef9daf1ed3cc597e6140d7c",ariaLabel:this.ariaLabel,ariaLabelledby:this.ariaLabelledby,class:"ods-timepicker__input",defaultValue:this.defaultValue,exportparts:"input",hasError:this.hasError||this.isInvalid,isDisabled:this.isDisabled,isReadonly:this.isReadonly,isRequired:this.isRequired,name:this.name,onKeyUp:e=>f(e,this.internals.form),onOdsBlur:()=>this.onBlur(),onOdsChange:e=>this.onOdsChange(e,!1),onOdsClear:e=>e.stopPropagation(),onOdsInvalid:e=>this.onOdsInvalid(e),onOdsReset:e=>e.stopPropagation(),ref:e=>this.odsInput=e,step:this.withSeconds?1:void 0,type:T.time,value:this.value}),this.hasTimezones&&o("ods-select",{key:"eee074ae5dcbec8a57e4bd6eb3c52260c5b75ed5",class:"ods-timepicker__timezones",defaultValue:this.defaultCurrentTimezone,hasError:this.hasError||this.isInvalid,isDisabled:this.isDisabled,isReadonly:this.isReadonly,isRequired:this.isRequired,name:this.name,onOdsBlur:()=>this.onBlur(),onOdsChange:e=>this.onOdsChange(e,!0),onOdsClear:e=>e.stopPropagation(),onOdsInvalid:e=>e.stopPropagation(),onOdsReset:e=>e.stopPropagation(),part:"select",ref:e=>this.odsSelect=e,value:this.currentTimezone},(s=this.timezonesList)===null||s===void 0?void 0:s.map(e=>o("option",{value:e},e))))}static get delegatesFocus(){return!0}static get formAssociated(){return!0}get el(){return this}static get watchers(){return{isInvalid:["onIsInvalidChange"],timezones:["onTimezonesChange"],withSeconds:["formatValue"]}}static get style(){return R}},[81,"ods-timepicker",{ariaLabel:[513,"aria-label"],ariaLabelledby:[513,"aria-labelledby"],currentTimezone:[1537,"current-timezone"],defaultValue:[513,"default-value"],hasError:[516,"has-error"],isDisabled:[516,"is-disabled"],isReadonly:[516,"is-readonly"],isRequired:[516,"is-required"],name:[513],timezones:[513],value:[1537],withSeconds:[516,"with-seconds"],isInvalid:[32],checkValidity:[64],clear:[64],getValidationMessage:[64],getValidity:[64],reportValidity:[64],reset:[64],willValidate:[64]},[[0,"invalid","onInvalidEvent"]],{isInvalid:["onIsInvalidChange"],timezones:["onTimezonesChange"],withSeconds:["formatValue"]}]);function _(){if(typeof customElements>"u")return;["ods-timepicker","ods-button","ods-icon","ods-input","ods-select","ods-spinner"].forEach(s=>{switch(s){case"ods-timepicker":customElements.get(s)||customElements.define(s,L);break;case"ods-button":customElements.get(s)||U();break;case"ods-icon":customElements.get(s)||y();break;case"ods-input":customElements.get(s)||C();break;case"ods-select":customElements.get(s)||b();break;case"ods-spinner":customElements.get(s)||g();break}})}_();export{_ as d};
