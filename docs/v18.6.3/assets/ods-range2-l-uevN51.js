import{p as b,H as m,c as n,h as s,a as _}from"./index-DAZhnxgO.js";import{g as v}from"./dom-8hoR-urs.js";import{a as f}from"./type-B5zI8QxY.js";import{d as k}from"./ods-tooltip2-CW12aP9b.js";const l=null;function y(o,e,r,a){return a!==void 0&&o===l?a:o??(r<e?e:e+(r-e)/2)}function x(o,e,r){if(!o)return[];let a=[];try{a=Array.isArray(o)?o:JSON.parse(o)}catch{console.warn("[OdsRange] ticks string could not be parsed."),a=[]}return a.filter(i=>i>=e&&i<=r).sort((i,t)=>i-t)}function u(o){return Array.isArray(o)&&o.length===2&&o.every(e=>typeof e=="number"||e===null)}function p(o,e,r){var a;o.setFormValue((a=e==null?void 0:e.toString())!==null&&a!==void 0?a:"");const i=Array.isArray(e)&&e.every(d=>!f(d));if(Number.isNaN(e)||i)return o.setValidity({customError:!0},"Type not supported");const t=Array.isArray(e)&&(e==null?void 0:e[0])===l&&(e==null?void 0:e[1])===l;if(r&&(e===l||t))return o.setValidity({customError:!0},"Missing value");o.setValidity({})}function g(o,e,r){return(Number(r)-e)/(o-e)*100||0}const w=":host{display:inline-flex;position:relative;flex-direction:column;width:inherit;height:inherit}:host(.ods-range-dual) .ods-range__range-dual{z-index:1;background:linear-gradient(to right, var(--ods-color-neutral-200) 0, var(--ods-color-neutral-200) min(var(--ods-range-value-percentage), var(--ods-range-value-percentage-dual)), var(--ods-color-primary-500) min(var(--ods-range-value-percentage), var(--ods-range-value-percentage-dual)), var(--ods-color-primary-500) max(var(--ods-range-value-percentage), var(--ods-range-value-percentage-dual)), var(--ods-color-neutral-200) max(var(--ods-range-value-percentage), var(--ods-range-value-percentage-dual)), var(--ods-color-neutral-200) 100%)}:host(.ods-range-dual) .ods-range__range-dual:disabled{background:linear-gradient(to right, var(--ods-color-neutral-200) 0, var(--ods-color-neutral-200) min(var(--ods-range-value-percentage), var(--ods-range-value-percentage-dual)), var(--ods-color-neutral-500) min(var(--ods-range-value-percentage), var(--ods-range-value-percentage-dual)), var(--ods-color-neutral-500) max(var(--ods-range-value-percentage), var(--ods-range-value-percentage-dual)), var(--ods-color-neutral-200) max(var(--ods-range-value-percentage), var(--ods-range-value-percentage-dual)), var(--ods-color-neutral-200) 100%)}:host(.ods-range-dual) .ods-range__range{position:absolute;z-index:2;margin-top:8px;height:0}.ods-range__range{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:4px 0;outline:none;border-radius:var(--ods-border-radius-sm);cursor:pointer;height:8px;pointer-events:none}.ods-range__range::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;box-sizing:border-box;border:1px solid var(--ods-color-neutral-300);border-radius:50%;box-shadow:none;background-color:var(--ods-color-neutral-000);cursor:pointer;width:16px;height:16px;pointer-events:auto}.ods-range__range::-moz-range-thumb{-moz-appearance:none;appearance:none;box-sizing:border-box;border:1px solid var(--ods-color-neutral-300);border-radius:50%;box-shadow:none;background-color:var(--ods-color-neutral-000);cursor:pointer;width:16px;height:16px;pointer-events:auto}.ods-range__range::-ms-thumb{appearance:none;box-sizing:border-box;border:1px solid var(--ods-color-neutral-300);border-radius:50%;box-shadow:none;background-color:var(--ods-color-neutral-000);cursor:pointer;width:16px;height:16px;pointer-events:auto}.ods-range__range::-webkit-slider-container{min-block-size:0}.ods-range__range:not(:disabled)::-webkit-slider-thumb:active{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:not(:disabled)::-webkit-slider-thumb:hover{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:not(:disabled)::-moz-range-thumb:active{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:not(:disabled)::-moz-range-thumb:hover{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:not(:disabled)::-ms-thumb:active{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:not(:disabled)::-ms-thumb:hover{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:focus::-webkit-slider-thumb{outline:var(--ods-outline-style-default) var(--ods-outline-width) var(--ods-outline-color-default);outline-offset:var(--ods-outline-offset);border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:focus::-moz-range-thumb{outline:var(--ods-outline-style-default) var(--ods-outline-width) var(--ods-outline-color-default);outline-offset:var(--ods-outline-offset);border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:focus::-ms-thumb{outline:var(--ods-outline-style-default) var(--ods-outline-width) var(--ods-outline-color-default);outline-offset:var(--ods-outline-offset);border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range:not(.ods-range__range-dual){-webkit-appearance:none;-moz-appearance:none;appearance:none;border-width:0;border-radius:var(--ods-border-radius-sm);background:linear-gradient(var(--ods-color-primary-500), var(--ods-color-primary-500)) 0/var(--ods-range-value-percentage) 100% no-repeat, var(--ods-color-neutral-200)}.ods-range__range:not(.ods-range__range-dual):disabled{background:linear-gradient(var(--ods-color-neutral-500), var(--ods-color-neutral-500)) 0/var(--ods-range-value-percentage) 100% no-repeat, var(--ods-color-neutral-200)}.ods-range__range:disabled{cursor:not-allowed}.ods-range__range:disabled::-webkit-slider-thumb{cursor:not-allowed}.ods-range__range:disabled::-moz-range-thumb{cursor:not-allowed}.ods-range__range:disabled::-ms-thumb{cursor:not-allowed}.ods-range__range:not(:disabled).ods-range__range--error::-webkit-slider-thumb{border-color:var(--ods-color-form-element-border-critical)}.ods-range__range:not(:disabled).ods-range__range--error::-moz-range-thumb{border-color:var(--ods-color-form-element-border-critical)}.ods-range__range:not(:disabled).ods-range__range--error::-ms-thumb{border-color:var(--ods-color-form-element-border-critical)}.ods-range__range-dual{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:4px 0;outline:none;border-radius:var(--ods-border-radius-sm);cursor:pointer;height:8px;pointer-events:none}.ods-range__range-dual::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;box-sizing:border-box;border:1px solid var(--ods-color-neutral-300);border-radius:50%;box-shadow:none;background-color:var(--ods-color-neutral-000);cursor:pointer;width:16px;height:16px;pointer-events:auto}.ods-range__range-dual::-moz-range-thumb{-moz-appearance:none;appearance:none;box-sizing:border-box;border:1px solid var(--ods-color-neutral-300);border-radius:50%;box-shadow:none;background-color:var(--ods-color-neutral-000);cursor:pointer;width:16px;height:16px;pointer-events:auto}.ods-range__range-dual::-ms-thumb{appearance:none;box-sizing:border-box;border:1px solid var(--ods-color-neutral-300);border-radius:50%;box-shadow:none;background-color:var(--ods-color-neutral-000);cursor:pointer;width:16px;height:16px;pointer-events:auto}.ods-range__range-dual::-webkit-slider-container{min-block-size:0}.ods-range__range-dual:not(:disabled)::-webkit-slider-thumb:active{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:not(:disabled)::-webkit-slider-thumb:hover{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:not(:disabled)::-moz-range-thumb:active{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:not(:disabled)::-moz-range-thumb:hover{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:not(:disabled)::-ms-thumb:active{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:not(:disabled)::-ms-thumb:hover{border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:focus::-webkit-slider-thumb{outline:var(--ods-outline-style-default) var(--ods-outline-width) var(--ods-outline-color-default);outline-offset:var(--ods-outline-offset);border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:focus::-moz-range-thumb{outline:var(--ods-outline-style-default) var(--ods-outline-width) var(--ods-outline-color-default);outline-offset:var(--ods-outline-offset);border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:focus::-ms-thumb{outline:var(--ods-outline-style-default) var(--ods-outline-width) var(--ods-outline-color-default);outline-offset:var(--ods-outline-offset);border-color:var(--ods-color-primary-200);background-color:var(--ods-color-primary-200)}.ods-range__range-dual:not(.ods-range__range-dual){-webkit-appearance:none;-moz-appearance:none;appearance:none;border-width:0;border-radius:var(--ods-border-radius-sm);background:linear-gradient(var(--ods-color-primary-500), var(--ods-color-primary-500)) 0/var(--ods-range-value-percentage) 100% no-repeat, var(--ods-color-neutral-200)}.ods-range__range-dual:not(.ods-range__range-dual):disabled{background:linear-gradient(var(--ods-color-neutral-500), var(--ods-color-neutral-500)) 0/var(--ods-range-value-percentage) 100% no-repeat, var(--ods-color-neutral-200)}.ods-range__range-dual:disabled{cursor:not-allowed}.ods-range__range-dual:disabled::-webkit-slider-thumb{cursor:not-allowed}.ods-range__range-dual:disabled::-moz-range-thumb{cursor:not-allowed}.ods-range__range-dual:disabled::-ms-thumb{cursor:not-allowed}.ods-range__range-dual:not(:disabled).ods-range__range-dual--error::-webkit-slider-thumb{border-color:var(--ods-color-form-element-border-critical)}.ods-range__range-dual:not(:disabled).ods-range__range-dual--error::-moz-range-thumb{border-color:var(--ods-color-form-element-border-critical)}.ods-range__range-dual:not(:disabled).ods-range__range-dual--error::-ms-thumb{border-color:var(--ods-color-form-element-border-critical)}.ods-range__info{display:flex;justify-content:space-between;padding-top:4px}.ods-range__info__min{color:var(--ods-color-text);font-size:16px;font-weight:600}.ods-range__info__max{color:var(--ods-color-text);font-size:16px;font-weight:600}.ods-range__shadow-thumb{position:absolute;top:0;opacity:0;z-index:-1;width:16px;height:16px}.ods-range__ticks{--ods-range-tick-width:2px;position:absolute;inset:0 8px;z-index:-1}.ods-range__ticks__tick{position:absolute;border-radius:6px;background-color:var(--ods-color-neutral-200);width:2px;height:16px}.ods-range__ticks__tick:not(.ods-range__ticks__tick--disabled).ods-range__ticks__tick--activated{background-color:var(--ods-color-primary-500)}.ods-range__ticks__tick--disabled.ods-range__ticks__tick--activated{background-color:var(--ods-color-neutral-500)}",I=w,E=b(class extends m{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.odsBlur=n(this,"odsBlur",7),this.odsChange=n(this,"odsChange",7),this.odsClear=n(this,"odsClear",7),this.odsFocus=n(this,"odsFocus",7),this.odsInvalid=n(this,"odsInvalid",7),this.odsReset=n(this,"odsReset",7),this.internals=this.attachInternals(),this.hostId="",this.inputRangeId="input-range",this.inputRangeDualId="input-range-dual",this.shouldUpdateIsInvalidState=!1,this.listId=v(),this.activatedTicks=[],this.dualValue=void 0,this.currentValue=void 0,this.isDualRange=!1,this.isInvalid=void 0,this.parsedTicks=[],this.defaultValue=void 0,this.hasError=!1,this.isDisabled=!1,this.isRequired=!1,this.max=100,this.min=0,this.name=void 0,this.step=void 0,this.ticks=void 0,this.value=l}onInvalidEvent(e){e.preventDefault(),this.isInvalid=!0}async clear(){this.shouldUpdateIsInvalidState=!0,this.isDualRange?this.value=[null,null]:this.value=null,this.odsClear.emit(),this.emitOdsChange()}async checkValidity(){return this.isInvalid=!this.internals.validity.valid,this.internals.checkValidity()}async getValidationMessage(){return this.internals.validationMessage}async getValidity(){return this.internals.validity}async reset(){var e,r;this.shouldUpdateIsInvalidState=!0,this.isDualRange?this.value=(e=this.defaultValue)!==null&&e!==void 0?e:[null,null]:this.value=(r=this.defaultValue)!==null&&r!==void 0?r:null,this.odsReset.emit(),this.emitOdsChange()}async reportValidity(){return this.isInvalid=!this.internals.validity.valid,this.internals.reportValidity()}async willValidate(){return this.internals.willValidate}onIsInvalidChange(){this.odsInvalid.emit({isInvalid:!!this.isInvalid})}onMinOrMaxChange(){if(this.value)if(!u(this.value))this.value=Math.min(Math.max(this.value,this.min),this.max);else{const[e,r]=this.value;r&&r>this.max&&(this.value=[this.value[0],this.max]),e&&e>this.max&&(this.value=[this.max,this.value[1]]),r&&this.min>r&&(this.value=[this.value[0],this.min]),e&&this.min>e&&(this.value=[this.min,this.value[1]])}}onTicksChange(){this.parsedTicks=x(this.ticks,this.min,this.max),this.setActivatedTicks()}onValueChange(e=this.value){u(e)?(this.isDualRange=!0,this.fillInputs(e[0],e[1])):(this.isDualRange=!1,this.fillInputs(e)),this.setActivatedTicks(),p(this.internals,e,this.isRequired),this.shouldUpdateIsInvalidState&&(this.isInvalid=!this.internals.validity.valid,this.shouldUpdateIsInvalidState=!1)}componentWillLoad(){this.hostId=this.el.id||v(),this.value=y(this.value,this.min,this.max,this.defaultValue),this.onTicksChange(),this.onMinOrMaxChange(),this.onValueChange(),this.emitOdsChange(),this.observable=new MutationObserver(e=>{for(const r of e)r.attributeName==="required"&&(p(this.internals,this.value,this.isRequired),this.isInvalid=!this.internals.validity.valid),r.attributeName&&["step","min","max"].includes(r.attributeName)&&this.onInput(!1)})}componentDidLoad(){var e;this.inputEl&&((e=this.observable)===null||e===void 0||e.observe(this.inputEl,{attributeFilter:["step","min","max","required"],attributeOldValue:!0,attributes:!0}))}disconnectedCallback(){var e;(e=this.observable)===null||e===void 0||e.disconnect()}async formResetCallback(){await this.reset()}emitOdsChange(){this.odsChange.emit({name:this.name,validity:this.internals.validity,value:this.value})}fillInputs(e,r){let a;return this.isDualRange?(this.currentValue=e??void 0,this.dualValue=r??void 0,a=[e,r]):(this.currentValue=e??void 0,a=this.currentValue),a}hideTooltip(){var e;(e=this.tooltip)===null||e===void 0||e.hide()}hideTooltipDual(){var e;(e=this.tooltipDual)===null||e===void 0||e.hide()}onBlur(){this.isInvalid=!this.internals.validity.valid,this.odsBlur.emit()}onInput(e){var r,a,i,t,d,c;if(!this.inputEl||e&&!this.inputElDual)return;const h=(r=this.step)!==null&&r!==void 0?r:1;((i=(a=this.inputElDual)===null||a===void 0?void 0:a.valueAsNumber)!==null&&i!==void 0?i:0)-((t=this.inputEl)===null||t===void 0?void 0:t.valueAsNumber)<h&&(e?this.setInputElDualValue(h):this.setInputElValue(h)),this.isDualRange=u(this.value),this.isDualRange?this.value=[this.inputEl.valueAsNumber,(c=(d=this.inputElDual)===null||d===void 0?void 0:d.valueAsNumber)!==null&&c!==void 0?c:0]:this.value=this.inputEl.valueAsNumber}setInputElDualValue(e){var r,a;this.inputEl&&this.inputElDual&&(this.inputElDual.valueAsNumber=((a=(r=this.inputEl)===null||r===void 0?void 0:r.valueAsNumber)!==null&&a!==void 0?a:0)+e)}setInputElValue(e){var r,a;this.inputEl&&this.inputElDual&&(this.inputEl.valueAsNumber=((a=(r=this.inputElDual)===null||r===void 0?void 0:r.valueAsNumber)!==null&&a!==void 0?a:0)-e)}setActivatedTicks(){this.activatedTicks=this.parsedTicks.filter(e=>{if(u(this.value)){const[r,a]=this.value;return this.value&&e>=r&&e<=a}else return this.value&&e<=this.value})}showTooltip(){var e;(e=this.tooltip)===null||e===void 0||e.show()}showTooltipDual(){var e;(e=this.tooltipDual)===null||e===void 0||e.show()}renderTicks(){if(!(!this.parsedTicks||this.parsedTicks.length===0))return s("div",null,s("datalist",{id:this.listId},this.parsedTicks.map(e=>s("option",{value:e}))),s("div",{class:"ods-range__ticks"},this.parsedTicks.map(e=>s("div",{class:{"ods-range__ticks__tick":!0,"ods-range__ticks__tick--activated":this.activatedTicks.indexOf(e)>-1,"ods-range__ticks__tick--disabled":this.isDisabled},style:{left:`calc(${g(this.max,this.min,e)}% - calc(var(--ods-range-tick-width) / 2))`}}))))}renderTooltip(e,r,a=!1){const i=a?"ods-range-shadow-thumb-dual":"ods-range-shadow-thumb";return s("div",null,s("div",{class:"ods-range__shadow-thumb",id:i,style:{left:`calc(${e}% - (${e*.15}px))`}}),!this.isDisabled&&r!==void 0&&s("ods-tooltip",{position:"top",ref:t=>a?this.tooltipDual=t:this.tooltip=t,shadowDomTriggerId:i,triggerId:this.hostId,withArrow:!0},r))}render(){var e,r;const a=g(this.max,this.min,this.currentValue),i=g(this.max,this.min,this.dualValue);return s(_,{key:"c781822f607a0a43c7a20c8fa987a92dd095e731",class:{"ods-range":!0,"ods-range-dual":this.isDualRange},disabled:this.isDisabled,id:this.hostId,style:{"--ods-range-value-percentage":`${a}%`,"--ods-range-value-percentage-dual":`${i}%`}},s("input",{key:"0a22cde42f868419e982781fe70a58229c532d1f",class:{"ods-range__range":!0,"ods-range__range--error":this.hasError||!!this.isInvalid},"aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.value,disabled:this.isDisabled,id:this.inputRangeId,list:this.listId,max:this.max,min:this.min,onBlur:()=>this.onBlur(),onChange:()=>this.emitOdsChange(),onFocus:()=>this.odsFocus.emit(),onFocusin:()=>this.showTooltip(),onFocusout:()=>this.hideTooltip(),onInput:()=>this.onInput(!1),onMouseLeave:()=>this.hideTooltip(),onMouseOver:()=>this.showTooltip(),part:"range",ref:t=>this.inputEl=t,required:this.isRequired,step:this.step,type:"range",value:(e=this.currentValue)===null||e===void 0?void 0:e.toString()}),this.renderTicks(),this.renderTooltip(a,this.currentValue),this.isDualRange&&s("input",{key:"185d37384952f6ab5bece12099f23c17e28921b7",class:{"ods-range__range-dual":!0,"ods-range__range-dual--error":this.hasError||!!this.isInvalid},"aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.value,disabled:this.isDisabled,id:this.inputRangeDualId,list:this.listId,max:this.max,min:this.min,onChange:()=>this.emitOdsChange(),onFocusin:()=>this.showTooltipDual(),onFocusout:()=>this.hideTooltipDual(),onInput:()=>this.onInput(!0),onMouseLeave:()=>this.hideTooltipDual(),onMouseOver:()=>this.showTooltipDual(),part:"range-dual",ref:t=>this.inputElDual=t,required:this.isRequired,step:this.step,type:"range",value:(r=this.dualValue)===null||r===void 0?void 0:r.toString()}),this.isDualRange&&this.renderTooltip(i,this.dualValue,!0),s("div",{key:"eb406e5bef11601ad010d960fca8359ba59bed8f",class:"ods-range__info"},s("span",{key:"84b4e6ea9c8ef0e542017b27b2a4c3893531110c",class:"ods-range__info__min"},this.min),s("span",{key:"f84f4deddfcf4ca598b6bf5af2a225803913438b",class:"ods-range__info__max"},this.max)))}static get delegatesFocus(){return!0}static get formAssociated(){return!0}get el(){return this}static get watchers(){return{isInvalid:["onIsInvalidChange"],min:["onMinOrMaxChange"],max:["onMinOrMaxChange"],ticks:["onTicksChange"],value:["onValueChange"]}}static get style(){return I}},[81,"ods-range",{defaultValue:[514,"default-value"],hasError:[516,"has-error"],isDisabled:[516,"is-disabled"],isRequired:[516,"is-required"],max:[514],min:[514],name:[513],step:[514],ticks:[513],value:[1538],activatedTicks:[32],dualValue:[32],currentValue:[32],isDualRange:[32],isInvalid:[32],parsedTicks:[32],clear:[64],checkValidity:[64],getValidationMessage:[64],getValidity:[64],reset:[64],reportValidity:[64],willValidate:[64]},[[0,"invalid","onInvalidEvent"]],{isInvalid:["onIsInvalidChange"],min:["onMinOrMaxChange"],max:["onMinOrMaxChange"],ticks:["onTicksChange"],value:["onValueChange"]}]);function D(){if(typeof customElements>"u")return;["ods-range","ods-tooltip"].forEach(e=>{switch(e){case"ods-range":customElements.get(e)||customElements.define(e,E);break;case"ods-tooltip":customElements.get(e)||k();break}})}D();export{D as d};
