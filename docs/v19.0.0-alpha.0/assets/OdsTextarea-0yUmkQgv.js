import{j as l}from"./jsx-runtime-BSm7YJ_y.js";import{c as O}from"./controls-CQ2mnOwv.js";import{r as a}from"./index-E9JSHJbc.js";import{f as z,x as g,y as _,B as Z,q as $,C as c,X as ee,g as re,z as S,j as te,v as oe}from"./index-BDDKzIGc.js";const[se,T]=z({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1}),A=a.forwardRef((e,t)=>{const r=T(),o=g(r.getErrorTextProps(),e);return r!=null&&r.invalid?l.jsx(_.span,{...o,ref:t}):null});A.displayName="FieldErrorText";const B=a.forwardRef((e,t)=>{const r=T(),o=g(r==null?void 0:r.getHelperTextProps(),e);return l.jsx(_.span,{...o,ref:t})});B.displayName="FieldHelperText";const k=a.forwardRef((e,t)=>{const r=T(),o=g(r==null?void 0:r.getLabelProps(),e);return l.jsx(_.label,{...o,ref:t})});k.displayName="FieldLabel";const ae=typeof window<"u"?a.useLayoutEffect:a.useEffect,[be,de]=z({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),ne=Z("field").parts("root","errorText","helperText","input","label","select","textarea","requiredIndicator"),p=ne.build(),ie=(e={})=>{const t=de(),{ids:r,disabled:o=!!(t!=null&&t.disabled),invalid:s=!1,readOnly:n=!1,required:i=!1}=e,[m,v]=a.useState(!1),[b,h]=a.useState(!1),d=e.id??a.useId(),y=a.useRef(null),P=(r==null?void 0:r.control)??`field::${d}`,u=(r==null?void 0:r.errorText)??`field::${d}::error-text`,f=(r==null?void 0:r.helperText)??`field::${d}::helper-text`,N=(r==null?void 0:r.label)??`field::${d}::label`;ae(()=>{const x=y.current;if(!x)return;const L=$(x),q=L.document,M=()=>{v(!!q.getElementById(u)),h(!!q.getElementById(f))};M();const C=new L.MutationObserver(M);return C.observe(x,{childList:!0,subtree:!0}),()=>C.disconnect()},[u,f]);const w=a.useMemo(()=>{const x=[];return m&&s&&x.push(u),b&&x.push(f),x.join(" ")||void 0},[s,u,f,m,b]),D=a.useMemo(()=>()=>({...p.root.attrs,id:P,ref:y,role:"group","data-disabled":c(o),"data-invalid":c(s),"data-readonly":c(n)}),[o,s,n,P]),W=a.useMemo(()=>()=>({...p.label.attrs,id:N,"data-disabled":c(o),"data-invalid":c(s),"data-readonly":c(n),htmlFor:d}),[o,s,n,d,N]),F=a.useMemo(()=>()=>({"aria-describedby":w,"aria-invalid":ee(s),"data-invalid":c(s),"data-required":c(i),"data-readonly":c(n),id:d,required:i,disabled:o,readOnly:n}),[w,s,i,n,d,o]),X=a.useMemo(()=>()=>({...F(),...p.input.attrs}),[F]),G=a.useMemo(()=>()=>({...F(),...p.textarea.attrs}),[F]),J=a.useMemo(()=>()=>({...F(),...p.select.attrs}),[F]),K=a.useMemo(()=>()=>({id:f,...p.helperText.attrs,"data-disabled":c(o)}),[o,f]),Q=a.useMemo(()=>()=>({id:u,...p.errorText.attrs,"aria-live":"polite"}),[u]),U=a.useMemo(()=>()=>({"aria-hidden":!0,...p.requiredIndicator.attrs}),[]);return{ariaDescribedby:w,ids:{root:P,control:d,label:N,errorText:u,helperText:f},refs:{rootRef:y},disabled:o,invalid:s,readOnly:n,required:i,getLabelProps:W,getRootProps:D,getInputProps:X,getTextareaProps:G,getSelectProps:J,getHelperTextProps:K,getErrorTextProps:Q,getRequiredIndicatorProps:U}},V=a.forwardRef((e,t)=>{const[r,o]=re()(e,["id","ids","disabled","invalid","readOnly","required"]),s=ie(r),n=g(s.getRootProps(),o);return l.jsx(se,{value:s,children:l.jsx(_.div,{...n,ref:S(t,s.refs.rootRef)})})});V.displayName="FieldRoot";var le=e=>{var b,h;if(!e)return;const t=te(e),r=$(e),o=oe(e),s=()=>{requestAnimationFrame(()=>{e.style.height="auto";let d;t.boxSizing==="content-box"?d=e.scrollHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):d=e.scrollHeight+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),t.maxHeight!=="none"&&d>parseFloat(t.maxHeight)?(t.overflowY==="hidden"&&(e.style.overflowY="scroll"),d=parseFloat(t.maxHeight)):t.overflowY!=="hidden"&&(e.style.overflowY="hidden"),e.style.height=`${d}px`})};e.addEventListener("input",s),(b=e.form)==null||b.addEventListener("reset",s);const n=Object.getPrototypeOf(e),i=Object.getOwnPropertyDescriptor(n,"value");Object.defineProperty(e,"value",{...i,set(){var d;(d=i==null?void 0:i.set)==null||d.apply(this,arguments),s()}});const m=new r.ResizeObserver(()=>{requestAnimationFrame(()=>s())});m.observe(e);const v=new r.MutationObserver(()=>s());return v.observe(e,{attributes:!0,attributeFilter:["rows","placeholder"]}),(h=o.fonts)==null||h.addEventListener("loadingdone",s),()=>{var d,y;e.removeEventListener("input",s),(d=e.form)==null||d.removeEventListener("reset",s),(y=o.fonts)==null||y.removeEventListener("loadingdone",s),m.disconnect(),v.disconnect()}};const Y=a.forwardRef((e,t)=>{const{autoresize:r,...o}=e,s=a.useRef(null),n=T(),i=g(n==null?void 0:n.getTextareaProps(),{style:{resize:r?"none":void 0}},o);return a.useEffect(()=>{if(r)return le(s.current)},[r]),l.jsx(_.textarea,{...i,ref:S(t,s)})});Y.displayName="FieldTextarea";const ce={"ods-form-field":"_ods-form-field_p52kn_1"},E=a.forwardRef(({children:e,className:t,disabled:r,invalid:o,readOnly:s,required:n,...i},m)=>l.jsx(V,{className:O(ce["ods-form-field"],t),disabled:r,invalid:o,readOnly:s,required:n,ref:m,...i,children:e}));E.displayName="OdsFormField";try{E.displayName="OdsFormField",E.__docgenInfo={description:"",displayName:"OdsFormField",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}}}}}catch{}const pe={"ods-form-field-error":"_ods-form-field-error_1cmhy_1"},R=a.forwardRef(({children:e,className:t,...r},o)=>l.jsx(A,{className:O(pe["ods-form-field-error"],t),ref:o,...r,children:e}));R.displayName="OdsFormFieldError";try{R.displayName="OdsFormFieldError",R.__docgenInfo={description:"",displayName:"OdsFormFieldError",props:{}}}catch{}const j=a.forwardRef(({children:e,className:t,...r},o)=>l.jsx(B,{className:t,ref:o,...r,children:e}));j.displayName="OdsFormFieldHelper";try{j.displayName="OdsFormFieldHelper",j.__docgenInfo={description:"",displayName:"OdsFormFieldHelper",props:{}}}catch{}const me={"ods-form-field-label":"_ods-form-field-label_1sobj_1"},H=a.forwardRef(({children:e,className:t,...r},o)=>l.jsx(k,{className:O(me["ods-form-field-label"],t),ref:o,...r,children:e}));H.displayName="OdsFormFieldLabel";try{H.displayName="OdsFormFieldLabel",H.__docgenInfo={description:"",displayName:"OdsFormFieldLabel",props:{}}}catch{}const ue={"ods-textarea":"_ods-textarea_1ui4e_1"},I=a.forwardRef(({className:e,...t},r)=>l.jsx(Y,{className:O(ue["ods-textarea"],e),ref:r,...t}));I.displayName="OdsTextarea";try{I.displayName="OdsTextarea",I.__docgenInfo={description:"",displayName:"OdsTextarea",props:{}}}catch{}export{H as O,j as a,R as b,E as c,I as d};
