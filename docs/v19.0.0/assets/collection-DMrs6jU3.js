import{h as O,j as d,k as p}from"./use-locale-context-BQVaQ0H3.js";var S=Object.defineProperty,v=(r,h,t)=>h in r?S(r,h,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[h]=t,n=(r,h,t)=>v(r,typeof h!="symbol"?h+"":h,t),c={itemToValue(r){return typeof r=="string"?r:d(r)&&p(r,"value")?r.value:""},itemToString(r){return typeof r=="string"?r:d(r)&&p(r,"label")?r.label:c.itemToValue(r)},isItemDisabled(r){return d(r)&&p(r,"disabled")?!!r.disabled:!1}},B=class x{constructor(h){this.options=h,n(this,"items"),n(this,"copy",t=>new x({...this.options,items:t??[...this.items]})),n(this,"isEqual",t=>O(this.items,t.items)),n(this,"setItems",t=>this.copy(t)),n(this,"getValues",(t=this.items)=>Array.from(t).map(e=>this.getItemValue(e)).filter(Boolean)),n(this,"find",t=>{if(t==null)return null;const e=this.indexOf(t);return e!=null?this.at(e):null}),n(this,"findMany",t=>Array.from(t).map(e=>this.find(e)).filter(e=>e!=null)),n(this,"at",t=>{if(!this.options.groupBy&&!this.options.groupSort)return this.items[t]??null;let e=0;const i=this.group();for(const[,s]of i)for(const l of s){if(e===t)return l;e++}return null}),n(this,"sortFn",(t,e)=>{const i=this.indexOf(t),s=this.indexOf(e);return(i??0)-(s??0)}),n(this,"sort",t=>[...t].sort(this.sortFn.bind(this))),n(this,"getItemValue",t=>{var e,i;return t==null?null:((i=(e=this.options).itemToValue)==null?void 0:i.call(e,t))??c.itemToValue(t)}),n(this,"getItemDisabled",t=>{var e,i;return t==null?!1:((i=(e=this.options).isItemDisabled)==null?void 0:i.call(e,t))??c.isItemDisabled(t)}),n(this,"stringifyItem",t=>{var e,i;return t==null?null:((i=(e=this.options).itemToString)==null?void 0:i.call(e,t))??c.itemToString(t)}),n(this,"stringify",t=>t==null?null:this.stringifyItem(this.find(t))),n(this,"stringifyItems",(t,e=", ")=>Array.from(t).map(i=>this.stringifyItem(i)).filter(Boolean).join(e)),n(this,"stringifyMany",(t,e)=>this.stringifyItems(this.findMany(t),e)),n(this,"has",t=>this.indexOf(t)!==-1),n(this,"hasItem",t=>t==null?!1:this.has(this.getItemValue(t))),n(this,"group",()=>{const{groupBy:t,groupSort:e}=this.options;if(!t)return[["",[...this.items]]];const i=new Map;this.items.forEach((l,u)=>{const o=t(l,u);i.has(o)||i.set(o,[]),i.get(o).push(l)});let s=Array.from(i.entries());return e&&s.sort(([l],[u])=>{if(typeof e=="function")return e(l,u);if(Array.isArray(e)){const o=e.indexOf(l),f=e.indexOf(u);return o===-1?1:f===-1?-1:o-f}return e==="asc"?l.localeCompare(u):e==="desc"?u.localeCompare(l):0}),s}),n(this,"getNextValue",(t,e=1,i=!1)=>{let s=this.indexOf(t);if(s===-1)return null;for(s=i?Math.min(s+e,this.size-1):s+e;s<=this.size&&this.getItemDisabled(this.at(s));)s++;return this.getItemValue(this.at(s))}),n(this,"getPreviousValue",(t,e=1,i=!1)=>{let s=this.indexOf(t);if(s===-1)return null;for(s=i?Math.max(s-e,0):s-e;s>=0&&this.getItemDisabled(this.at(s));)s--;return this.getItemValue(this.at(s))}),n(this,"indexOf",t=>{if(t==null)return-1;if(!this.options.groupBy&&!this.options.groupSort)return this.items.findIndex(s=>this.getItemValue(s)===t);let e=0;const i=this.group();for(const[,s]of i)for(const l of s){if(this.getItemValue(l)===t)return e;e++}return-1}),n(this,"getByText",(t,e)=>{let i=e!=null?A(this.items,this.indexOf(e)):this.items;return t.length===1&&(i=i.filter(l=>this.getItemValue(l)!==e)),i.find(l=>w(this.stringifyItem(l),t))}),n(this,"search",(t,e)=>{const{state:i,currentValue:s,timeout:l=350}=e,u=i.keysSoFar+t,f=u.length>1&&Array.from(u).every(m=>m===u[0])?u[0]:u,V=this.getByText(f,s),b=this.getItemValue(V);function y(){clearTimeout(i.timer),i.timer=-1}function I(m){i.keysSoFar=m,y(),m!==""&&(i.timer=+setTimeout(()=>{I(""),y()},l))}return I(u),b}),n(this,"update",(t,e)=>{let i=this.items.findIndex(s=>this.getItemValue(s)===t);return i===-1?this:this.copy([...this.items.slice(0,i),e,...this.items.slice(i+1)])}),n(this,"insert",(t,...e)=>this.copy(a(this.items,t,...e))),n(this,"insertBefore",(t,...e)=>{let i=this.indexOf(t);if(i===-1)if(this.items.length===0)i=0;else return this;return this.copy(a(this.items,i,...e))}),n(this,"insertAfter",(t,...e)=>{let i=this.indexOf(t);if(i===-1)if(this.items.length===0)i=0;else return this;return this.copy(a(this.items,i+1,...e))}),n(this,"prepend",(...t)=>this.copy(a(this.items,0,...t))),n(this,"append",(...t)=>this.copy(a(this.items,this.items.length,...t))),n(this,"filter",t=>{const e=this.items.filter((i,s)=>t(this.stringifyItem(i),s));return this.copy(e)}),n(this,"remove",(...t)=>{const e=t.map(i=>typeof i=="string"?i:this.getItemValue(i));return this.copy(this.items.filter(i=>{const s=this.getItemValue(i);return s==null?!1:!e.includes(s)}))}),n(this,"move",(t,e)=>{const i=this.indexOf(t);return i===-1?this:this.copy(g(this.items,[i],e))}),n(this,"moveBefore",(t,...e)=>{let i=this.items.findIndex(l=>this.getItemValue(l)===t);if(i===-1)return this;let s=e.map(l=>this.items.findIndex(u=>this.getItemValue(u)===l)).sort((l,u)=>l-u);return this.copy(g(this.items,s,i))}),n(this,"moveAfter",(t,...e)=>{let i=this.items.findIndex(l=>this.getItemValue(l)===t);if(i===-1)return this;let s=e.map(l=>this.items.findIndex(u=>this.getItemValue(u)===l)).sort((l,u)=>l-u);return this.copy(g(this.items,s,i+1))}),n(this,"reorder",(t,e)=>this.copy(g(this.items,[t],e))),n(this,"compareValue",(t,e)=>{const i=this.indexOf(t),s=this.indexOf(e);return i<s?-1:i>s?1:0}),n(this,"range",(t,e)=>{let i=[],s=t;for(;s!=null;){if(this.find(s)&&i.push(s),s===e)return i;s=this.getNextValue(s)}return[]}),n(this,"getValueRange",(t,e)=>t&&e?this.compareValue(t,e)<=0?this.range(t,e):this.range(e,t):[]),n(this,"toString",()=>{let t="";for(const e of this.items){const i=this.getItemValue(e),s=this.stringifyItem(e),l=this.getItemDisabled(e),u=[i,s,l].filter(Boolean).join(":");t+=u+","}return t}),n(this,"toJSON",()=>({size:this.size,first:this.firstValue,last:this.lastValue})),this.items=[...h.items]}get size(){return this.items.length}get firstValue(){let h=0;for(;this.getItemDisabled(this.at(h));)h++;return this.getItemValue(this.at(h))}get lastValue(){let h=this.size-1;for(;this.getItemDisabled(this.at(h));)h--;return this.getItemValue(this.at(h))}*[Symbol.iterator](){yield*this.items}},w=(r,h)=>!!(r!=null&&r.toLowerCase().startsWith(h.toLowerCase())),A=(r,h)=>r.map((t,e)=>r[(Math.max(h,0)+e)%r.length]);function a(r,h,...t){return[...r.slice(0,h),...t,...r.slice(h)]}function g(r,h,t){h=[...h].sort((i,s)=>i-s);const e=h.map(i=>r[i]);for(let i=h.length-1;i>=0;i--)r=[...r.slice(0,h[i]),...r.slice(h[i]+1)];return t=Math.max(0,t-h.filter(i=>i<t).length),[...r.slice(0,t),...e,...r.slice(t)]}const D=r=>new B(r);export{B as L,D as c};
