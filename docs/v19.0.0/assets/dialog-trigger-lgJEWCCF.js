import{j as c}from"./jsx-runtime-VM66peLj.js";import{r as p}from"./index-D_CmzhJ4.js";import{c as T,Q as u,R as E,S as h,T as F,K as L,H as R,r as y,J as S,u as N,U as B,L as w,V as x}from"./use-locale-context-BQVaQ0H3.js";import{u as P,a as j,P as $}from"./use-presence-Cqrqn20p.js";import{s as G,R as K}from"./render-strategy-D_LTfuI4.js";import{s as V}from"./portal-Bd62KldU.js";import{a as H}from"./index-DninfMAu.js";import{t as M}from"./index-DHCC0GIt.js";import{t as Z,p as A}from"./index-hWLJHUef.js";const[J,f]=T({name:"DialogContext",hookName:"useDialogContext",providerName:"<DialogProvider />"}),Q=p.forwardRef((e,t)=>{const o=f(),n=P(),r=u(o.getContentProps(),n.getPresenceProps(),e);return n.unmounted?null:c.jsx(E.div,{...r,ref:h(n.ref,t)})});Q.displayName="DialogContent";const U=p.forwardRef((e,t)=>{const o=f(),n=u(o.getPositionerProps(),e);return P().unmounted?null:c.jsx(E.div,{...n,ref:t})});U.displayName="DialogPositioner";var q=F("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),l=q.build(),D=e=>{var t;return((t=e.ids)==null?void 0:t.positioner)??`dialog:${e.id}:positioner`},k=e=>{var t;return((t=e.ids)==null?void 0:t.backdrop)??`dialog:${e.id}:backdrop`},m=e=>{var t;return((t=e.ids)==null?void 0:t.content)??`dialog:${e.id}:content`},b=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`dialog:${e.id}:trigger`},O=e=>{var t;return((t=e.ids)==null?void 0:t.title)??`dialog:${e.id}:title`},v=e=>{var t;return((t=e.ids)==null?void 0:t.description)??`dialog:${e.id}:description`},I=e=>{var t;return((t=e.ids)==null?void 0:t.closeTrigger)??`dialog:${e.id}:close`},g=e=>e.getById(m(e)),W=e=>e.getById(D(e)),X=e=>e.getById(k(e)),Y=e=>e.getById(b(e)),_=e=>e.getById(O(e)),z=e=>e.getById(v(e)),ee=e=>e.getById(I(e));function te(e,t){const{state:o,send:n,context:r,prop:s,scope:i}=e,C=s("aria-label"),d=o.matches("open");return{open:d,setOpen(a){o.matches("open")!==a&&n({type:a?"OPEN":"CLOSE"})},getTriggerProps(){return t.button({...l.trigger.attrs,dir:s("dir"),id:b(i),"aria-haspopup":"dialog",type:"button","aria-expanded":d,"data-state":d?"open":"closed","aria-controls":m(i),onClick(a){a.defaultPrevented||n({type:"TOGGLE"})}})},getBackdropProps(){return t.element({...l.backdrop.attrs,dir:s("dir"),hidden:!d,id:k(i),"data-state":d?"open":"closed"})},getPositionerProps(){return t.element({...l.positioner.attrs,dir:s("dir"),id:D(i),style:{pointerEvents:d?void 0:"none"}})},getContentProps(){const a=r.get("rendered");return t.element({...l.content.attrs,dir:s("dir"),role:s("role"),hidden:!d,id:m(i),tabIndex:-1,"data-state":d?"open":"closed","aria-modal":!0,"aria-label":C||void 0,"aria-labelledby":C||!a.title?void 0:O(i),"aria-describedby":a.description?v(i):void 0})},getTitleProps(){return t.element({...l.title.attrs,dir:s("dir"),id:O(i)})},getDescriptionProps(){return t.element({...l.description.attrs,dir:s("dir"),id:v(i)})},getCloseTriggerProps(){return t.button({...l.closeTrigger.attrs,dir:s("dir"),id:I(i),type:"button",onClick(a){a.defaultPrevented||(a.stopPropagation(),n({type:"CLOSE"}))}})}}}var oe=R({props({props:e,scope:t}){const o=e.role==="alertdialog";return{role:"dialog",modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!o,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:o?()=>ee(t):void 0,...e}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{rendered:e(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:e,action:t,prop:o}){e([()=>o("open")],()=>{t(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackDismissableElement({scope:e,send:t,prop:o}){return M(()=>g(e),{defer:!0,pointerBlocking:o("modal"),exclude:[Y(e)],onInteractOutside(r){var s;(s=o("onInteractOutside"))==null||s(r),o("closeOnInteractOutside")||r.preventDefault()},persistentElements:o("persistentElements"),onFocusOutside:o("onFocusOutside"),onPointerDownOutside:o("onPointerDownOutside"),onEscapeKeyDown(r){var s;(s=o("onEscapeKeyDown"))==null||s(r),o("closeOnEscape")||r.preventDefault()},onDismiss(){t({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:e,prop:t}){if(t("preventScroll"))return A(e.getDoc())},trapFocus({scope:e,prop:t}){return!t("trapFocus")||!t("modal")?void 0:Z(()=>g(e),{preventScroll:!0,returnFocusOnDeactivate:!!t("restoreFocus"),initialFocus:t("initialFocusEl"),setReturnFocus:n=>{var r;return((r=t("finalFocusEl"))==null?void 0:r())??n}})},hideContentBelow({scope:e,prop:t}){return t("modal")?H(()=>[g(e)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:e,scope:t}){y(()=>{e.set("rendered",{title:!!_(t),description:!!z(t)})})},syncZIndex({scope:e}){y(()=>{const t=g(e);if(!t)return;const o=S(t);[W(e),X(e)].forEach(r=>{r==null||r.style.setProperty("--z-index",o.zIndex)})})},invokeOnClose({prop:e}){var t;(t=e("onOpenChange"))==null||t({open:!1})},invokeOnOpen({prop:e}){var t;(t=e("onOpenChange"))==null||t({open:!0})},toggleVisibility({prop:e,send:t,event:o}){t({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:o})}}}});L()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);const re=e=>{const t=p.useId(),{getRootNode:o}=N(),{dir:n}=B(),r={id:t,getRootNode:o,dir:n,...e},s=w(oe,r);return te(s,x)},Oe=e=>{const[t,{children:o,...n}]=V(e),[r]=G(t),s=re(n),i=j(u({present:s.open},t));return c.jsx(J,{value:s,children:c.jsx(K,{value:r,children:c.jsx($,{value:i,children:o})})})},ne=p.forwardRef((e,t)=>{const o=f(),n=P(),r=u({...o.getTriggerProps(),"aria-controls":n.unmounted?void 0:o.getTriggerProps()["aria-controls"]},e);return c.jsx(E.button,{...r,ref:t})});ne.displayName="DialogTrigger";export{Oe as D,U as a,Q as b,ne as c,f as u};
