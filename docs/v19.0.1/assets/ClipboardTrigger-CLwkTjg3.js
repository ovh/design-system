import{j as i}from"./jsx-runtime-VM66peLj.js";import{c as b}from"./index-CkQHsVsO.js";import{r as l}from"./index-D_CmzhJ4.js";import{c as S,Q as m,R as C,T as A,W as c,K as x,H as q,ac as Y,ad as U,g as $,u as W,L as B,V as L,a as F}from"./use-locale-context-BQVaQ0H3.js";import{I as M,b as D}from"./Input-Pkw6XJuX.js";import{B as K,d as H,c as Q}from"./Button-CbWLwkmI.js";import{I as f,a as h}from"./icon-name-BOrBmUKT.js";import{b as Z,T as v,a as T}from"./TooltipTrigger-DmpQ7Q38.js";import{a as G}from"./overlay-CZHjGBMC.js";const[J,g]=S({name:"ClipboardContext",hookName:"useClipboardContext",providerName:"<ClipboardProvider />"}),N=l.forwardRef((e,t)=>{const o=g(),a=m(o.getControlProps(),e);return i.jsx(C.div,{...a,ref:t})});N.displayName="ClipboardControl";const I=l.forwardRef((e,t)=>{const{children:o,copied:a,...r}=e,s=g(),n=m(s.getIndicatorProps({copied:s.copied}),r);return i.jsx(C.div,{...n,ref:t,children:s.copied?a:o})});I.displayName="ClipboardIndicator";var X=A("clipboard").parts("root","control","trigger","indicator","input","label"),p=X.build(),z=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`clip:${e.id}`},_=e=>{var t;return((t=e.ids)==null?void 0:t.input)??`clip:${e.id}:input`},ee=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`clip:${e.id}:label`},te=e=>e.getById(_(e)),oe=(e,t)=>ie(e.getDoc(),t);function ae(e,t){const o=e.createElement("pre");return Object.assign(o.style,{width:"1px",height:"1px",position:"fixed",top:"5px"}),o.textContent=t,o}function re(e){const o=$(e).getSelection();if(o==null)return Promise.reject(new Error);o.removeAllRanges();const a=e.ownerDocument,r=a.createRange();return r.selectNodeContents(e),o.addRange(r),a.execCommand("copy"),o.removeAllRanges(),Promise.resolve()}function ie(e,t){var r;const o=e.defaultView||window;if(((r=o.navigator.clipboard)==null?void 0:r.writeText)!==void 0)return o.navigator.clipboard.writeText(t);if(!e.body)return Promise.reject(new Error);const a=ae(e,t);return e.body.appendChild(a),re(a),e.body.removeChild(a),Promise.resolve()}function se(e,t){const{state:o,send:a,context:r,scope:s}=e,n=o.matches("copied");return{copied:n,value:r.get("value"),setValue(d){a({type:"VALUE.SET",value:d})},copy(){a({type:"COPY"})},getRootProps(){return t.element({...p.root.attrs,"data-copied":c(n),id:z(s)})},getLabelProps(){return t.label({...p.label.attrs,htmlFor:_(s),"data-copied":c(n),id:ee(s)})},getControlProps(){return t.element({...p.control.attrs,"data-copied":c(n)})},getInputProps(){return t.input({...p.input.attrs,defaultValue:r.get("value"),"data-copied":c(n),readOnly:!0,"data-readonly":"true",id:_(s),onFocus(d){d.currentTarget.select()},onCopy(){a({type:"INPUT.COPY"})}})},getTriggerProps(){return t.button({...p.trigger.attrs,type:"button","aria-label":n?"Copied to clipboard":"Copy to clipboard","data-copied":c(n),onClick(){a({type:"COPY"})}})},getIndicatorProps(d){return t.element({...p.indicator.attrs,hidden:d.copied!==n})}}}var ne=q({props({props:e}){return{timeout:3e3,defaultValue:"",...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(o){var a;(a=e("onValueChange"))==null||a({value:o})}}))}},watch({track:e,context:t,action:o}){e([()=>t.get("value")],()=>{o(["syncInputElement"])})},on:{"VALUE.SET":{actions:["setValue"]},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]}},states:{idle:{on:{"INPUT.COPY":{target:"copied",actions:["invokeOnCopy"]}}},copied:{effects:["waitForTimeout"],on:{"COPY.DONE":{target:"idle"},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]},"INPUT.COPY":{actions:["invokeOnCopy"]}}}},implementations:{effects:{waitForTimeout({prop:e,send:t}){return U(()=>{t({type:"COPY.DONE"})},e("timeout"))}},actions:{setValue({context:e,event:t}){e.set("value",t.value)},copyToClipboard({context:e,scope:t}){oe(t,e.get("value"))},invokeOnCopy({prop:e}){var t;(t=e("onStatusChange"))==null||t({copied:!0})},syncInputElement({context:e,scope:t}){const o=te(t);o&&Y(o,e.get("value"))}}}});x()(["getRootNode","id","ids","value","defaultValue","timeout","onStatusChange","onValueChange"]);x()(["copied"]);const le=e=>{const t=l.useId(),{getRootNode:o}=W(),a={id:t,getRootNode:o,...e},r=B(ne,a);return se(r,L)},w=l.forwardRef((e,t)=>{const[o,a]=F()(e,["defaultValue","id","ids","onStatusChange","onValueChange","timeout","value"]),r=le(o),s=m(r.getRootProps(),a);return i.jsx(J,{value:r,children:i.jsx(C.div,{ref:t,...s})})});w.displayName="ClipboardRoot";const O=l.forwardRef((e,t)=>{const o=g(),a=m(o.getTriggerProps(),e);return i.jsx(C.button,{...a,ref:t})});O.displayName="ClipboardTrigger";const j=l.createContext({disabled:!1});function R(){return l.useContext(j)}const de="_clipboard_15kq6_2",P={clipboard:de,"clipboard--disabled":"_clipboard--disabled_15kq6_18"},E=l.forwardRef(({children:e,className:t,disabled:o,onCopy:a,value:r,...s},n)=>i.jsx(j.Provider,{value:{disabled:o},children:i.jsx(w,{className:b(P.clipboard,{[P["clipboard--disabled"]]:o},t),onStatusChange:a,ref:n,value:r,...s,children:e})}));E.displayName="Clipboard";E.__docgenInfo={description:"",methods:[],displayName:"Clipboard",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the component is disabled."},onCopy:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback fired when the input value is copied."},value:{required:!1,tsType:{name:"string"},description:"The input value."}},composes:["Omit"]};const pe="_clipboard__input_1v3pf_2",ce={clipboard__input:pe},V=l.forwardRef(({className:e,...t},o)=>{const{disabled:a}=R(),{value:r}=g();return i.jsx(N,{asChild:!0,children:i.jsx(M,{className:b(ce.clipboard__input,e),...t,disabled:a,readOnly:!0,ref:o,type:D.text,value:r})})});V.displayName="ClipboardControl";V.__docgenInfo={description:"",methods:[],displayName:"ClipboardControl",props:{loading:{required:!1,tsType:{name:"boolean"},description:"Whether the component is in loading state."},maskOption:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  enable: boolean,
  initialState?: InputMaskState,
}`,signature:{properties:[{key:"enable",value:{name:"boolean",required:!0}},{key:"initialState",value:{name:"literal",value:"`${INPUT_MASK_STATE}`",required:!1}}]}},description:"Whether the masked display is active and its initial state."}},composes:["ComponentPropsWithRef"]};const ue="_clipboard__copy_1d12a_2",be="_clipboard__tooltip_1d12a_8",u={clipboard__copy:ue,clipboard__tooltip:be,"clipboard__tooltip-success":"_clipboard__tooltip-success_1d12a_8","clipboard__tooltip-success__check":"_clipboard__tooltip-success__check_1d12a_19"},k=l.forwardRef(({className:e,children:t,labelCopy:o="Copy to clipboard",labelCopySuccess:a="Copied!",...r},s)=>{const{disabled:n}=R(),d=i.jsx(K,{disabled:n,size:Q.xs,variant:H.ghost,children:i.jsx(f,{name:h.fileCopy})}),y=t||d;return i.jsx(Z,{position:G.right,children:i.jsx(O,{asChild:!0,children:i.jsxs(I,{className:u.clipboard__copy,copied:i.jsxs(i.Fragment,{children:[i.jsx(v,{asChild:!0,ref:s,...r,children:y}),i.jsxs(T,{className:b(u["clipboard__tooltip-success"],e),children:[a,i.jsx(f,{className:u["clipboard__tooltip-success__check"],name:h.check})]})]}),children:[i.jsx(v,{asChild:!0,ref:s,...r,children:y}),!n&&i.jsx(T,{className:b(u.clipboard__tooltip,e),children:o})]})})})});k.displayName="ClipboardTrigger";k.__docgenInfo={description:"",methods:[],displayName:"ClipboardTrigger",props:{labelCopy:{required:!1,tsType:{name:"string"},description:"The initial tooltip label on copy button.",defaultValue:{value:"'Copy to clipboard'",computed:!1}},labelCopySuccess:{required:!1,tsType:{name:"string"},description:"The tooltip label on copy button after a successful copy.",defaultValue:{value:"'Copied!'",computed:!1}}},composes:["ComponentPropsWithRef"]};export{k as C,V as a,E as b};
