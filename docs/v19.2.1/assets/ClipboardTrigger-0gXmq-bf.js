import{j as i}from"./jsx-runtime-Cfl8ynUo.js";import{c as C}from"./index-CqY9YpN0.js";import{r as d}from"./index-jIWwRBLr.js";import{c as E,T as _,U as y,Q as S,P as c,C as v,z as V,a5 as U,a6 as q,g as A,u as B,D as Y,S as $,a as L}from"./use-locale-context-BIV2aQtl.js";import{I as W,b as D}from"./Input-DA3rR-6T.js";import{B as F,d as M,c as H}from"./Button-Tqe-VRSF.js";import{I as f,a as h}from"./icon-name-C581wThh.js";import{b as K,T as Q,a as Z}from"./TooltipTrigger-CT3e8Irz.js";import{a as G}from"./overlay-CZHjGBMC.js";const[J,m]=E({name:"ClipboardContext",hookName:"useClipboardContext",providerName:"<ClipboardProvider />"}),P=d.forwardRef((e,t)=>{const o=m(),r=_(o.getControlProps(),e);return i.jsx(y.div,{...r,ref:t})});P.displayName="ClipboardControl";var X=S("clipboard").parts("root","control","trigger","indicator","input","label"),p=X.build(),z=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`clip:${e.id}`},b=e=>{var t;return((t=e.ids)==null?void 0:t.input)??`clip:${e.id}:input`},ee=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`clip:${e.id}:label`},te=e=>e.getById(b(e)),oe=(e,t)=>ie(e.getDoc(),t);function re(e,t){const o=e.createElement("pre");return Object.assign(o.style,{width:"1px",height:"1px",position:"fixed",top:"5px"}),o.textContent=t,o}function ae(e){const o=A(e).getSelection();if(o==null)return Promise.reject(new Error);o.removeAllRanges();const r=e.ownerDocument,a=r.createRange();return a.selectNodeContents(e),o.addRange(a),r.execCommand("copy"),o.removeAllRanges(),Promise.resolve()}function ie(e,t){var a;const o=e.defaultView||window;if(((a=o.navigator.clipboard)==null?void 0:a.writeText)!==void 0)return o.navigator.clipboard.writeText(t);if(!e.body)return Promise.reject(new Error);const r=re(e,t);return e.body.appendChild(r),ae(r),e.body.removeChild(r),Promise.resolve()}function ne(e,t){const{state:o,send:r,context:a,scope:l}=e,n=o.matches("copied");return{copied:n,value:a.get("value"),setValue(s){r({type:"VALUE.SET",value:s})},copy(){r({type:"COPY"})},getRootProps(){return t.element({...p.root.attrs,"data-copied":c(n),id:z(l)})},getLabelProps(){return t.label({...p.label.attrs,htmlFor:b(l),"data-copied":c(n),id:ee(l)})},getControlProps(){return t.element({...p.control.attrs,"data-copied":c(n)})},getInputProps(){return t.input({...p.input.attrs,defaultValue:a.get("value"),"data-copied":c(n),readOnly:!0,"data-readonly":"true",id:b(l),onFocus(s){s.currentTarget.select()},onCopy(){r({type:"INPUT.COPY"})}})},getTriggerProps(){return t.button({...p.trigger.attrs,type:"button","aria-label":n?"Copied to clipboard":"Copy to clipboard","data-copied":c(n),onClick(){r({type:"COPY"})}})},getIndicatorProps(s){return t.element({...p.indicator.attrs,hidden:s.copied!==n})}}}var se=V({props({props:e}){return{timeout:3e3,defaultValue:"",...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(o){var r;(r=e("onValueChange"))==null||r({value:o})}}))}},watch({track:e,context:t,action:o}){e([()=>t.get("value")],()=>{o(["syncInputElement"])})},on:{"VALUE.SET":{actions:["setValue"]},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]}},states:{idle:{on:{"INPUT.COPY":{target:"copied",actions:["invokeOnCopy"]}}},copied:{effects:["waitForTimeout"],on:{"COPY.DONE":{target:"idle"},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]},"INPUT.COPY":{actions:["invokeOnCopy"]}}}},implementations:{effects:{waitForTimeout({prop:e,send:t}){return q(()=>{t({type:"COPY.DONE"})},e("timeout"))}},actions:{setValue({context:e,event:t}){e.set("value",t.value)},copyToClipboard({context:e,scope:t}){oe(t,e.get("value"))},invokeOnCopy({prop:e}){var t;(t=e("onStatusChange"))==null||t({copied:!0})},syncInputElement({context:e,scope:t}){const o=te(t);o&&U(o,e.get("value"))}}}});v()(["getRootNode","id","ids","value","defaultValue","timeout","onStatusChange","onValueChange"]);v()(["copied"]);const le=e=>{const t=d.useId(),{getRootNode:o}=B(),r={id:t,getRootNode:o,...e},a=Y(se,r);return ne(a,$)},N=d.forwardRef((e,t)=>{const[o,r]=L()(e,["defaultValue","id","ids","onStatusChange","onValueChange","timeout","value"]),a=le(o),l=_(a.getRootProps(),r);return i.jsx(J,{value:a,children:i.jsx(y.div,{ref:t,...l})})});N.displayName="ClipboardRoot";const I=d.forwardRef((e,t)=>{const o=m(),r=_(o.getTriggerProps(),e);return i.jsx(y.button,{...r,ref:t})});I.displayName="ClipboardTrigger";const x=d.createContext({});function w({children:e,disabled:t,i18n:o,locale:r}){return i.jsx(x.Provider,{value:{disabled:t,i18n:o,locale:r},children:e})}function k(){return d.useContext(x)}w.__docgenInfo={description:"",methods:[],displayName:"ClipboardProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}},composes:["ClipboardContextType"]};const de="_clipboard_15kq6_2",T={clipboard:de,"clipboard--disabled":"_clipboard--disabled_15kq6_18"},O=d.forwardRef(({children:e,className:t,disabled:o,i18n:r,locale:a,onCopy:l,value:n,...s},g)=>i.jsx(w,{disabled:o,i18n:r,locale:a,children:i.jsx(N,{className:C(T.clipboard,{[T["clipboard--disabled"]]:o},t),"data-ods":"clipboard",onStatusChange:l,ref:g,role:"group",value:n,...s,children:e})}));O.displayName="Clipboard";O.__docgenInfo={description:"",methods:[],displayName:"Clipboard",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the component is disabled."},i18n:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:"INPUT_I18N.maskButtonHide | INPUT_I18N.maskButtonShow",elements:[{name:"INPUT_I18N.maskButtonHide"},{name:"INPUT_I18N.maskButtonShow"}]},{name:"string"}],raw:"Record<INPUT_I18N.maskButtonHide | INPUT_I18N.maskButtonShow, string>"}],raw:"Partial<Record<INPUT_I18N.maskButtonHide | INPUT_I18N.maskButtonShow, string>>"},description:"Internal translations override (see Input i18n keys)."},locale:{required:!1,tsType:{name:"literal",value:"`${LOCALE}`"},description:"The locale used for the translation of the internal elements."},onCopy:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback fired when the input value is copied."},value:{required:!1,tsType:{name:"string"},description:"The input value."}},composes:["Omit"]};const pe="_clipboard__input_pn8ud_2",ce={clipboard__input:pe},R=d.forwardRef(({className:e,loading:t,maskOption:o,...r},a)=>{const{disabled:l,i18n:n,locale:s}=k(),{value:g}=m();return i.jsx(P,{asChild:!0,children:i.jsx(W,{className:C(ce.clipboard__input,e),"data-ods":"clipboard-control",i18n:n,loading:t,locale:s,maskOption:o,...r,disabled:l,readOnly:!0,ref:a,type:D.text,value:g})})});R.displayName="ClipboardControl";R.__docgenInfo={description:"",methods:[],displayName:"ClipboardControl",props:{loading:{required:!1,tsType:{name:"boolean"},description:"Whether the component is in loading state."},maskOption:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  enable: boolean,
  initialState?: InputMaskState,
}`,signature:{properties:[{key:"enable",value:{name:"boolean",required:!0}},{key:"initialState",value:{name:"literal",value:"`${INPUT_MASK_STATE}`",required:!1}}]}},description:"Whether the masked display is active and its initial state."}},composes:["ComponentPropsWithRef"]};const u={"clipboard-trigger__copy":"_clipboard-trigger__copy_4b6mw_2","clipboard-trigger__tooltip":"_clipboard-trigger__tooltip_4b6mw_5","clipboard-trigger__tooltip--success":"_clipboard-trigger__tooltip--success_4b6mw_10","clipboard-trigger__tooltip__check":"_clipboard-trigger__tooltip__check_4b6mw_16"},j=d.forwardRef(({children:e,className:t,labelCopy:o="Copy to clipboard",labelCopySuccess:r="Copied!",...a},l)=>{const{disabled:n}=k(),{copied:s}=m();return i.jsxs(K,{position:G.right,children:[i.jsx(I,{asChild:!0,children:i.jsx(Q,{"aria-label":s?r:o,asChild:!0,className:u["clipboard-trigger__copy"],"data-ods":"clipboard-trigger",ref:l,...a,children:e||i.jsx(F,{disabled:n,size:H.xs,variant:M.ghost,children:i.jsx(f,{name:h.fileCopy})})})}),!n&&i.jsx(Z,{children:i.jsx("div",{"aria-hidden":"true",className:C(u["clipboard-trigger__tooltip"],{[u["clipboard-trigger__tooltip--success"]]:s},t),children:s?i.jsxs(i.Fragment,{children:[r,i.jsx(f,{className:u["clipboard-trigger__tooltip__check"],name:h.check})]}):o})})]})});j.displayName="ClipboardTrigger";j.__docgenInfo={description:"",methods:[],displayName:"ClipboardTrigger",props:{labelCopy:{required:!1,tsType:{name:"string"},description:"The initial tooltip label on copy button.",defaultValue:{value:"'Copy to clipboard'",computed:!1}},labelCopySuccess:{required:!1,tsType:{name:"string"},description:"The tooltip label on copy button after a successful copy.",defaultValue:{value:"'Copied!'",computed:!1}}},composes:["ComponentPropsWithRef"]};export{j as C,R as a,O as b};
