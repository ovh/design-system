import{j as a}from"./jsx-runtime-Cfl8ynUo.js";import{m as g}from"./index-2w0W-O47-BJ19ihbZ.js";import{r as n}from"./index-jIWwRBLr.js";import{x as P,t as w,s as O}from"./useI18n-C3-XAdTV-DeysXkv9.js";import{X as $,h as Y,s as z,I as F,M as L,L as U,y,j as x,O as A,V as D,x as X,a as u,T,g as B,b as M,z as G,u as H,v as J}from"./TooltipTrigger-Iu3rt7LP-DQH4Rvrv.js";import{p as K,r as Q}from"./Input-DcqcPYne-DsDnfvYN.js";import{t as C,l as f}from"./ods-react60-CRx7zEey.js";const[W,b]=$({name:"ClipboardContext",hookName:"useClipboardContext",providerName:"<ClipboardProvider />"}),V=n.forwardRef((e,o)=>{const t=b(),r=y(t.getControlProps(),e);return a.jsx(x.div,{...r,ref:o})});V.displayName="ClipboardControl";var Z=X("clipboard").parts("root","control","trigger","indicator","input","label"),c=Z.build(),ee=e=>{var o;return((o=e.ids)==null?void 0:o.root)??`clip:${e.id}`},v=e=>{var o;return((o=e.ids)==null?void 0:o.input)??`clip:${e.id}:input`},oe=e=>{var o;return((o=e.ids)==null?void 0:o.label)??`clip:${e.id}:label`},te=e=>e.getById(v(e)),re=(e,o)=>le(e.getDoc(),o);function ae(e,o){const t=e.createElement("pre");return Object.assign(t.style,{width:"1px",height:"1px",position:"fixed",top:"5px"}),t.textContent=o,t}function ie(e){const o=J(e).getSelection();if(o==null)return Promise.reject(new Error);o.removeAllRanges();const t=e.ownerDocument,r=t.createRange();return r.selectNodeContents(e),o.addRange(r),t.execCommand("copy"),o.removeAllRanges(),Promise.resolve()}function le(e,o){var t;const r=e.defaultView||window;if(((t=r.navigator.clipboard)==null?void 0:t.writeText)!==void 0)return r.navigator.clipboard.writeText(o);if(!e.body)return Promise.reject(new Error);const i=ae(e,o);return e.body.appendChild(i),ie(i),e.body.removeChild(i),Promise.resolve()}function de(e,o){const{state:t,send:r,context:i,scope:s}=e,l=t.matches("copied");return{copied:l,value:i.get("value"),setValue(d){r({type:"VALUE.SET",value:d})},copy(){r({type:"COPY"})},getRootProps(){return o.element({...c.root.attrs,"data-copied":u(l),id:ee(s)})},getLabelProps(){return o.label({...c.label.attrs,htmlFor:v(s),"data-copied":u(l),id:oe(s)})},getControlProps(){return o.element({...c.control.attrs,"data-copied":u(l)})},getInputProps(){return o.input({...c.input.attrs,defaultValue:i.get("value"),"data-copied":u(l),readOnly:!0,"data-readonly":"true",id:v(s),onFocus(d){d.currentTarget.select()},onCopy(){r({type:"INPUT.COPY"})}})},getTriggerProps(){return o.button({...c.trigger.attrs,type:"button","aria-label":l?"Copied to clipboard":"Copy to clipboard","data-copied":u(l),onClick(){r({type:"COPY"})}})},getIndicatorProps(d){return o.element({...c.indicator.attrs,hidden:d.copied!==l})}}}var se=B({props({props:e}){return{timeout:3e3,defaultValue:"",...e}},initialState(){return"idle"},context({prop:e,bindable:o}){return{value:o(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(t){var r;(r=e("onValueChange"))==null||r({value:t})}}))}},watch({track:e,context:o,action:t}){e([()=>o.get("value")],()=>{t(["syncInputElement"])})},on:{"VALUE.SET":{actions:["setValue"]},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]}},states:{idle:{on:{"INPUT.COPY":{target:"copied",actions:["invokeOnCopy"]}}},copied:{effects:["waitForTimeout"],on:{"COPY.DONE":{target:"idle"},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]},"INPUT.COPY":{actions:["invokeOnCopy"]}}}},implementations:{effects:{waitForTimeout({prop:e,send:o}){return H(()=>{o({type:"COPY.DONE"})},e("timeout"))}},actions:{setValue({context:e,event:o}){e.set("value",o.value)},copyToClipboard({context:e,scope:o}){re(o,e.get("value"))},invokeOnCopy({prop:e}){var o;(o=e("onStatusChange"))==null||o({copied:!0})},syncInputElement({context:e,scope:o}){const t=te(o);t&&G(t,e.get("value"))}}}});T()(["getRootNode","id","ids","value","defaultValue","timeout","onStatusChange","onValueChange"]);T()(["copied"]);const ne=e=>{const o=n.useId(),{getRootNode:t}=A(),r={id:o,getRootNode:t,...e},i=D(se,r);return de(i,M)},I=n.forwardRef((e,o)=>{const[t,r]=U()(e,["defaultValue","id","ids","onStatusChange","onValueChange","timeout","value"]),i=ne(t),s=y(i.getRootProps(),r);return a.jsx(W,{value:i,children:a.jsx(x.div,{ref:o,...s})})});I.displayName="ClipboardRoot";const R=n.forwardRef((e,o)=>{const t=b(),r=y(t.getTriggerProps(),e);return a.jsx(x.button,{...r,ref:o})});R.displayName="ClipboardTrigger";const k=n.createContext({});function ce({children:e,disabled:o,i18n:t,locale:r}){return a.jsx(k.Provider,{value:{disabled:o,i18n:t,locale:r},children:e})}function E(){return n.useContext(k)}const pe="_clipboard_15kq6_2",j={clipboard:pe,"clipboard--disabled":"_clipboard--disabled_15kq6_18"},h=n.forwardRef(({children:e,className:o,disabled:t,i18n:r,locale:i,onCopy:s,value:l,...d},m)=>a.jsx(ce,{disabled:t,i18n:r,locale:i,children:a.jsx(I,{className:g(j.clipboard,{[j["clipboard--disabled"]]:t},o),"data-ods":"clipboard",onStatusChange:s,ref:m,role:"group",value:l,...d,children:e})}));h.displayName="Clipboard";const ue="_clipboard__input_pn8ud_2",_e={clipboard__input:ue},S=n.forwardRef(({className:e,loading:o,maskOption:t,...r},i)=>{const{disabled:s,i18n:l,locale:d}=E(),{value:m}=b();return a.jsx(V,{asChild:!0,children:a.jsx(K,{className:g(_e.clipboard__input,e),"data-ods":"clipboard-control",i18n:l,loading:o,locale:d,maskOption:t,...r,disabled:s,readOnly:!0,ref:i,type:Q.text,value:m})})});S.displayName="ClipboardControl";const _={"clipboard-trigger__copy":"_clipboard-trigger__copy_4b6mw_2","clipboard-trigger__tooltip":"_clipboard-trigger__tooltip_4b6mw_5","clipboard-trigger__tooltip--success":"_clipboard-trigger__tooltip--success_4b6mw_10","clipboard-trigger__tooltip__check":"_clipboard-trigger__tooltip__check_4b6mw_16"},N=n.forwardRef(({children:e,className:o,labelCopy:t="Copy to clipboard",labelCopySuccess:r="Copied!",...i},s)=>{const{disabled:l}=E(),{copied:d}=b();return a.jsxs(Y,{position:z.right,children:[a.jsx(R,{asChild:!0,children:a.jsx(F,{"aria-label":d?r:t,asChild:!0,className:_["clipboard-trigger__copy"],"data-ods":"clipboard-trigger",ref:s,...i,children:e||a.jsx(P,{disabled:l,size:O.xs,variant:w.ghost,children:a.jsx(C,{name:f.fileCopy})})})}),!l&&a.jsx(L,{children:a.jsx("div",{"aria-hidden":"true",className:g(_["clipboard-trigger__tooltip"],{[_["clipboard-trigger__tooltip--success"]]:d},o),children:d?a.jsxs(a.Fragment,{children:[r,a.jsx(C,{className:_["clipboard-trigger__tooltip__check"],name:f.check})]}):t})})]})});N.displayName="ClipboardTrigger";h.__docgenInfo={description:"",methods:[],displayName:"Clipboard"};S.__docgenInfo={description:"",methods:[],displayName:"ClipboardControl"};N.__docgenInfo={description:"",methods:[],displayName:"ClipboardTrigger",props:{labelCopy:{defaultValue:{value:'"Copy to clipboard"',computed:!1},required:!1},labelCopySuccess:{defaultValue:{value:'"Copied!"',computed:!1},required:!1}}};const ge="_code_x2sq0_2",be="_code__preformat_x2sq0_14",me="_code__preformat__code_x2sq0_20",Ce="_code__clipboard_x2sq0_23",fe="_code__clipboard__trigger__button_x2sq0_27",p={code:ge,code__preformat:be,code__preformat__code:me,code__clipboard:Ce,code__clipboard__trigger__button:fe},q=n.forwardRef(({canCopy:e=!1,className:o,children:t,labelCopy:r,labelCopySuccess:i,onCopy:s,...l},d)=>a.jsxs("div",{className:g(p.code,o),"data-ods":"code",ref:d,role:e?"group":"",...l,children:[a.jsx("pre",{className:p.code__preformat,children:a.jsx("code",{className:p.code__preformat__code,children:t})}),e&&a.jsx(h,{className:p.code__clipboard,onCopy:s,value:t==null?void 0:t.toString(),children:a.jsx(N,{className:p.code__clipboard__trigger,labelCopy:r,labelCopySuccess:i,children:a.jsx(P,{className:p.code__clipboard__trigger__button,size:O.sm,variant:w.ghost,children:a.jsx(C,{name:f.fileCopy})})})})]}));q.displayName="Code";q.__docgenInfo={description:"",methods:[],displayName:"Code",props:{canCopy:{defaultValue:{value:"!1",computed:!1},required:!1}}};export{N as C,S as b,h as u,q as v};
