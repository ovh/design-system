import{L as k,X as E,y as R,j as z,q as w,O as P,V as j,g as L,I as h,x as V,c as $,D as C,C as y,n as B,B as b,r as D,T as A}from"./TooltipTrigger-CizyLvLy-D53hI2Ct.js";import{j as O}from"./jsx-runtime-Cfl8ynUo.js";import{r as v}from"./index-jIWwRBLr.js";const[X,Y]=E({name:"RenderStrategyContext",hookName:"useRenderStrategyContext",providerName:"<RenderStrategyPropsProvider />"}),Z=e=>k()(e,["lazyMount","unmountOnExit"]),M=e=>k()(e,["defaultOpen","disabled","id","ids","lazyMount","onExitComplete","onOpenChange","open","unmountOnExit"]);var _=V("collapsible").parts("root","trigger","content","indicator"),m=_.build(),q=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`collapsible:${e.id}`},x=e=>{var t;return((t=e.ids)==null?void 0:t.content)??`collapsible:${e.id}:content`},T=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`collapsible:${e.id}:trigger`},g=e=>e.getById(x(e));function U(e,t){const{state:n,send:a,context:i,scope:o,prop:l}=e,s=n.matches("open")||n.matches("closing"),r=n.matches("open"),{width:c,height:d}=i.get("size"),p=!!l("disabled"),S=!i.get("initial")&&r,f="ltr";return{disabled:p,visible:s,open:r,measureSize(){a({type:"size.measure"})},setOpen(u){n.matches("open")!==u&&a({type:u?"open":"close"})},getRootProps(){return t.element({...m.root.attrs,"data-state":r?"open":"closed",dir:f,id:q(o)})},getContentProps(){return t.element({...m.content.attrs,"data-collapsible":"","data-state":S?void 0:r?"open":"closed",id:x(o),"data-disabled":h(p),hidden:!s,style:{"--height":d!=null?`${d}px`:void 0,"--width":c!=null?`${c}px`:void 0}})},getTriggerProps(){return t.element({...m.trigger.attrs,id:T(o),dir:f,type:"button","data-state":r?"open":"closed","data-disabled":h(p),"aria-controls":x(o),"aria-expanded":s||!1,onClick(u){u.defaultPrevented||p||a({type:r?"close":"open"})}})},getIndicatorProps(){return t.element({...m.indicator.attrs,dir:f,"data-state":r?"open":"closed","data-disabled":h(p)})}}}var F=L({initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{size:e(()=>({defaultValue:{height:0,width:0},sync:!0})),initial:e(()=>({defaultValue:!1}))}},refs(){return{cleanup:void 0,stylesRef:void 0}},watch({track:e,prop:t,action:n}){e([()=>t("open")],()=>{n(["setInitial","computeSize","toggleVisibility"])})},exit:["clearInitial","cleanupNode"],states:{closed:{on:{"controlled.open":{target:"open"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitial","computeSize","invokeOnOpen"]}]}},closing:{effects:["trackExitAnimation"],on:{"controlled.close":{target:"closed"},"controlled.open":{target:"open"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitial","invokeOnOpen"]}],close:[{guard:"isOpenControlled",actions:["invokeOnExitComplete"]},{target:"closed",actions:["setInitial","computeSize","invokeOnExitComplete"]}],"animation.end":{target:"closed",actions:["invokeOnExitComplete","clearInitial"]}}},open:{effects:["trackEnterAnimation"],on:{"controlled.close":{target:"closing"},close:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closing",actions:["setInitial","computeSize","invokeOnClose"]}],"size.measure":{actions:["measureSize"]},"animation.end":{actions:["clearInitial"]}}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackEnterAnimation:({send:e,scope:t})=>{let n;const a=C(()=>{const i=g(t);if(!i)return;const o=y(i).animationName;if(!o||o==="none"){e({type:"animation.end"});return}const l=s=>{b(s)===i&&e({type:"animation.end"})};i.addEventListener("animationend",l),n=()=>{i.removeEventListener("animationend",l)}});return()=>{a(),n==null||n()}},trackExitAnimation:({send:e,scope:t})=>{let n;const a=C(()=>{const i=g(t);if(!i)return;const o=y(i).animationName;if(!o||o==="none"){e({type:"animation.end"});return}const l=r=>{b(r)===i&&e({type:"animation.end"})};i.addEventListener("animationend",l);const s=B(i,{animationFillMode:"forwards"});n=()=>{i.removeEventListener("animationend",l),D(()=>s())}});return()=>{a(),n==null||n()}}},actions:{setInitial:({context:e,flush:t})=>{t(()=>{e.set("initial",!0)})},clearInitial:({context:e})=>{e.set("initial",!1)},cleanupNode:({refs:e})=>{e.set("stylesRef",null)},measureSize:({context:e,scope:t})=>{const n=g(t);if(!n)return;const{height:a,width:i}=n.getBoundingClientRect();e.set("size",{height:a,width:i})},computeSize:({refs:e,scope:t,context:n})=>{var a;(a=e.get("cleanup"))==null||a();const i=C(()=>{const o=g(t);if(!o)return;const l=o.hidden;o.style.animationName="none",o.style.animationDuration="0s",o.hidden=!1;const s=o.getBoundingClientRect();n.set("size",{height:s.height,width:s.width}),n.get("initial")&&(o.style.animationName="",o.style.animationDuration=""),o.hidden=l});e.set("cleanup",i)},invokeOnOpen:({prop:e})=>{var t;(t=e("onOpenChange"))==null||t({open:!0})},invokeOnClose:({prop:e})=>{var t;(t=e("onOpenChange"))==null||t({open:!1})},invokeOnExitComplete:({prop:e})=>{var t;(t=e("onExitComplete"))==null||t()},toggleVisibility:({prop:e,send:t})=>{t({type:e("open")?"controlled.open":"controlled.close"})}}}});A()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","defaultOpen","open"]);const G=(e={})=>{const{lazyMount:t,unmountOnExit:n,...a}=e,i=v.useId(),o=v.useRef(!1),{dir:l}=w(),{getRootNode:s}=P(),r={id:i,dir:l,getRootNode:s,...a},c=j(F,r),d=U(c,$);d.visible&&(o.current=!0);const p=!d.visible&&!o.current&&t||n&&!d.visible&&o.current;return{...d,isUnmounted:p}},[H,J]=E({name:"CollapsibleContext",hookName:"useCollapsibleContext",providerName:"<CollapsibleProvider />"}),I=v.forwardRef((e,t)=>{const[n,a]=M(e),i=G(n),o=R(i.getRootProps(),a);return O.jsx(H,{value:i,children:O.jsx(z.div,{...o,ref:t})})});I.displayName="CollapsibleRoot";const N=v.forwardRef((e,t)=>{const n=J();if(n.isUnmounted)return null;const a=R(n.getContentProps(),e);return O.jsx(z.div,{...a,ref:t})});N.displayName="CollapsibleContent";I.__docgenInfo={description:"",methods:[],displayName:"CollapsibleRoot"};N.__docgenInfo={description:"",methods:[],displayName:"CollapsibleContent"};export{J as K,I as Q,N as W,X as a,Y as n,Z as s};
