import{j as F}from"./jsx-runtime-Cfl8ynUo.js";import{r as v}from"./index-jIWwRBLr.js";import{c as V,a as y,P as L,Q as R,R as f,S as x,s as C,d as m,T as _,U as A,z as N,V as W,r as T,W as D,X as M,Y as j,Z as K,_ as $,$ as z,a0 as H,f as X,C as w,a1 as q,u as Q,a2 as Y,D as Z,a3 as J}from"./use-locale-context-Da8UBLVe.js";const[ee,te]=V({name:"ToggleGroupContext",hookName:"useToggleGroupContext",providerName:"<ToggleGroupProvider />"}),oe=v.forwardRef((e,t)=>{const[s,o]=y()(e,["value","disabled"]),a=te(),u=L(a.getItemProps(s),o);return F.jsx(R.button,{...u,ref:t})});oe.displayName="ToggleGroupItem";var se=x("toggle-group").parts("root","item"),E=se.build(),p=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`toggle-group:${e.id}`},ae=(e,t)=>{var s,o;return((o=(s=e.ids)==null?void 0:s.item)==null?void 0:o.call(s,t))??`toggle-group:${e.id}:${t}`},P=e=>e.getById(p(e)),b=e=>{const s=`[data-ownedby='${CSS.escape(p(e))}']:not([data-disabled])`;return q(P(e),s)},S=e=>M(b(e)),re=e=>D(b(e)),ie=(e,t,s)=>K(b(e),t,s),ue=(e,t,s)=>j(b(e),t,s);function le(e,t){const{context:s,send:o,prop:a,scope:u}=e,O=s.get("value"),c=a("disabled"),d=!a("multiple"),n=a("rovingFocus"),g=a("orientation")==="horizontal";function G(i){const r=ae(u,i.value);return{id:r,disabled:!!(i.disabled||c),pressed:!!O.includes(i.value),focused:s.get("focusedId")===r}}return{value:O,setValue(i){o({type:"VALUE.SET",value:i})},getRootProps(){return t.element({...E.root.attrs,id:p(u),dir:a("dir"),role:d?"radiogroup":"group",tabIndex:s.get("isTabbingBackward")?-1:0,"data-disabled":f(c),"data-orientation":a("orientation"),"data-focus":f(s.get("focusedId")!=null),style:{outline:"none"},onMouseDown(){c||o({type:"ROOT.MOUSE_DOWN"})},onFocus(i){c||i.currentTarget===m(i)&&(s.get("isClickFocus")||s.get("isTabbingBackward")||o({type:"ROOT.FOCUS"}))},onBlur(i){const r=i.relatedTarget;C(i.currentTarget,r)||c||o({type:"ROOT.BLUR"})}})},getItemState:G,getItemProps(i){const r=G(i),h=r.focused?0:-1;return t.button({...E.item.attrs,id:r.id,type:"button","data-ownedby":p(u),"data-focus":f(r.focused),disabled:r.disabled,tabIndex:n?h:void 0,role:d?"radio":void 0,"aria-checked":d?r.pressed:void 0,"aria-pressed":d?void 0:r.pressed,"data-disabled":f(r.disabled),"data-orientation":a("orientation"),dir:a("dir"),"data-state":r.pressed?"on":"off",onFocus(){r.disabled||o({type:"TOGGLE.FOCUS",id:r.id})},onClick(l){r.disabled||(o({type:"TOGGLE.CLICK",id:r.id,value:i.value}),A()&&l.currentTarget.focus({preventScroll:!0}))},onKeyDown(l){if(l.defaultPrevented||!C(l.currentTarget,m(l))||r.disabled)return;const I={Tab(U){const B=U.shiftKey;o({type:"TOGGLE.SHIFT_TAB",isShiftTab:B})},ArrowLeft(){!n||!g||o({type:"TOGGLE.FOCUS_PREV"})},ArrowRight(){!n||!g||o({type:"TOGGLE.FOCUS_NEXT"})},ArrowUp(){!n||g||o({type:"TOGGLE.FOCUS_PREV"})},ArrowDown(){!n||g||o({type:"TOGGLE.FOCUS_NEXT"})},Home(){n&&o({type:"TOGGLE.FOCUS_FIRST"})},End(){n&&o({type:"TOGGLE.FOCUS_LAST"})}}[_(l)];I&&(I(l),l.key!=="Tab"&&l.preventDefault())}})}}}var{not:k,and:ne}=W(),ce=N({props({props:e}){return{defaultValue:[],orientation:"horizontal",rovingFocus:!0,loopFocus:!0,deselectable:!0,...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(s){var o;(o=e("onValueChange"))==null||o({value:s})}})),focusedId:t(()=>({defaultValue:null})),isTabbingBackward:t(()=>({defaultValue:!1})),isClickFocus:t(()=>({defaultValue:!1})),isWithinToolbar:t(()=>({defaultValue:!1}))}},computed:{currentLoopFocus:({context:e,prop:t})=>t("loopFocus")&&!e.get("isWithinToolbar")},entry:["checkIfWithinToolbar"],on:{"VALUE.SET":{actions:["setValue"]},"TOGGLE.CLICK":{actions:["setValue"]},"ROOT.MOUSE_DOWN":{actions:["setClickFocus"]}},states:{idle:{on:{"ROOT.FOCUS":{target:"focused",guard:k(ne("isClickFocus","isTabbingBackward")),actions:["focusFirstToggle","clearClickFocus"]},"TOGGLE.FOCUS":{target:"focused",actions:["setFocusedId"]}}},focused:{on:{"ROOT.BLUR":{target:"idle",actions:["clearIsTabbingBackward","clearFocusedId","clearClickFocus"]},"TOGGLE.FOCUS":{actions:["setFocusedId"]},"TOGGLE.FOCUS_NEXT":{actions:["focusNextToggle"]},"TOGGLE.FOCUS_PREV":{actions:["focusPrevToggle"]},"TOGGLE.FOCUS_FIRST":{actions:["focusFirstToggle"]},"TOGGLE.FOCUS_LAST":{actions:["focusLastToggle"]},"TOGGLE.SHIFT_TAB":[{guard:k("isFirstToggleFocused"),target:"idle",actions:["setIsTabbingBackward"]},{actions:["setIsTabbingBackward"]}]}}},implementations:{guards:{isClickFocus:({context:e})=>e.get("isClickFocus"),isTabbingBackward:({context:e})=>e.get("isTabbingBackward"),isFirstToggleFocused:({context:e,scope:t})=>{var s;return e.get("focusedId")===((s=S(t))==null?void 0:s.id)}},actions:{setIsTabbingBackward({context:e}){e.set("isTabbingBackward",!0)},clearIsTabbingBackward({context:e}){e.set("isTabbingBackward",!1)},setClickFocus({context:e}){e.set("isClickFocus",!0)},clearClickFocus({context:e}){e.set("isClickFocus",!1)},checkIfWithinToolbar({context:e,scope:t}){var o;const s=(o=P(t))==null?void 0:o.closest("[role=toolbar]");e.set("isWithinToolbar",!!s)},setFocusedId({context:e,event:t}){e.set("focusedId",t.id)},clearFocusedId({context:e}){e.set("focusedId",null)},setValue({context:e,event:t,prop:s}){$(t,["value"]);let o=e.get("value");z(t.value)?o=t.value:s("multiple")?o=H(o,t.value):o=X(o,[t.value])&&s("deselectable")?[]:[t.value],e.set("value",o)},focusNextToggle({context:e,scope:t,prop:s}){T(()=>{var a;const o=e.get("focusedId");o&&((a=ie(t,o,s("loopFocus")))==null||a.focus({preventScroll:!0}))})},focusPrevToggle({context:e,scope:t,prop:s}){T(()=>{var a;const o=e.get("focusedId");o&&((a=ue(t,o,s("loopFocus")))==null||a.focus({preventScroll:!0}))})},focusFirstToggle({scope:e}){T(()=>{var t;(t=S(e))==null||t.focus({preventScroll:!0})})},focusLastToggle({scope:e}){T(()=>{var t;(t=re(e))==null||t.focus({preventScroll:!0})})}}}});w()(["dir","disabled","getRootNode","id","ids","loopFocus","multiple","onValueChange","orientation","rovingFocus","value","defaultValue","deselectable"]);w()(["value","disabled"]);const de=e=>{const t=v.useId(),{getRootNode:s}=Q(),{dir:o}=Y(),a={id:t,dir:o,getRootNode:s,...e},u=Z(ce,a);return le(u,J)},ge=v.forwardRef((e,t)=>{const[s,o]=y()(e,["defaultValue","deselectable","disabled","id","ids","loopFocus","multiple","onValueChange","orientation","rovingFocus","value"]),a=de(s),u=L(a.getRootProps(),o);return F.jsx(ee,{value:a,children:F.jsx(R.div,{...u,ref:t})})});ge.displayName="ToggleGroupRoot";export{ge as T,oe as a,te as u};
