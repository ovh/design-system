import{j as i}from"./jsx-runtime-Cfl8ynUo.js";import{c as C}from"./index-CqY9YpN0.js";import{r as d}from"./index-jIWwRBLr.js";import{c as E,L as _,M as y,O as S,N as c,B as T,y as V,a5 as U,a6 as B,g as A,_ as q,C as Y,a0 as $,a as L}from"./use-locale-context-kHyebpMI.js";import{I as M,b as W}from"./Input-BllcUVFN.js";import{B as F,d as D,c as H}from"./Button-B-GJ-1TA.js";import{I as f,a as h}from"./icon-name-BpdEc4-2.js";import{b as K,T as Z,a as G}from"./TooltipTrigger-CRWH95NO.js";import{a as J}from"./overlay-CZHjGBMC.js";import{u as Q}from"./context-C_-r2uoG.js";const[X,m]=E({name:"ClipboardContext",hookName:"useClipboardContext",providerName:"<ClipboardProvider />"}),P=d.forwardRef((e,t)=>{const o=m(),r=_(o.getControlProps(),e);return i.jsx(y.div,{...r,ref:t})});P.displayName="ClipboardControl";var z=S("clipboard").parts("root","control","trigger","indicator","input","label"),p=z.build(),ee=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`clip:${e.id}`},b=e=>{var t;return((t=e.ids)==null?void 0:t.input)??`clip:${e.id}:input`},te=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`clip:${e.id}:label`},oe=e=>e.getById(b(e)),re=(e,t)=>ne(e.getDoc(),t);function ae(e,t){const o=e.createElement("pre");return Object.assign(o.style,{width:"1px",height:"1px",position:"fixed",top:"5px"}),o.textContent=t,o}function ie(e){const o=A(e).getSelection();if(o==null)return Promise.reject(new Error);o.removeAllRanges();const r=e.ownerDocument,a=r.createRange();return a.selectNodeContents(e),o.addRange(a),r.execCommand("copy"),o.removeAllRanges(),Promise.resolve()}function ne(e,t){var a;const o=e.defaultView||window;if(((a=o.navigator.clipboard)==null?void 0:a.writeText)!==void 0)return o.navigator.clipboard.writeText(t);if(!e.body)return Promise.reject(new Error);const r=ae(e,t);return e.body.appendChild(r),ie(r),e.body.removeChild(r),Promise.resolve()}function se(e,t){const{state:o,send:r,context:a,scope:l}=e,n=o.matches("copied");return{copied:n,value:a.get("value"),setValue(s){r({type:"VALUE.SET",value:s})},copy(){r({type:"COPY"})},getRootProps(){return t.element({...p.root.attrs,"data-copied":c(n),id:ee(l)})},getLabelProps(){return t.label({...p.label.attrs,htmlFor:b(l),"data-copied":c(n),id:te(l)})},getControlProps(){return t.element({...p.control.attrs,"data-copied":c(n)})},getInputProps(){return t.input({...p.input.attrs,defaultValue:a.get("value"),"data-copied":c(n),readOnly:!0,"data-readonly":"true",id:b(l),onFocus(s){s.currentTarget.select()},onCopy(){r({type:"INPUT.COPY"})}})},getTriggerProps(){return t.button({...p.trigger.attrs,type:"button","aria-label":n?"Copied to clipboard":"Copy to clipboard","data-copied":c(n),onClick(){r({type:"COPY"})}})},getIndicatorProps(s){return t.element({...p.indicator.attrs,hidden:s.copied!==n})}}}var le=V({props({props:e}){return{timeout:3e3,defaultValue:"",...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(o){var r;(r=e("onValueChange"))==null||r({value:o})}}))}},watch({track:e,context:t,action:o}){e([()=>t.get("value")],()=>{o(["syncInputElement"])})},on:{"VALUE.SET":{actions:["setValue"]},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]}},states:{idle:{on:{"INPUT.COPY":{target:"copied",actions:["invokeOnCopy"]}}},copied:{effects:["waitForTimeout"],on:{"COPY.DONE":{target:"idle"},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]},"INPUT.COPY":{actions:["invokeOnCopy"]}}}},implementations:{effects:{waitForTimeout({prop:e,send:t}){return B(()=>{t({type:"COPY.DONE"})},e("timeout"))}},actions:{setValue({context:e,event:t}){e.set("value",t.value)},copyToClipboard({context:e,scope:t}){re(t,e.get("value"))},invokeOnCopy({prop:e}){var t;(t=e("onStatusChange"))==null||t({copied:!0})},syncInputElement({context:e,scope:t}){const o=oe(t);o&&U(o,e.get("value"))}}}});T()(["getRootNode","id","ids","value","defaultValue","timeout","onStatusChange","onValueChange"]);T()(["copied"]);const de=e=>{const t=d.useId(),{getRootNode:o}=q(),r={id:t,getRootNode:o,...e},a=Y(le,r);return se(a,$)},N=d.forwardRef((e,t)=>{const[o,r]=L()(e,["defaultValue","id","ids","onStatusChange","onValueChange","timeout","value"]),a=de(o),l=_(a.getRootProps(),r);return i.jsx(X,{value:a,children:i.jsx(y.div,{ref:t,...l})})});N.displayName="ClipboardRoot";const I=d.forwardRef((e,t)=>{const o=m(),r=_(o.getTriggerProps(),e);return i.jsx(y.button,{...r,ref:t})});I.displayName="ClipboardTrigger";const x=d.createContext(void 0);function w({children:e,disabled:t,i18n:o,locale:r}){return i.jsx(x.Provider,{value:{disabled:t,i18n:o,locale:r},children:e})}function k(){return Q(x)}w.__docgenInfo={description:"",methods:[],displayName:"ClipboardProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}},composes:["Pick"]};const pe="_clipboard_5p5eo_2",v={clipboard:pe,"clipboard--disabled":"_clipboard--disabled_5p5eo_18"},O=d.forwardRef(({children:e,className:t,disabled:o,i18n:r,locale:a,onCopy:l,value:n,...s},g)=>i.jsx(w,{disabled:o,i18n:r,locale:a,children:i.jsx(N,{className:C(v.clipboard,{[v["clipboard--disabled"]]:o},t),"data-ods":"clipboard",onStatusChange:l,ref:g,role:"group",value:n,...s,children:e})}));O.displayName="Clipboard";O.__docgenInfo={description:"",methods:[],displayName:"Clipboard",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the component is disabled."},i18n:{required:!1,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:"INPUT_I18N.maskButtonHide | INPUT_I18N.maskButtonShow",elements:[{name:"INPUT_I18N.maskButtonHide"},{name:"INPUT_I18N.maskButtonShow"}]},{name:"string"}],raw:"Record<INPUT_I18N.maskButtonHide | INPUT_I18N.maskButtonShow, string>"}],raw:"Partial<Record<INPUT_I18N.maskButtonHide | INPUT_I18N.maskButtonShow, string>>"},description:"Internal translations override (see Input i18n keys)."},locale:{required:!1,tsType:{name:"literal",value:"`${LOCALE}`"},description:"The locale used for the translation of the internal elements."},onCopy:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback fired when the input value is copied."},value:{required:!1,tsType:{name:"string"},description:"The input value."}},composes:["Omit"]};const ce="_clipboard__input_pn8ud_2",ue={clipboard__input:ce},R=d.forwardRef(({className:e,loading:t,maskOption:o,...r},a)=>{const{disabled:l,i18n:n,locale:s}=k(),{value:g}=m();return i.jsx(P,{asChild:!0,children:i.jsx(M,{className:C(ue.clipboard__input,e),"data-ods":"clipboard-control",i18n:n,loading:t,locale:s,maskOption:o,...r,disabled:l,readOnly:!0,ref:a,type:W.text,value:g})})});R.displayName="ClipboardControl";R.__docgenInfo={description:"",methods:[],displayName:"ClipboardControl",props:{loading:{required:!1,tsType:{name:"boolean"},description:"Whether the component is in loading state."},maskOption:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  enable: boolean,
  initialState?: InputMaskState,
}`,signature:{properties:[{key:"enable",value:{name:"boolean",required:!0}},{key:"initialState",value:{name:"literal",value:"`${INPUT_MASK_STATE}`",required:!1}}]}},description:"Whether the masked display is active and its initial state."}},composes:["ComponentPropsWithRef"]};const u={"clipboard-trigger__copy":"_clipboard-trigger__copy_1t7yk_2","clipboard-trigger__tooltip":"_clipboard-trigger__tooltip_1t7yk_5","clipboard-trigger__tooltip--success":"_clipboard-trigger__tooltip--success_1t7yk_11","clipboard-trigger__tooltip__check":"_clipboard-trigger__tooltip__check_1t7yk_17"},j=d.forwardRef(({children:e,className:t,labelCopy:o="Copy to clipboard",labelCopySuccess:r="Copied!",...a},l)=>{const{disabled:n}=k(),{copied:s}=m();return i.jsxs(K,{position:J.right,children:[i.jsx(I,{asChild:!0,children:i.jsx(Z,{"aria-label":s?r:o,asChild:!0,className:u["clipboard-trigger__copy"],"data-ods":"clipboard-trigger",ref:l,...a,children:e||i.jsx(F,{disabled:n,size:H.xs,variant:D.ghost,children:i.jsx(f,{name:h.fileCopy})})})}),!n&&i.jsx(G,{children:i.jsx("div",{"aria-hidden":"true",className:C(u["clipboard-trigger__tooltip"],{[u["clipboard-trigger__tooltip--success"]]:s},t),children:s?i.jsxs(i.Fragment,{children:[r,i.jsx(f,{className:u["clipboard-trigger__tooltip__check"],name:h.check})]}):o})})]})});j.displayName="ClipboardTrigger";j.__docgenInfo={description:"",methods:[],displayName:"ClipboardTrigger",props:{labelCopy:{required:!1,tsType:{name:"string"},description:"The initial tooltip label on copy button.",defaultValue:{value:"'Copy to clipboard'",computed:!1}},labelCopySuccess:{required:!1,tsType:{name:"string"},description:"The tooltip label on copy button after a successful copy.",defaultValue:{value:"'Copied!'",computed:!1}}},composes:["ComponentPropsWithRef"]};export{j as C,R as a,O as b};
