import{f as M,h as p,j as m}from"./use-locale-context-kHyebpMI.js";var B=Object.defineProperty,A=(s,n,t)=>n in s?B(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t,h=(s,n,t)=>A(s,typeof n!="symbol"?n+"":n,t),x={itemToValue(s){return typeof s=="string"?s:p(s)&&m(s,"value")?s.value:""},itemToString(s){return typeof s=="string"?s:p(s)&&m(s,"label")?s.label:x.itemToValue(s)},isItemDisabled(s){return p(s)&&m(s,"disabled")?!!s.disabled:!1}},rt=class D{constructor(n){this.options=n,h(this,"items"),h(this,"indexMap",null),h(this,"copy",t=>new D({...this.options,items:t??[...this.items]})),h(this,"isEqual",t=>M(this.items,t.items)),h(this,"setItems",t=>this.copy(t)),h(this,"getValues",(t=this.items)=>{const e=[];for(const i of t){const r=this.getItemValue(i);r!=null&&e.push(r)}return e}),h(this,"find",t=>{if(t==null)return null;const e=this.indexOf(t);return e!==-1?this.at(e):null}),h(this,"findMany",t=>{const e=[];for(const i of t){const r=this.find(i);r!=null&&e.push(r)}return e}),h(this,"at",t=>{if(!this.options.groupBy&&!this.options.groupSort)return this.items[t]??null;let e=0;const i=this.group();for(const[,r]of i)for(const o of r){if(e===t)return o;e++}return null}),h(this,"sortFn",(t,e)=>{const i=this.indexOf(t),r=this.indexOf(e);return(i??0)-(r??0)}),h(this,"sort",t=>[...t].sort(this.sortFn.bind(this))),h(this,"getItemValue",t=>{var e,i;return t==null?null:((i=(e=this.options).itemToValue)==null?void 0:i.call(e,t))??x.itemToValue(t)}),h(this,"getItemDisabled",t=>{var e,i;return t==null?!1:((i=(e=this.options).isItemDisabled)==null?void 0:i.call(e,t))??x.isItemDisabled(t)}),h(this,"stringifyItem",t=>{var e,i;return t==null?null:((i=(e=this.options).itemToString)==null?void 0:i.call(e,t))??x.itemToString(t)}),h(this,"stringify",t=>t==null?null:this.stringifyItem(this.find(t))),h(this,"stringifyItems",(t,e=", ")=>{const i=[];for(const r of t){const o=this.stringifyItem(r);o!=null&&i.push(o)}return i.join(e)}),h(this,"stringifyMany",(t,e)=>this.stringifyItems(this.findMany(t),e)),h(this,"has",t=>this.indexOf(t)!==-1),h(this,"hasItem",t=>t==null?!1:this.has(this.getItemValue(t))),h(this,"group",()=>{const{groupBy:t,groupSort:e}=this.options;if(!t)return[["",[...this.items]]];const i=new Map;this.items.forEach((o,l)=>{const u=t(o,l);i.has(u)||i.set(u,[]),i.get(u).push(o)});let r=Array.from(i.entries());return e&&r.sort(([o],[l])=>{if(typeof e=="function")return e(o,l);if(Array.isArray(e)){const u=e.indexOf(o),a=e.indexOf(l);return u===-1?1:a===-1?-1:u-a}return e==="asc"?o.localeCompare(l):e==="desc"?l.localeCompare(o):0}),r}),h(this,"getNextValue",(t,e=1,i=!1)=>{let r=this.indexOf(t);if(r===-1)return null;for(r=i?Math.min(r+e,this.size-1):r+e;r<=this.size&&this.getItemDisabled(this.at(r));)r++;return this.getItemValue(this.at(r))}),h(this,"getPreviousValue",(t,e=1,i=!1)=>{let r=this.indexOf(t);if(r===-1)return null;for(r=i?Math.max(r-e,0):r-e;r>=0&&this.getItemDisabled(this.at(r));)r--;return this.getItemValue(this.at(r))}),h(this,"indexOf",t=>{if(t==null)return-1;if(!this.options.groupBy&&!this.options.groupSort)return this.items.findIndex(e=>this.getItemValue(e)===t);if(!this.indexMap){this.indexMap=new Map;let e=0;const i=this.group();for(const[,r]of i)for(const o of r){const l=this.getItemValue(o);l!=null&&this.indexMap.set(l,e),e++}}return this.indexMap.get(t)??-1}),h(this,"getByText",(t,e)=>{const i=e!=null?this.indexOf(e):-1,r=t.length===1;for(let o=0;o<this.items.length;o++){const l=this.items[(i+o+1)%this.items.length];if(!(r&&this.getItemValue(l)===e)&&!this.getItemDisabled(l)&&K(this.stringifyItem(l),t))return l}}),h(this,"search",(t,e)=>{const{state:i,currentValue:r,timeout:o=350}=e,l=i.keysSoFar+t,a=l.length>1&&Array.from(l).every(C=>C===l[0])?l[0]:l,d=this.getByText(a,r),c=this.getItemValue(d);function N(){clearTimeout(i.timer),i.timer=-1}function g(C){i.keysSoFar=C,N(),C!==""&&(i.timer=+setTimeout(()=>{g(""),N()},o))}return g(l),c}),h(this,"update",(t,e)=>{let i=this.indexOf(t);return i===-1?this:this.copy([...this.items.slice(0,i),e,...this.items.slice(i+1)])}),h(this,"upsert",(t,e,i="append")=>{let r=this.indexOf(t);return r===-1?(i==="append"?this.append:this.prepend)(e):this.copy([...this.items.slice(0,r),e,...this.items.slice(r+1)])}),h(this,"insert",(t,...e)=>this.copy(v(this.items,t,...e))),h(this,"insertBefore",(t,...e)=>{let i=this.indexOf(t);if(i===-1)if(this.items.length===0)i=0;else return this;return this.copy(v(this.items,i,...e))}),h(this,"insertAfter",(t,...e)=>{let i=this.indexOf(t);if(i===-1)if(this.items.length===0)i=0;else return this;return this.copy(v(this.items,i+1,...e))}),h(this,"prepend",(...t)=>this.copy(v(this.items,0,...t))),h(this,"append",(...t)=>this.copy(v(this.items,this.items.length,...t))),h(this,"filter",t=>{const e=this.items.filter((i,r)=>t(this.stringifyItem(i),r,i));return this.copy(e)}),h(this,"remove",(...t)=>{const e=t.map(i=>typeof i=="string"?i:this.getItemValue(i));return this.copy(this.items.filter(i=>{const r=this.getItemValue(i);return r==null?!1:!e.includes(r)}))}),h(this,"move",(t,e)=>{const i=this.indexOf(t);return i===-1?this:this.copy(I(this.items,[i],e))}),h(this,"moveBefore",(t,...e)=>{let i=this.items.findIndex(o=>this.getItemValue(o)===t);if(i===-1)return this;let r=e.map(o=>this.items.findIndex(l=>this.getItemValue(l)===o)).sort((o,l)=>o-l);return this.copy(I(this.items,r,i))}),h(this,"moveAfter",(t,...e)=>{let i=this.items.findIndex(o=>this.getItemValue(o)===t);if(i===-1)return this;let r=e.map(o=>this.items.findIndex(l=>this.getItemValue(l)===o)).sort((o,l)=>o-l);return this.copy(I(this.items,r,i+1))}),h(this,"reorder",(t,e)=>this.copy(I(this.items,[t],e))),h(this,"compareValue",(t,e)=>{const i=this.indexOf(t),r=this.indexOf(e);return i<r?-1:i>r?1:0}),h(this,"range",(t,e)=>{let i=[],r=t;for(;r!=null;){if(this.find(r)&&i.push(r),r===e)return i;r=this.getNextValue(r)}return[]}),h(this,"getValueRange",(t,e)=>t&&e?this.compareValue(t,e)<=0?this.range(t,e):this.range(e,t):[]),h(this,"toString",()=>{let t="";for(const e of this.items){const i=this.getItemValue(e),r=this.stringifyItem(e),o=this.getItemDisabled(e),l=[i,r,o].filter(Boolean).join(":");t+=l+","}return t}),h(this,"toJSON",()=>({size:this.size,first:this.firstValue,last:this.lastValue})),this.items=[...n.items]}get size(){return this.items.length}get firstValue(){let n=0;for(;this.getItemDisabled(this.at(n));)n++;return this.getItemValue(this.at(n))}get lastValue(){let n=this.size-1;for(;this.getItemDisabled(this.at(n));)n--;return this.getItemValue(this.at(n))}*[Symbol.iterator](){yield*this.items}},K=(s,n)=>!!(s!=null&&s.toLowerCase().startsWith(n.toLowerCase()));function v(s,n,...t){return[...s.slice(0,n),...t,...s.slice(n)]}function I(s,n,t){n=[...n].sort((i,r)=>i-r);const e=n.map(i=>s[i]);for(let i=n.length-1;i>=0;i--)s=[...s.slice(0,n[i]),...s.slice(n[i]+1)];return t=Math.max(0,t-n.filter(i=>i<t).length),[...s.slice(0,t),...e,...s.slice(t)]}function S(s,n,t){for(let e=0;e<n.length;e++)s=t.getChildren(s,n.slice(e+1))[n[e]];return s}function F(s){const n=z(s),t=[],e=new Set;for(const i of n){const r=i.join();e.has(r)||(e.add(r),t.push(i))}return t}function O(s,n){for(let t=0;t<Math.min(s.length,n.length);t++){if(s[t]<n[t])return-1;if(s[t]>n[t])return 1}return s.length-n.length}function z(s){return s.sort(O)}function L(s,n){let t;return f(s,{...n,onEnter:(e,i)=>{if(n.predicate(e,i))return t=e,"stop"}}),t}function q(s,n){const t=[];return f(s,{onEnter:(e,i)=>{n.predicate(e,i)&&t.push(e)},getChildren:n.getChildren}),t}function T(s,n){let t;return f(s,{onEnter:(e,i)=>{if(n.predicate(e,i))return t=[...i],"stop"},getChildren:n.getChildren}),t}function J(s,n){let t=n.initialResult;return f(s,{...n,onEnter:(e,i)=>{t=n.nextResult(t,e,i)}}),t}function W(s,n){return J(s,{...n,initialResult:[],nextResult:(t,e,i)=>(t.push(...n.transform(e,i)),t)})}function G(s,n){const{predicate:t,create:e,getChildren:i}=n,r=(o,l)=>{const u=i(o,l),a=[];u.forEach((g,C)=>{const j=[...l,C],b=r(g,j);b&&a.push(b)});const d=l.length===0,c=t(o,l),N=a.length>0;return d||c||N?e(o,a,l):null};return r(s,[])||e(s,[],[])}function H(s,n){const t=[];let e=0;const i=new Map,r=new Map;return f(s,{getChildren:n.getChildren,onEnter:(o,l)=>{i.has(o)||i.set(o,e++);const u=n.getChildren(o,l);u.forEach(g=>{r.has(g)||r.set(g,o),i.has(g)||i.set(g,e++)});const a=u.length>0?u.map(g=>i.get(g)):void 0,d=r.get(o),c=d?i.get(d):void 0,N=i.get(o);t.push({...o,_children:a,_parent:c,_index:N})}}),t}function Q(s,n){return{type:"insert",index:s,nodes:n}}function U(s){return{type:"remove",indexes:s}}function w(){return{type:"replace"}}function E(s){return[s.slice(0,-1),s[s.length-1]]}function P(s,n,t=new Map){var o;const[e,i]=E(s);for(let l=e.length-1;l>=0;l--){const u=e.slice(0,l).join();switch((o=t.get(u))==null?void 0:o.type){case"remove":continue}t.set(u,w())}const r=t.get(e.join());switch(r==null?void 0:r.type){case"remove":t.set(e.join(),{type:"removeThenInsert",removeIndexes:r.indexes,insertIndex:i,insertNodes:n});break;default:t.set(e.join(),Q(i,n))}return t}function R(s){const n=new Map,t=new Map;for(const e of s){const i=e.slice(0,-1).join(),r=t.get(i)??[];r.push(e[e.length-1]),t.set(i,r.sort((o,l)=>o-l))}for(const e of s)for(let i=e.length-2;i>=0;i--){const r=e.slice(0,i).join();n.has(r)||n.set(r,w())}for(const[e,i]of t)n.set(e,U(i));return n}function X(s,n){const t=new Map,[e,i]=E(s);for(let r=e.length-1;r>=0;r--){const o=e.slice(0,r).join();t.set(o,w())}return t.set(e.join(),{type:"removeThenInsert",removeIndexes:[i],insertIndex:i,insertNodes:[n]}),t}function V(s,n,t){return Y(s,{...t,getChildren:(e,i)=>{const r=i.join(),o=n.get(r);switch(o==null?void 0:o.type){case"replace":case"remove":case"removeThenInsert":case"insert":return t.getChildren(e,i);default:return[]}},transform:(e,i,r)=>{const o=r.join(),l=n.get(o);switch(l==null?void 0:l.type){case"remove":return t.create(e,i.filter((d,c)=>!l.indexes.includes(c)),r);case"removeThenInsert":const u=i.filter((d,c)=>!l.removeIndexes.includes(c)),a=l.removeIndexes.reduce((d,c)=>c<d?d-1:d,l.insertIndex);return t.create(e,_(u,a,0,...l.insertNodes),r);case"insert":return t.create(e,_(i,l.index,0,...l.nodes),r);case"replace":return t.create(e,i,r);default:return e}}})}function _(s,n,t,...e){return[...s.slice(0,n),...e,...s.slice(n+t)]}function Y(s,n){const t={};return f(s,{...n,onLeave:(e,i)=>{const r=[0,...i],o=r.join(),l=n.transform(e,t[o]??[],i),u=r.slice(0,-1).join(),a=t[u]??[];a.push(l),t[u]=a}}),t[""][0]}function Z(s,n){const{nodes:t,at:e}=n;if(e.length===0)throw new Error("Can't insert nodes at the root");const i=P(e,t);return V(s,i,n)}function $(s,n){if(n.at.length===0)return n.node;const t=X(n.at,n.node);return V(s,t,n)}function tt(s,n){if(n.indexPaths.length===0)return s;for(const e of n.indexPaths)if(e.length===0)throw new Error("Can't remove the root node");const t=R(n.indexPaths);return V(s,t,n)}function et(s,n){if(n.indexPaths.length===0)return s;for(const r of n.indexPaths)if(r.length===0)throw new Error("Can't move the root node");if(n.to.length===0)throw new Error("Can't move nodes to the root");const t=F(n.indexPaths),e=t.map(r=>S(s,r,n)),i=P(n.to,e,R(t));return V(s,i,n)}function f(s,n){const{onEnter:t,onLeave:e,getChildren:i}=n;let r=[],o=[{node:s}];const l=n.reuseIndexPath?()=>r:()=>r.slice();for(;o.length>0;){let u=o[o.length-1];if(u.state===void 0){const d=t==null?void 0:t(u.node,l());if(d==="stop")return;u.state=d==="skip"?-1:0}const a=u.children||i(u.node,l());if(u.children||(u.children=a),u.state!==-1){if(u.state<a.length){let c=u.state;r.push(c),o.push({node:a[c]}),u.state=c+1;continue}if((e==null?void 0:e(u.node,l()))==="stop")return}r.pop(),o.pop()}}var st=class k{constructor(n){this.options=n,h(this,"rootNode"),h(this,"isEqual",t=>M(this.rootNode,t.rootNode)),h(this,"getNodeChildren",t=>{var e,i;return((i=(e=this.options).nodeToChildren)==null?void 0:i.call(e,t))??y.nodeToChildren(t)??[]}),h(this,"resolveIndexPath",t=>typeof t=="string"?this.getIndexPath(t):t),h(this,"resolveNode",t=>{const e=this.resolveIndexPath(t);return e?this.at(e):void 0}),h(this,"getNodeChildrenCount",t=>{var e,i;return((i=(e=this.options).nodeToChildrenCount)==null?void 0:i.call(e,t))??y.nodeToChildrenCount(t)}),h(this,"getNodeValue",t=>{var e,i;return((i=(e=this.options).nodeToValue)==null?void 0:i.call(e,t))??y.nodeToValue(t)}),h(this,"getNodeDisabled",t=>{var e,i;return((i=(e=this.options).isNodeDisabled)==null?void 0:i.call(e,t))??y.isNodeDisabled(t)}),h(this,"stringify",t=>{const e=this.findNode(t);return e?this.stringifyNode(e):null}),h(this,"stringifyNode",t=>{var e,i;return((i=(e=this.options).nodeToString)==null?void 0:i.call(e,t))??y.nodeToString(t)}),h(this,"getFirstNode",(t=this.rootNode)=>{let e;return f(t,{getChildren:this.getNodeChildren,onEnter:(i,r)=>{if(!e&&r.length>0&&!this.getNodeDisabled(i))return e=i,"stop"}}),e}),h(this,"getLastNode",(t=this.rootNode,e={})=>{let i;return f(t,{getChildren:this.getNodeChildren,onEnter:(r,o)=>{var l;if(!this.isSameNode(r,t)){if((l=e.skip)!=null&&l.call(e,{value:this.getNodeValue(r),node:r,indexPath:o}))return"skip";o.length>0&&!this.getNodeDisabled(r)&&(i=r)}}}),i}),h(this,"at",t=>S(this.rootNode,t,{getChildren:this.getNodeChildren})),h(this,"findNode",(t,e=this.rootNode)=>L(e,{getChildren:this.getNodeChildren,predicate:i=>this.getNodeValue(i)===t})),h(this,"findNodes",(t,e=this.rootNode)=>{const i=new Set(t.filter(r=>r!=null));return q(e,{getChildren:this.getNodeChildren,predicate:r=>i.has(this.getNodeValue(r))})}),h(this,"sort",t=>t.reduce((e,i)=>{const r=this.getIndexPath(i);return r&&e.push({value:i,indexPath:r}),e},[]).sort((e,i)=>O(e.indexPath,i.indexPath)).map(({value:e})=>e)),h(this,"getIndexPath",t=>T(this.rootNode,{getChildren:this.getNodeChildren,predicate:e=>this.getNodeValue(e)===t})),h(this,"getValue",t=>{const e=this.at(t);return e?this.getNodeValue(e):void 0}),h(this,"getValuePath",t=>{if(!t)return[];const e=[];let i=[...t];for(;i.length>0;){const r=this.at(i);r&&e.unshift(this.getNodeValue(r)),i.pop()}return e}),h(this,"getDepth",t=>{const e=T(this.rootNode,{getChildren:this.getNodeChildren,predicate:i=>this.getNodeValue(i)===t});return(e==null?void 0:e.length)??0}),h(this,"isSameNode",(t,e)=>this.getNodeValue(t)===this.getNodeValue(e)),h(this,"isRootNode",t=>this.isSameNode(t,this.rootNode)),h(this,"contains",(t,e)=>!t||!e?!1:e.slice(0,t.length).every((i,r)=>t[r]===e[r])),h(this,"getNextNode",(t,e={})=>{let i=!1,r;return f(this.rootNode,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{var a;if(this.isRootNode(o))return;const u=this.getNodeValue(o);if((a=e.skip)!=null&&a.call(e,{value:u,node:o,indexPath:l}))return u===t&&(i=!0),"skip";if(i&&!this.getNodeDisabled(o))return r=o,"stop";u===t&&(i=!0)}}),r}),h(this,"getPreviousNode",(t,e={})=>{let i,r=!1;return f(this.rootNode,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{var a;if(this.isRootNode(o))return;const u=this.getNodeValue(o);if((a=e.skip)!=null&&a.call(e,{value:u,node:o,indexPath:l}))return"skip";if(u===t)return r=!0,"stop";this.getNodeDisabled(o)||(i=o)}}),r?i:void 0}),h(this,"getParentNodes",t=>{var r;const e=(r=this.resolveIndexPath(t))==null?void 0:r.slice();if(!e)return[];const i=[];for(;e.length>0;){e.pop();const o=this.at(e);o&&!this.isRootNode(o)&&i.unshift(o)}return i}),h(this,"getDescendantNodes",(t,e)=>{const i=this.resolveNode(t);if(!i)return[];const r=[];return f(i,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{l.length!==0&&(!(e!=null&&e.withBranch)&&this.isBranchNode(o)||r.push(o))}}),r}),h(this,"getDescendantValues",(t,e)=>this.getDescendantNodes(t,e).map(r=>this.getNodeValue(r))),h(this,"getParentIndexPath",t=>t.slice(0,-1)),h(this,"getParentNode",t=>{const e=this.resolveIndexPath(t);return e?this.at(this.getParentIndexPath(e)):void 0}),h(this,"visit",t=>{const{skip:e,...i}=t;f(this.rootNode,{...i,getChildren:this.getNodeChildren,onEnter:(r,o)=>{var l;if(!this.isRootNode(r))return e!=null&&e({value:this.getNodeValue(r),node:r,indexPath:o})?"skip":(l=i.onEnter)==null?void 0:l.call(i,r,o)}})}),h(this,"getPreviousSibling",t=>{const e=this.getParentNode(t);if(!e)return;const i=this.getNodeChildren(e);let r=t[t.length-1];for(;--r>=0;){const o=i[r];if(!this.getNodeDisabled(o))return o}}),h(this,"getNextSibling",t=>{const e=this.getParentNode(t);if(!e)return;const i=this.getNodeChildren(e);let r=t[t.length-1];for(;++r<i.length;){const o=i[r];if(!this.getNodeDisabled(o))return o}}),h(this,"getSiblingNodes",t=>{const e=this.getParentNode(t);return e?this.getNodeChildren(e):[]}),h(this,"getValues",(t=this.rootNode)=>W(t,{getChildren:this.getNodeChildren,transform:i=>[this.getNodeValue(i)]}).slice(1)),h(this,"isValidDepth",(t,e)=>e==null?!0:typeof e=="function"?e(t.length):t.length===e),h(this,"isBranchNode",t=>this.getNodeChildren(t).length>0||this.getNodeChildrenCount(t)!=null),h(this,"getBranchValues",(t=this.rootNode,e={})=>{let i=[];return f(t,{getChildren:this.getNodeChildren,onEnter:(r,o)=>{var u;if(o.length===0)return;const l=this.getNodeValue(r);if((u=e.skip)!=null&&u.call(e,{value:l,node:r,indexPath:o}))return"skip";this.isBranchNode(r)&&this.isValidDepth(o,e.depth)&&i.push(this.getNodeValue(r))}}),i}),h(this,"flatten",(t=this.rootNode)=>H(t,{getChildren:this.getNodeChildren})),h(this,"_create",(t,e)=>this.getNodeChildren(t).length>0||e.length>0?{...t,children:e}:{...t}),h(this,"_insert",(t,e,i)=>this.copy(Z(t,{at:e,nodes:i,getChildren:this.getNodeChildren,create:this._create}))),h(this,"copy",t=>new k({...this.options,rootNode:t})),h(this,"_replace",(t,e,i)=>this.copy($(t,{at:e,node:i,getChildren:this.getNodeChildren,create:this._create}))),h(this,"_move",(t,e,i)=>this.copy(et(t,{indexPaths:e,to:i,getChildren:this.getNodeChildren,create:this._create}))),h(this,"_remove",(t,e)=>this.copy(tt(t,{indexPaths:e,getChildren:this.getNodeChildren,create:this._create}))),h(this,"replace",(t,e)=>this._replace(this.rootNode,t,e)),h(this,"remove",t=>this._remove(this.rootNode,t)),h(this,"insertBefore",(t,e)=>this.getParentNode(t)?this._insert(this.rootNode,t,e):void 0),h(this,"insertAfter",(t,e)=>{if(!this.getParentNode(t))return;const r=[...t.slice(0,-1),t[t.length-1]+1];return this._insert(this.rootNode,r,e)}),h(this,"move",(t,e)=>this._move(this.rootNode,t,e)),h(this,"filter",t=>{const e=G(this.rootNode,{predicate:t,getChildren:this.getNodeChildren,create:this._create});return this.copy(e)}),h(this,"toJSON",()=>this.getValues(this.rootNode)),this.rootNode=n.rootNode}},y={nodeToValue(s){return typeof s=="string"?s:p(s)&&m(s,"value")?s.value:""},nodeToString(s){return typeof s=="string"?s:p(s)&&m(s,"label")?s.label:y.nodeToValue(s)},isNodeDisabled(s){return p(s)&&m(s,"disabled")?!!s.disabled:!1},nodeToChildren(s){return s.children},nodeToChildrenCount(s){if(p(s)&&m(s,"childrenCount"))return s.childrenCount}};export{rt as L,st as T};
