@use '../../../../../style/input';

@layer ods {
  .input {
    display: inline-block;
    position: relative;
    width: max-content;

    &__actions {
      display: inline-flex;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      gap: 2px;
      align-items: center;
      justify-content: center;
      padding-right: input.$ods-input-actions-padding-right;

      &__loading {
        padding-right: input.$ods-input-actions-padding-right;
        width: 1rem;
        height: 1rem;
      }
    }

    &__field {
      $field: &;

      @include input.ods-input();

      width: inherit;

      &::-webkit-outer-spin-button,
      &::-webkit-inner-spin-button {
        appearance: none;
        margin: 0;
      }

      &:not([data-invalid], :disabled, :read-only) {
        &:focus {
          border-color: var(--ods-color-form-element-border-focus-default);
        }

        &:hover {
          border-color: var(--ods-color-form-element-border-hover-default);
        }
      }

      &:not(:disabled)[data-invalid] {
        @include input.ods-input-error();
      }

      &--clearable, &--loading, &--toggle-mask, &--search {
        padding-right: input.$ods-input-input-padding-right + input.$ods-input-actions-padding-right;
      }

      &--clearable {
        &#{$field}--toggle-mask,
        &#{$field}--search {
          padding-right: calc(input.$ods-input-input-padding-right * 2);
        }

        &#{$field}--toggle-mask {
          &#{$field}--search {
            padding-right: calc(input.$ods-input-input-padding-right * 3);
          }
        }
      }

      &--toggle-mask {
        &#{$field}--search {
          padding-right: calc(input.$ods-input-input-padding-right * 2);
        }
      }

      &[type="number"] {
        appearance: textfield;
      }

      &[type="search"]::-webkit-search-cancel-button,
      &[type="search"]::-webkit-search-decoration {
        appearance: none;
      }
    }
  }
}
