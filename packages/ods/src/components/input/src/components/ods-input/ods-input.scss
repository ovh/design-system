@use '~@ovhcloud/ods-themes/src/default/variables' as theme;
@use '../../../../../style/focus';
@use '../../../../../style/input';

:host(.ods-input) {
  position: relative;
}

$ods-input__button-right: 4px;

.ods-input {
  &__button {
    display: inline-flex;
    position: absolute;
    top: 0;
    right: $ods-input__button-right;
    border: none;
    background: none;
    color: theme.$ods-color-primary-500;

    &:focus-visible {
      @include focus.ods-focus();
    }

    &:not(:first-of-type) {
      right: 30px;
    }
  }

  &__input {
    $input: &;

    @include input.ods-input();

    &:not(#{$input}--error) {
      &:focus {
        border-color: theme.$ods-form-element-border-color-focused;
      }

      &:hover {
        border-color: theme.$ods-form-element-border-color-hover;
      }
    }

    &--disabled {
      background-color: theme.$ods-color-neutral-100;
      cursor: not-allowed;
      user-select: none;

      ~ .ods-input__button {
        cursor: not-allowed;
      }
    }

    &--error {
      border-color: theme.$ods-form-element-border-color-critical;
    }
  }

  &__spinner {
    position: absolute;
    top: 0;
    right: $ods-input__button-right;
    padding: 0 4px;

    &::part(spinner) {
      width: 1rem;
      height: 1rem;
    }
  }
}
