import { Badge } from '@ovhcloud/ods-react';
import { Meta, Source } from '@storybook/blocks';
import * as BreadcrumbStories from './breadcrumb.stories';
import { Heading } from '../../../src/components/heading/Heading';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { ODS_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta of={ BreadcrumbStories } name="Migration From 17.x" />

<Heading label="Breadcrumb - migrate from v17 to v18" level={ 1 } />

<Heading label="Usage changes" level={ 2 } />

Previous to v18, breadcrumb items were passed as an array attribute, with a strict definition of expected attributes.

New component now works more like other ods components, child items are now declared as slotted element directly in the DOM.

This way you can easily manipulate the list item DOM and each item separately.

<Source code={`
<osds-breadcrumb id="default-breadcrumb"></osds-breadcrumb>
<script>
document.querySelector('#default-breadcrumb').items = JSON.stringify([
  { href: "#home", label: "Home" },
  { href: "#services", label: "Services" },
  { href: "#products", label: "Products" },
  { href: "#web", label: "Web" },
]);
</script>
`}
        dark="true"
        language="html" />

The same result would now be achieved using:

<Source code={`
<ods-breadcrumb>
  <ods-breadcrumb-item href="#home" label="Home"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#services" label="Services"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#products" label="Products"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#web" label="Web"></ods-breadcrumb-item>
</ods-breadcrumb>
`}
        dark="true"
        language="html" />

<Heading label="Design changes" level={ 2 } />

The last item of the breadcrumb is now automatically rendered as a text, it is no longer a disabled link.

<Heading label="Attributes changes" level={ 2 } />

`contrasted` <Badge color="critical" size="sm">Removed</Badge>

Has been removed.

You can use the style customization to achieve the same result, until a new color get validated by the design team.

`items` <Badge color="critical" size="sm">Removed</Badge>

Has been removed.

You should now use `<ods-breadcrumb-item>` directly in the DOM of the `<ods-breadcrumb>` component.

The attribute list is the same as the <StorybookLink kind={ ODS_COMPONENTS_TITLE.link } story={ STORY.technicalInformation }>ods-link</StorybookLink> component.

Which means you have the same attributes, following the link <StorybookLink kind={ ODS_COMPONENTS_TITLE.link } story={ STORY.migrationFrom17 }>migration guide</StorybookLink>.

<Heading label="Migration examples" level={ 2 } />

Basic breadcrumb:

<Source code={`
<osds-breadcrumb id="default-breadcrumb"></osds-breadcrumb>
<script>
document.querySelector('#default-breadcrumb').items = JSON.stringify([
  { href: "#home", label: "Home" },
  { href: "#services", label: "Services" },
  { href: "#products", label: "Products" },
  { href: "#web", label: "Web" },
]);
</script>

<!-- is now -->

<ods-breadcrumb>
  <ods-breadcrumb-item href="#home" label="Home"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#services" label="Services"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#products" label="Products"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#web" label="Web"></ods-breadcrumb-item>
</ods-breadcrumb>
`}
        dark="true"
        language="html" />

Custom breadcrumb item:

<Source code={`
<osds-breadcrumb id="default-breadcrumb"></osds-breadcrumb>
<script>
document.querySelector('#default-breadcrumb').items = JSON.stringify([
  { href: "#home", label: "Home" },
  { href: "#services", label: "Services", target: "_blank" },
  { href: "#products", label: "Products", disabled: true },
  { href: "#web", label: "Web" },
]);
</script>

<!-- is now -->

<ods-breadcrumb>
  <ods-breadcrumb-item href="#home" label="Home"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#services" label="Services" target="_blank"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#products" is-disabled label="Products"></ods-breadcrumb-item>
  <ods-breadcrumb-item href="#web" label="Web"></ods-breadcrumb-item>
</ods-breadcrumb>
`}
        dark="true"
        language="html" />
