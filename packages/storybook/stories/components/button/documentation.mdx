import { Canvas, Meta } from '@storybook/blocks';
import { ODS_ICON_NAME } from '@ovhcloud/ods-components';
import { OdsIcon } from '@ovhcloud/ods-components/react';
import * as ButtonStories from './button.stories';
import { Banner } from '../../../src/components/banner/Banner';
import { BestPractices } from '../../../src/components/bestPractices/BestPractices';
import { Heading } from '../../../src/components/heading/Heading';
import { IdentityCard } from '../../../src/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { ATOMIC_TYPE } from '../../../src/constants/atomicDesign';
import { ODS_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta of={ ButtonStories } name="Documentation" />

<Banner of={ ButtonStories } />

_A **Button** component aims to initiate an action. Its <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } /> indicates the related intent, its aspect describes the importance and influence level._

<Canvas of={ ButtonStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Call To Action', 'CTA'] }
              atomicType={ ATOMIC_TYPE.atom }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=3-23353"
              githubUrl="https://github.com/ovh/design-system/tree/master/packages/ods/src/components/button"
              name="Button"
              relatedComponents={ [{ name: 'Icon' }] }>
  **Buttons** are triggerable elements that are used to set actions. They communicate calls to action to the user and
  allow them to interact with pages.

  **Button** labels express explicitly what action will occur when the user interacts with it. Its aspect describes
  the importance and influence level.

  This component exists in many ways : variants, sizes and colors.
</IdentityCard>

<Heading label="Anatomy" level={ 2 } />

![Component anatomy](components/button/anatomy.png "Component anatomy")

<Heading label="Usage" level={ 2 } />

**Buttons** are mainly used for actions, like adding, removing, validating, etc.
They are used to allow users to interact with the page or its content.

**Buttons** work with other elements on a screen to **surface the most important actions the user wants to take in that context**.
**They must respect the proximity law** in order to guide the user on the action to be performed and the expected result.
A **Button** label indicates what happens when the user taps the **Button**, even if it's just to acknowledge something.

**Buttons** don't usually redirect to an external page. For that, see <StorybookLink kind={ ODS_COMPONENTS_TITLE.link } label="Link" story={ STORY.documentation } />.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    <span>- Use Buttons as <StorybookLink kind={ ODS_COMPONENTS_TITLE.link } label="Link" story={ STORY.documentation } /> (using the ghost variant), prefer using the <StorybookLink kind={ ODS_COMPONENTS_TITLE.link } label="Link" story={ STORY.documentation } /> component</span>,
    '- Put two identical Buttons side by side',
    '- Use success/error variants for other needs than validation/cancel',
  ]}
  dos={[
    '- Group a main with a secondary Button for page actions',
    '- At least one primary Button must be present per page in order to present the main action',
  ]}
/>

<Heading label="Placement" level={ 2 } />

The **Button** component has an automatic width regarding its context.

By default, the **Button** content is centered in its container.

<Heading label="Behavior" level={ 2 } />

A **Button** can be hovered, focused, clicked and disabled.

When in disabled state, it is impossible to focus or click on it. A "disabled" cursor is shown when hovering the disabled component.

An <StorybookLink kind={ ODS_COMPONENTS_TITLE.icon } label="Icon" story={ STORY.documentation } /> can be displayed on the left or right of the **Button** label content.

<Heading label="Navigation" level={ 2 } />

When focusing the **Button**, pressing `Enter` or `Space` keys will trigger it.

<Heading label="Variation" level={ 2 } />

<Heading label="Color" level={ 3 } />

- **Primary** _(default)_: used for main usage of **Buttons**, and linked to the brand graphical charter.
- **Critical**: alerts users to high-priority actions or warnings that require immediate attention.
- **Neutral**: secondary actions (such as clearing field or close button).

<Heading label="Variant" level={ 3 } />

- **Default**: primary actions, featuring a full background with a matching border to signify important emphasis.
- **Outline**: secondary actions, featuring a transparent background with a visible border to signify less emphasis than primary buttons.
- **Ghost**: tertiary or less prominent actions, blending into the background with minimal styling until hovered or focused to reduce visual dominance.

<Heading label="Size" level={ 3 } />

- **Extra Small**: actions in tiny spaces, such as action button in fields or compact rows in a table.
- **Small**: actions in compact spaces or within densely packed interfaces, providing a more subtle and space-efficient option.
- **Medium** _(default)_: main usage of **Buttons**, when they can be displayed in an important manner.

<Heading label="Accessibility" level={ 2 } />

The accessibility of the **Button** component must be carefully considered during its implementation.

<Heading label="Best practices" level={ 3 } />

<Heading label="Always provide an explicit label" level={ 4 } />

**Button** should always has a clear and descriptive label to indicate their purpose.

Example:

<Canvas of={ ButtonStories.AccessibilityDefault } sourceState="shown" />

<OdsIcon ariaHidden
         name={ ODS_ICON_NAME.circleCheck }
         style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce "My button, button".

<Heading label="Icon Button" level={ 4 } />

If a **Button** contains only an <StorybookLink kind={ ODS_COMPONENTS_TITLE.icon } label="Icon" story={ STORY.documentation } />, it must include an `aria-label` to provide context.

Example of an icon **Button** with `aria-label`:

<Canvas of={ ButtonStories.AccessibilityIconOnly } sourceState="shown" />

<OdsIcon ariaHidden
         name={ ODS_ICON_NAME.circleCheck }
         style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce "Clear, button".

<Heading label="Using aria-labelledby for additional context" level={ 4 } />

When a **Button** is associated with an existing label, content is read by screen readers when the **Button** receives focus.

Example:

<Canvas of={ ButtonStories.AccessibilityLabelledby } sourceState="shown" />

<OdsIcon ariaHidden
         name={ ODS_ICON_NAME.circleCheck }
         style={{ color: 'var(--ods-color-success-500)' }} /> When the **Button** is focused, the screen reader should announce "Filter your search results, button".
