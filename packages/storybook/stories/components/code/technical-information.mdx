import { ICON_NAME, MESSAGE_COLOR, Message, MessageBody, MessageIcon } from '@ovhcloud/ods-react';
import { Meta, Source } from '@storybook/blocks';
import cssVariable from '../../../../ods-react/src/components/code/documentation/cssVariable.json';
import specificationsCode from '../../../../ods-react/src/components/code/documentation/code.json';
import { Anatomy } from '../../../src/components/anatomy/Anatomy';
import { Banner } from '../../../src/components/banner/Banner';
import { Canvas } from '../../../src/components/canvas/Canvas';
import { ExternalLink } from '../../../src/components/externalLink/ExternalLink';
import { Heading } from '../../../src/components/heading/Heading';
import { TechnicalSpecification } from '../../../src/components/technicalSpecification/TechnicalSpecification';
import * as CodeStories from './code.stories';

<Meta of={ CodeStories } name="Technical information" />

<Banner of={ CodeStories } />

<Heading label="Overview" level={ 2 } />

<Canvas of={ CodeStories.Overview } sourceState="none" />

<Heading label="Anatomy" level={ 2 } />

<Anatomy src="components/code/anatomy-tech.png" />

1. **Code**

<TechnicalSpecification
  cssVariable={ cssVariable}
  data={ specificationsCode }
  extraInfo={{
    'Code': {
      extendAttribute: {
        name: 'div',
        url: 'https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/div#attributes',
      },
    },
  }}
  of={ CodeStories } />

<Heading label="Setup custom highlighter" level={ 2 } />

By default, `Code` provides the lightest bundle needed to display your code. But you may want to use some highlighter
to provide a better visual to your end-users.

`Code` does support all <ExternalLink href="https://shiki.style/">Shiki v3</ExternalLink> languages and themes.

<Message
  color={ MESSAGE_COLOR.information }
  dismissible={ false }
  style={{ width: '100%' }}>
  <MessageIcon name={ ICON_NAME.lightbulb } />

  <MessageBody>
    You can test all languages and themes in the <ExternalLink href="https://textmate-grammars-themes.netlify.app/">Shiki playground</ExternalLink>.
  </MessageBody>
</Message>

To setup an highlighter:
- pick a <ExternalLink href="https://shiki.style/languages">language</ExternalLink> and a <ExternalLink href="https://shiki.style/themes">theme</ExternalLink>.
- include both on your app side.
- pass them to the `Code component`.

<Source code={`
import { Code } from '@ovhcloud/ods-react';
import lang from '@shikijs/langs/typescript';
import theme from '@shikijs/themes/nord';

const HighlightedCode = () => (
  <Code
    highlighter={{
      language: lang,
      theme: theme,
    }}>
    console.log('Hello World');
  </Code>
);
`}
  dark="true"
  language="typescript" />

<Canvas of={ CodeStories.Highlighter } sourceState="none" />

<Heading label="Examples" level={ 2 } />

<Heading label="Default" level={ 3 } />

<Canvas of={ CodeStories.Default } sourceState="shown" />

<Heading label="Multiline" level={ 3 } />

<Canvas of={ CodeStories.Multiline } sourceState="shown" />

<Heading label="With copy button enabled" level={ 3 } />

<Canvas of={ CodeStories.CanCopy } sourceState="shown" />

<Heading label="Custom labels" level={ 3 } />

<Canvas of={ CodeStories.CustomLabels } sourceState="shown" />
