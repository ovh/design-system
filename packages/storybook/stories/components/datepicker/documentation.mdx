import { Canvas, Meta } from '@storybook/blocks';
import * as DatepickerStories from './datepicker.stories';
import { Banner } from '../../../src/components/banner/Banner';
import { BestPractices } from '../../../src/components/bestPractices/BestPractices';
import { Heading } from '../../../src/components/heading/Heading';
import { IdentityCard } from '../../../src/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { ATOMIC_TYPE } from '../../../src/constants/atomicDesign';
import { ODS_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta of={ DatepickerStories } name="Documentation" />

<Banner of={ DatepickerStories } />

_A **Datepicker** component is used to allow users to select a date. They can navigate through days, months and years._

<Canvas of={ DatepickerStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Calendar'] }
              atomicType={ ATOMIC_TYPE.molecule }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=26-7958"
              githubUrl="https://github.com/ovh/design-system/tree/master/packages/ods/src/components/datepicker"
              name="Datepicker">
  The Datepicker component is used for selecting dates in forms and applications. It provides a user-friendly
  interface for choosing dates, ensuring that the date format is consistent and valid. This component can include
  features such as disabled dates and custom formats.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

**Datepicker** is used to **allow a selection of a specific date** in the near future or even past. It is **useful for scheduling, or defining user dates**.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Use a Datepicker when the user has to pick dates in many years in the past or future, a date of birth for example',
    '- Only use a placeholder to indicate the user about the expected format in the date field since it will disappear after typing. Consider adding a label with a Form Field component to indicate the format',
  ]}
  dos={[
    '- Use a Datepicker when users need to select a single date or range of dates',
    '- Use a Datepicker for recent or near future dates',
    '- When the user has to pick dates in the distant past or future, do choose a more suitable day as Datepicker default date when it will open',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](components/datepicker/anatomy.png "Component anatomy")

1. **Datepicker**
2. **Date field**
3. **Icon button**
4. **Dropdown calendar**
5. **Month/Year button**
6. **Previous/Next month buttons**
7. **Week days**
8. **Day**
9. **Selected day**

<Heading label="Placement" level={ 2 } />

A **Datepicker** can be used in a page as long as there is a need to allow users to pick a date.

The date field has a fixed width by default but when used in a form its width should match the other inputs.

The **Datepicker** dropdown has a fixed width and is not adjustable.

<Heading label="Behavior" level={ 2 } />

**Opening the Datepicker**

By clicking on the **Datepicker** icon button.

**Closing the Datepicker**

- By clicking outside the **Datepicker** dropdown
- By selecting a date

**Date picking mode**

Navigating to previous/next month : By clicking on arrow icon <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } story={ STORY.documentation }>Buttons</StorybookLink> to navigate through months

Selecting a month : By clicking on the month selection <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink> to switch to month picking mode

Picking a date : By clicking on a date

**Month picking mode**

Navigating to previous/next year : By clicking on arrow icon <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } story={ STORY.documentation }>Buttons</StorybookLink> to navigate through years

Selecting a year : By clicking on the month selection <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink> to switch to year picking mode

Picking a month: By clicking on a month, the dropdown goes back to date picking mode

**Year picking mode**

Navigating to previous/next range of years : By clicking on arrow icon <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } story={ STORY.documentation }>Buttons</StorybookLink> to navigate through years

Selecting a decade : By clicking on the month selection <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink> to switch to year picking mode

Picking a month: By clicking on a month, the dropdown goes back to date picking mode

**Locale**

Locale determines how the week days will be displayed according to the localization. The **Datepicker** supports the following locales: English (default), German, Spanish, French, Italian, Dutch, Polish and Portuguese.

<Heading label="Variation" level={ 2 } />

N/A

<Heading label="Accessibility" level={ 2 } />

**Opening the Datepicker dropdown**

When focusing the **Datepicker** component, the dropdown opens automatically.

**Closing the Datepicker dropdown**

- By pressing the `Escape` key
- By removing focus on the **Datepicker**

**Selecting a month in the current year**

By pressing `Ctrl/Cmd` and `Up` Arrow key, the dropdown content is replaced with months to select; navigating with Arrow keys and selecting a month with `Enter` key will change the dropdown content back to the date selection.

**Selecting a year**

When in a month selection (see above), pressing `Ctrl/Cmd` and `Up` Arrow key again will replace the dropdown content with years to select; navigating with Arrow keys and selecting a year with `Enter` key will change the dropdown content back to the month selection (see above).

**Quick Navigating to next or previous month**

By pressing `Ctrl/Cmd` and `Left/Right` Arrow keys, the user can move to next or previous month dates directly.

**Selecting a date**

- By manually typing a date in the date field in format 'yyyy-mm-dd', and pressing `Enter` key
- By pressing Arrow keys to navigate through the days and pressing `Enter` key in the **Datepicker** dropdown
