import { Canvas, Meta } from '@storybook/blocks';
import SpecificationsDatepicker from '@ovhcloud/ods-components/src/components/datepicker/documentation/custom-elements.json';
import { Banner } from '../../../src/components/banner/Banner';
import { Heading } from '../../../src/components/heading/Heading';
import { DatepickerFormatsTable } from '../../../src/components/datepickerFormatsTable/DatepickerFormatsTable';
import { TechnicalSpecification } from '../../../src/components/technicalSpecification/TechnicalSpecification';
import { hideValidityStateSource } from '../../../src/components/validityState/validityState';
import * as DatepickerStories from './datepicker.stories';
import { Datepicker as FormFieldDatepicker } from '../form-field/form-field.stories';

<Meta of={ DatepickerStories } name="Technical information" />

<Banner of={ DatepickerStories } />

<Heading label="Overview" level={ 2 } />

<Canvas of={ DatepickerStories.Overview } sourceState="none" />

<TechnicalSpecification data={ SpecificationsDatepicker } />

<Heading label="Date Formats" level={ 2 } />

<Heading label="Format" level={ 3 } />

<DatepickerFormatsTable />

To help you manipulate the right date, the component does expose two helper methods:
- `formatDate(date: Date | number | null, format: string): string`: stringify a Date to the given format (see the list above).
- `parseDate(dateStr: string | number, format: string): Date | null`: parse a string/number to return a Date object matching the format (see the list above).

<Heading label="Examples" level={ 3 } />

Different separators from the format:
<ul>
  <li>if format is `dd/mm/yyyy`, 01/02/2024</li>
  <li>if format is `yyyy-mm-dd`, 2024-02-01</li>
  <li>if format is `dd mm yyyy`, 01 02 2024</li>
</ul>

Different token from the format:
<ul>
  <li>if format is `d/m/yyyy`, 1/2/2024</li>
  <li>if format is `D/M/yyyy`, Thu/Feb/2024</li>
  <li>if format is `DD/MM/yyyy`, Thursday/February/2024</li>
  <li>if format is `DD dd MM yyyy`, Thursday 1 February 2024</li>
</ul>

<Heading label="Examples" level={ 2 } />

<Heading label="Default" level={ 3 } />

<Canvas of={ DatepickerStories.Default } sourceState="shown" />

<Heading label="Clearable" level={ 3 } />

<Canvas of={ DatepickerStories.Clearable } sourceState="shown" />

<Heading label="Dates Disabled" level={ 3 } />

<Canvas of={ DatepickerStories.DatesDisabled } sourceState="shown" />

<Heading label="Days Of Week Disabled" level={ 3 } />

<Canvas of={ DatepickerStories.DaysOfWeekDisabled } sourceState="shown" />

<Heading label="Disabled" level={ 3 } />

<Canvas of={ DatepickerStories.Disabled } sourceState="shown" />

<Heading label="Error" level={ 3 } />

<Canvas of={ DatepickerStories.Error } sourceState="shown" />

<Heading label="Format" level={ 3 } />

<Canvas of={ DatepickerStories.Format } sourceState="shown" />

<Heading label="Loading" level={ 3 } />

<Canvas of={ DatepickerStories.Loading } sourceState="shown" />

<Heading label="Locale" level={ 3 } />

<Canvas of={ DatepickerStories.Locale } sourceState="shown" />

<Heading label="Placeholder" level={ 3 } />

<Canvas of={ DatepickerStories.Placeholder } sourceState="shown" />

<Heading label="Readonly" level={ 3 } />

<Canvas of={ DatepickerStories.Readonly } sourceState="shown" />

<Heading label="Validity State" level={ 3 } />

<Canvas of={ DatepickerStories.ValidityState } source={{ transform: hideValidityStateSource }} sourceState="shown" />

<Heading label="In an ods-modal" level={ 3 } />

If the component container is defining a position context, the datepicker may not appear at the right place, or partially clipped.

In that case, you can change the component `strategy` prop to `fixed`, this way it will position itself based on the
nearest containing block (usually the viewport).

Careful though, you'll have to manage the induced layout changes as your component will no longer be rendered as part of your block but in a separate layer.

<Canvas of={ DatepickerStories.FixedContext } sourceState="shown" />

<Heading label="Included in a Form Field" level={ 3 } />

<Canvas of={ FormFieldDatepicker } sourceState="shown" />
