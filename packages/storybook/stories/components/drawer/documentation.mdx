import { Canvas, Meta } from '@storybook/blocks';
import * as DrawerStories from './drawer.stories';
import { Banner } from '../../../src/components/banner/Banner';
import { BestPractices } from '../../../src/components/bestPractices/BestPractices';
import { Heading } from '../../../src/components/heading/Heading';
import { IdentityCard } from '../../../src/components/identityCard/IdentityCard';
import { ExternalLink } from '../../../src/components/externalLink/ExternalLink';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { ATOMIC_TYPE } from '../../../src/constants/atomicDesign';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta of={ DrawerStories } name='Documentation' />

<Banner of={ DrawerStories } />

The Drawer component provides a sliding panel that reveals additional content without navigating away from the current page.

<Canvas of={ DrawerStories.Overview } sourceState='none' />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Sidenav', 'Panel'] }
              atomicType={ ATOMIC_TYPE.molecule }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/branch/5BA2ZwZaX2bzfiWwTyMpQH/ODS---UI-Kit?node-id=5488-15121&p=f&t=gPfKLQM0iEuF2FXm-0"
              githubUrl="https://github.com/ovh/design-system/tree/master/packages/ods/src/components/drawer"
              name="Drawer">
</IdentityCard>

<Heading label="Usage" level={ 2 } />

The **Drawer** component is ideal for use cases where content should be revealed in context without navigating to a new page. Common examples include:

- Side navigation menus
- Filters and settings panels
- Detail views or contextual information

<BestPractices
  dos={[
    '- Use the Drawer for complementary actions or information that need to stay connected to the current page context',
    '- Ensure the Drawer does not interfere with page content when open',
    '- Allow the Drawer to be dismissed via a clear and accessible trigger',
    '- Customize the width, height, or style to fit your layout and use case'
  ]}
  donts={[
    '- Use the Drawer for displaying purely informational content â€” prefer a Modal or Message component instead',
    '- Use more than two Drawers on the same page, as it can confuse users',
    '- Use very wide Drawers that obscure the main page content',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](components/drawer/anatomy.png "Component anatomy")

1. **Drawer**

<Heading label="Placement" level={ 2 } />

The **Drawer** can be positioned on any edge of the screen:

- **Left/Right**: Covers 100% of the page height, with a default width of 320px and a maximum width of 100% - 3rem (48px)
- **Top/Bottom**: Covers 100% of the page width, with a default height of 320px and a maximum height of 100vh - 3rem (48px)

The **Drawer** is displayed above all page content but is positioned below the Modal in terms of layering, following the z-index hierarchy defined by OVHcloud Design System. This ensures consistent stacking behavior across components.

By default, the OVHcloud Design System does not enforce whether the **Drawer** is fixed or scrollable. Integrators can configure this behavior based on their specific use case and requirements.

Be careful the placement of the drawer can be broken if you create a new <ExternalLink href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Understanding_z-index/Stacking_context" target="_blank">stacking context</ExternalLink>.
For example with a transform style or scale.

<Heading label="Behavior" level={ 2 } />

The **Drawer** supports the following interactions:

- Expansion: Triggered by interacting with a designated element, such as a button.
- Collapsing:
- By interacting with the same trigger used for expansion
- By pressing the escape key

Animation: The **Drawer** slides into view with a smooth animation (default duration: 300ms).

<Heading label="Variation" level={ 2 } />

The **Drawer** can slide in from the left, right, top, or bottom, depending on its configuration and the layout of the page.

<Heading label="Accessibility" level={ 2 } />

- **Aria attributes**: The **Drawer** reacts to the aria-expanded attribute to indicate its state
- **Focus management**:
- When expanded, focus moves inside the **Drawer** and is set to the first focusable element by default
- When collapsed, focus returns to the trigger element unless specified otherwise by the integrator

When **Drawer** is opened :
- `Escape` key will dismiss it
- `Tabulation` allows to move forward through any focusable element in the **Drawer** (e.g. action <StorybookLink kind={ REACT_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink>)
- `Shift + Tab` allows the opposite way to move backward in focusing items
