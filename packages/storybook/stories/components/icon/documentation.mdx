import { Canvas, Meta, Source } from '@storybook/blocks';
import { ODS_ICON_NAME } from '@ovhcloud/ods-components';
import { OdsIcon } from '@ovhcloud/ods-components/react';
import * as IconStories from './icon.stories';
import { Banner } from '../../../src/components/banner/Banner';
import { BestPractices } from '../../../src/components/bestPractices/BestPractices';
import { Heading } from '../../../src/components/heading/Heading';
import { IdentityCard } from '../../../src/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { ATOMIC_TYPE } from '../../../src/constants/atomicDesign';
import { ODS_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta of={ IconStories } name="Documentation" />

<Banner of={ IconStories } />

_**Icon** is a visual context used to represent a command, navigation, status or common action._

<Canvas of={ IconStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Symbol'] }
              atomicType={ ATOMIC_TYPE.quark }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=26-20213"
              githubUrl="https://github.com/ovh/design-system/tree/master/packages/ods/src/components/icon"
              name="Icon"
              relatedComponents={ [] }>
  **Icon** is a visual symbol which provides visual context thanks to its clarity and consistency.

  It is displayed as solid, in a single color.
</IdentityCard>

<Heading label="Anatomy" level={ 2 } />

![Component anatomy](components/icon/anatomy.png "Component anatomy")

<Heading label="Usage" level={ 2 } />

**Icons** enhance the usability and bring clarity to users by reducing the cognitive load.

**Icons** can be used in standalone <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } label="Button" story={ STORY.documentation } /> and can be usually associated with some sort of action.

**Icons** can be used as navigational elements as well.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Use for decorative purpose',
    '- Use the same Icon for different purposes to avoid user\'s confusion',
    '- Use similar shades of the same color for background and Icon colors',
    <span>- Baseline-align Icons when they are next to <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } /></span>,
    <span>- When Icons are next to <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } />, don't use different colors for both of them</span>,
  ]}
  dos={[
    '- Give an equivalent text as aria-name to the Icon',
    '- Assure a good contrast between the background and Icon colors',
    <span>- Center-align when Icons are next to <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } /></span>,
    <span>- When Icons are next to <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } />, use the same color for pairing them</span>,
  ]}
/>

<Heading label="Placement" level={ 2 } />

**Icons** draw attention to important information or action, so it has to be thoughtfully inserted in a page.

They can also help with the understanding of specific elements by providing a visual example.

They also can be used in other components where it is adapted for a specific purpose.

<Heading label="Behavior" level={ 2 } />

**Icons** can stand alone or be included in a <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } label="Button" story={ STORY.documentation } /> or other components depending on the usage.

<Heading label="Variation" level={ 2 } />

N/A

<Heading label="Accessibility" level={ 2 } />

The accessibility of the Icon component must be considered during its implementation.
Proper attributes should be used to ensure that icons are either perceivable by assistive technologies or correctly hidden when decorative.

<Heading label="Best practices" level={ 3 } />

<Heading label="Hiding decorative Icon" level={ 4 } />

When the Icon is purely decorative and does not provide meaningful information to the user, it should be hidden from screen readers using `aria-hidden="true"`.

Example of a decorative Icon:

<Source code={`
<ods-icon aria-hidden="true"
          name="cloud">
</ods-icon>
`}
        dark="true"
        language="html" />

<OdsIcon ariaHidden
         name={ ODS_ICON_NAME.circleCheck }
         style={{ color: 'var(--ods-color-success-500)' }} /> The Icon is ignored by screen readers and does not create unnecessary noise.

<Heading label="Providing meaningful information" level={ 4 } />

If the Icon conveys essential information, it must be accompanied by an accessible label using `aria-label`.

Example of an icon with accessible label:

<Source code={`
<ods-icon aria-label="home"
          name="home">
</ods-icon>
`}
        dark="true"
        language="html" />

<OdsIcon ariaHidden
         name={ ODS_ICON_NAME.circleCheck }
         style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce "home", ensuring users understand the Icon's meaning.

If the Icon is inside a button, prefer using `aria-label` on the button itself rather than on the icon.
See <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } label="Button" story={ STORY.documentation } /> examples.

<Heading label="Final check (for your specific implementation)" level={ 3 } />

<Heading label="Keyboard navigation tests" level={ 4 } />

Ensure that if the icon is interactive (e.g., triggers a tooltip), it is focusable and usable with a keyboard.
