import { Canvas, Meta } from '@storybook/blocks';
import * as InputStories from './input.stories';
import { Banner } from '../../../src/components/banner/Banner';
import { BestPractices } from '../../../src/components/bestPractices/BestPractices';
import { Heading } from '../../../src/components/heading/Heading';
import { IdentityCard } from '../../../src/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { ATOMIC_TYPE } from '../../../src/constants/atomicDesign';
import { ODS_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta of={ InputStories } name="Documentation" />

<Banner of={ InputStories } />

_**Input** component is an **Input** field where users can type into_

<Canvas of={ InputStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Text Input', 'Text Field'] }
              atomicType={ ATOMIC_TYPE.atom }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=93-22570"
              githubUrl="https://github.com/ovh/design-system/tree/master/packages/ods/src/components/input"
              name="Input"
              relatedComponents={ [{ name: 'Button' }, { name: 'Form Field', subtitle: 'Form elements' }] }>
  An **Input** is used to allow the user to enter a single line information in a field.
</IdentityCard>

<Heading label="Anatomy" level={ 2 } />

![Component anatomy](components/input/anatomy.png "Component anatomy")

1. A **field**: a container where the user can type in
2. A **placeholder**: provides hints or example of what to type
3. **Inner content**: displays the content typed by the field type (e.g.: `email`, `number`, `password`, `search`, `text`, `time`, `url`)
4. Clickable icon <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink>, used for secondary extra actions such as clear the field
5. Clickable icon <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } story={ STORY.documentation }>Button</StorybookLink>, used for extra actions such as toggle the field content visibility or trigger a search

<Heading label="Usage" level={ 2 } />

An **Input** is used to type a free-form short text in a field. It is often used within a Form Field component that adds its label.

It is commonly used in a form, such as asking the user their name or email address, data entered can be text or numbers.

The **Input** component can be used in addition with an **Autocomplete**.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don’t use an Input for multi-line content, use a Textarea instead',
    '- Don’t use an Input when users must choose from a predefined set of answers. Prefer Select, Combobox, or Radio',
    '- Don’t leave an Input without a label',
    '- Don’t overload the Input with multiple embedded actions (e.g., clear + search + toggle) since it creates visual clutter',
    '- Don’t use an Input that is inappropriately sized for its content',
  ]}
  dos={[
    '- Always pair the Input with a clear and explicit label, using the Form Field component for example',
    '- Provide a helper message or validation feedback below the Input when appropriate (e.g., expected format or error state)',
    '- Use the clearable button option when it helps users reset the field quickly and efficiently',
    '- Use the toggle mask button for sensitive inputs to let users show or hide the content',
    '- Include a search button within the Input if a specific action is expected (e.g., triggering a search)',
    '- Choose the appropriate input type (email, password, search, etc.) to support native validation',
  ]}
/>

<Heading label="Placement" level={ 2 } />

**Input** should be vertically aligned with other form components on a same page.

**Inputs** that are strongly related in a form can be grouped. This group can flow horizontally left to right and/or vertically top to bottom.

<Heading label="Behavior" level={ 2 } />

**Inputs** can be hovered, focused and clicked / triggered. They can be disabled or readonly as well.

The user can start typing in the **Input** after clicking or focusing on the field container.

A clearable button can be displayed within the **Input** to clear its content. This button becomes visible as soon as the user types the first character and removes all content when clicked.

A toggle mask button can be displayed within the **Input** to toggle the visibility of its content, such as revealing or hiding a password in a masked input.

A search button can be displayed within the **Input** to trigger a specific action, such as performing a search.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

The **Input** field receives focus as part of the natural tab order.

If a clear button is present, it becomes focusable immediately after the **Input** field.

If a toggle mask button (show/hide password) is present, it becomes focusable after the clear button.

If a search button is present, it becomes focusable after the other **Input** action buttons.

If the **Input** field is read-only, it can still receive focus but cannot be edited.

If the **Input** is disabled, it is  skipped in the tab order and cannot be edited.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Tab` moves focus forward.

Pressing `Shift` + `Tab` moves focus backward to the previous interactive element.

Typing any character while the **Input** field is focused enters text into the field.

Pressing `Backspace` deletes the character preceding the cursor.

Pressing `Enter` while a clear, toggle mask, or search button is focused triggers the corresponding action.
