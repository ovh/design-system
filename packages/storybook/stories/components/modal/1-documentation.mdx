import { Canvas, Markdown, Meta } from '@storybook/blocks';
import { Banner } from '../../banner';
import * as ModalStories from './modal.stories';
import { OdsIcon } from '@ovhcloud/ods-components/react';
import { ODS_ICON_NAME } from '@ovhcloud/ods-components';

<Meta of={ ModalStories } name='Documentation' />

<Banner of={ ModalStories } />

_A **Modal** component is used to overlay with important content the main view of a site and block interactions with it._

<Canvas of={ ModalStories.Overview } sourceState='none' />

## Overview
<div>
  <div id='description'>
    A **Modal** is used to provide some information to users that needs a response from them.

    While a **Modal** is triggered, there is no interaction possible on the page that is overlaid so users have to
    dismiss or click on an action [**Button**](?path=/docs/ods-components-actions-button--documentation) to proceed
    further.
  </div>
  <table>
    <tbody>
    <tr>
      <th scope="row">Name</th>
      <td><strong>Modal</strong></td>
    </tr>
    <tr>
      <th scope="row">Also known as</th>
      <td><em>Dialog, Alert Dialog, Confirm Dialog</em></td>
    </tr>
    <tr>
      <th scope="row">Atomic type</th>
      <td>
        <a href='https://atomicdesign.bradfrost.com/chapter-2/#molecules'>Molecule<OdsIcon
          name={ ODS_ICON_NAME.externalLink }
          style={ { fontSize: '.7rem', paddingLeft: '.3rem', paddingRight: '.2rem' } }></OdsIcon></a>
      </td>
    </tr>
    <tr>
      <th scope="row">Related component(s)</th>
      <td>
        [**Text**](?path=/docs/ods-components-content-tag--documentation),
        [**Button**](?path=/docs/ods-components-actions-button--documentation)
      </td>
    </tr>
    <tr>
      <th scope="row">Links</th>
      <td>
        <a href='https://www.figma.com/proto/tIKzHa5KvHHyosgIgyBswB/Design-Tokens'>Design<OdsIcon
          name={ ODS_ICON_NAME.externalLink }
          style={ { fontSize: '.7rem', paddingLeft: '.3rem', paddingRight: '.2rem' } }></OdsIcon></a><br />
        <a href='https://github.com/ovh/design-system/tree/master/packages/components/src/modal'>Github<OdsIcon
          name={ ODS_ICON_NAME.externalLink }
          style={ { fontSize: '.7rem', paddingLeft: '.3rem', paddingRight: '.2rem' } }></OdsIcon></a>
      </td>
    </tr>
    </tbody>
  </table>
</div>

## Anatomy

![Component anatomy](components/modal/anatomy.png "Component anatomy")

1. **Backdrop overlay** to obscure the on-page content
2. **Container**
3. **Content** container, filled with [**Text**](?path=/docs/ods-components-content-tag--documentation) or other read-only content, depending on the usage
4. **Action Buttons** container, to complete or cancel the **Modal** task
5. **`close` icon Button** to close the **Modal** without submitting any data

## Usage

**Modals** are used in different cases:
- alerting users about something that requires their agreement
- confirming a user decision
- notifying the user of an important information

There are five different subtypes of **Modals** to inform users that a problem requires immediate response from them so the process can continue, depending on the usage:
- **Neutral**: reserved for standard alerting
- **Information**: provides information to users in context
- **Success**: reserved to provide a static persistent success information
- **Warning**: reserved for **Modals** that need the user attention and acknowledgment but might not cause errors
- **Critical**: reserved for errors, malfunctions, as well as critical issues

They can be dismissable or not.

### Dos & Don'ts
<Markdown>
  { `
| ✅ Do                                                                                                                                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| - Use a **Modal** to display information the user needs to respond to                                                                                                          |
| - Use a **Modal** to ask a confirmation from the user before proceeding                                                                                                        |
| - Use **Modals** sparingly since they are disruptive and stop users in their current task                                                                                      |
| - Handle closing the **Modal** when the cancel action [**Button**](?path=/docs/ods-components-actions-button--documentation) is clicked                                        |
| - Use scrolling only when it is absolutely needed                                                                                                                              |
` }
</Markdown>
<Markdown>
  { `
| ❌ Don't                                                                                                                                                                             |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------    |
| - Trigger a **Modal** as a result of a first **Modal** actions                                                                                                                      |
| - Use a **Modal** if the informational content is very long within a **Modal**: consider alternatives if that is your case                                                          |
| - Use a **Modal** only to notify users about a successful completion of their actions: use [**Message**](?path=/docs/ods-components-user-feedback-message--documentation) component |
` }
</Markdown>

## Placement

When a **Modal** opening is triggered, it is displayed with a position aligned both horizontally and vertically within the viewport.

**Modal** takes up 100% of the viewport width, with a maximum width of 512px.

## Behavior

### Overlay

A background overlay with opacity is displayed on the page to avoid distraction and help users to focus on the **Modal** content.

When the **Modal** opens, an event is triggered.

An animation with the ease-in and out effect applies on opening.

### Closing

A **Modal** is dismissed by clicking on the close icon button.

Dismissing a **Modal** means that it will be closed without submitting any data and the user won't proceed further.

A **Modal** will be successfully closed only once the required action or response has been completed by the user, meaning that the task is completed so the user will proceed further.

Closing the **Modal** triggers an event.

The hidden overflow behaviour is removed whenever the **Modal** get closed.

### Scrolling

When necessary, depending on the viewport height and the **Modal** content, the user can scroll vertically with the header and the action [**Button**](?path=/docs/ods-components-actions-button--documentation)) remaining in place.

## Variants

### Colors

- **Neutral**: providing general information or updates without implying any particular urgency or emotion.
- **Success**: indicating that an action has been successfully completed, offering positive reinforcement to the user.
- **Warning**: alerting users to potential issues or risks, encouraging caution and preventive measures.
- **Critical**: highlighting urgent and severe issues that require immediate attention and action to prevent significant negative outcomes.

## Accessibility

When displayed, the user is directly focused on the **Modal** itself.

When **Modal** is opened :
- `Escape` key will dismiss it (if dismissible)
- `Tabulation` permits to move forward, first to the closing icon, then through any focusable element in the **Modal** (e.g. action [**Button**](?path=/docs/ods-components-actions-button--documentation)))
- `Shift + Tab` permits the opposite way to move backward in focusing items

Focus is trapped inside the **Modal** scope and inner elements when active.
