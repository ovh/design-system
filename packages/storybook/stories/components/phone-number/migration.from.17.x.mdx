import { Badge } from '@ovhcloud/ods-react';
import { Meta, Source } from '@storybook/blocks';
import { Table } from '@storybook/components';
import * as PhoneNumberStories from './phone-number.stories';
import { Heading } from '../../../src/components/heading/Heading';

<Meta of={ PhoneNumberStories } name="Migration From 17.x" />

<Heading label="PhoneNumber - migrate from v17 to v18" level={ 1 } />

<Heading label="List of country changes" level={ 2 } />

The list of available iso codes have been updated, the following are no longer available:

<Badge color="critical" size="sm">Removed</Badge>

<Table>
  <thead>
    <tr>
      <td>Iso Code</td>
      <td>Country Name</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>aq</td>
      <td>Antarctica</td>
    </tr>
    <tr>
      <td>bq</td>
      <td>Bonaire, Sint Eustatius and Saba</td>
    </tr>
    <tr>
      <td>bv</td>
      <td>Bouvet Island</td>
    </tr>
    <tr>
      <td>gf</td>
      <td>French Guiana</td>
    </tr>
    <tr>
      <td>gp</td>
      <td>Guadeloupe</td>
    </tr>
    <tr>
      <td>gs</td>
      <td>South Georgia and the South Sandwich Islands</td>
    </tr>
    <tr>
      <td>hm</td>
      <td>Heard Island and McDonald Islands</td>
    </tr>
    <tr>
      <td>io</td>
      <td>British Indian Ocean Territory</td>
    </tr>
    <tr>
      <td>pm</td>
      <td>Saint Pierre and Miquelon</td>
    </tr>
    <tr>
      <td>pn</td>
      <td>Pitcairn</td>
    </tr>
    <tr>
      <td>re</td>
      <td>RÃ©union</td>
    </tr>
    <tr>
      <td>sj</td>
      <td>Svalbard and Jan Mayen</td>
    </tr>
    <tr>
      <td>sx</td>
      <td>Sint Maarten</td>
    </tr>
    <tr>
      <td>tf</td>
      <td>French Southern Territories</td>
    </tr>
    <tr>
      <td>um</td>
      <td>United States Minor Outlying Islands</td>
    </tr>
  </tbody>
</Table>

<Heading label="Attributes changes" level={ 2 } />

`ariaLabel` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

You can use the new `ariaLabel` attribute to apply the aria label value on the input.

`ariaLabelledby` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

You can use the new `araiLabelledby` attribute to apply the aria labelled-by value on the input.

`clearable` <Badge color="information" size="sm">Updated</Badge>

Has been updated.

You can use the new `isClearable` attribute to obtain the same behavior.

`disabled` <Badge color="information" size="sm">Updated</Badge>

Has been updated.

You can use the new `isDisabled` attribute to obtain the same behavior.

`error` <Badge color="information" size="sm">Updated</Badge>

Has been updated.

You can use the new `hasError` attribute to obtain the same behavior.

`isLoading` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

You can use the new `isLoading` attribute to apply the loading state on the input.

`isReadonly` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

You can use the new `isReadonly` attribute to apply the readonly state on the input and the select (if you have any countries set).

`isRequired` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

You can use the new `isRequired` attribute to apply the required state on the input.

`pattern` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

You can use the new `pattern` attribute to apply the required pattern on the input.

Do note that the phone-number component already provides a format validation, that can accepts a lot of different usage per country.

For example, those are all valid french phone number: `0123456789`, `+33 123456789`, `01.23.45.67.89`, `+331 23-45-67-89`.

We do advise to not enforce any pattern on this component to let the user type as he prefers.

The final value will be formatted the same way in any case (all examples above will return the formatted value `+33123456789`);

<Heading label="Migration examples" level={ 2 } />

Clearable phone number:

<Source code={`
<osds-phone-number clearable>
</osds-phone-number>

<!-- is now -->

<ods-phone-number is-clearable>
</ods-phone-number>
`}
        dark="true"
        language="html" />

Disabled phone number:

<Source code={`
<osds-phone-number disabled>
</osds-phone-number>

<!-- is now -->

<ods-phone-number is-disabled>
</ods-phone-number>
`}
        dark="true"
        language="html" />

Errored phone number:

<Source code={`
<osds-phone-number error>
</osds-phone-number>

<!-- is now -->

<ods-phone-number has-error>
</ods-phone-number>
`}
        dark="true"
        language="html" />
