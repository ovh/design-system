import { Canvas, Meta } from '@storybook/blocks';
import * as PopoverStories from './popover.stories';
import { Banner } from '../../../src/components/banner/Banner';
import { BestPractices } from '../../../src/components/bestPractices/BestPractices';
import { Heading } from '../../../src/components/heading/Heading';
import { IdentityCard } from '../../../src/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { ATOMIC_TYPE } from '../../../src/constants/atomicDesign';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta of={ PopoverStories } name="Documentation" />

<Banner of={ PopoverStories } />

_**Popover** component is triggered by click and is used to provide additional information to the user in a new temporary surface that overlays the page_

<Canvas of={ PopoverStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Complex Tooltip'] }
              atomicType={ ATOMIC_TYPE.atom }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=49-8447"
              githubUrl="https://github.com/ovh/design-system/tree/master/packages/ods/src/components/popover"
              name="Popover">
  A **Popover** will provide additional information to the user in a clear and concise way.

  It is commonly used to appear by click, thus crucial information should not be displayed in the **Popover**.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

A **Popover** is used to provide an explanation for a user interface element.

It can include interactive elements such as a button or a link.

<Heading label="Tooltip vs Popover" level={ 3 } />

- Both components look similar but a <StorybookLink kind={ REACT_COMPONENTS_TITLE.tooltip } story={ STORY.documentation }>Tooltip</StorybookLink> is displayed on hover and focus while **Popover** is triggered by click.
- Tooltips are commonly used for shorter explanations, while longer text / complex UIs would suit a popover better.
- Use a popover when you need to insert interactive elements such as Button.
- A popover can be dismissed if an action button allows it.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t place critical or mandatory information inside a popover. Users may miss it since it\'s only revealed on click',
    '- Don\'t overload a popover with rich content like images, videos, or large interactive components. Use a Modal or Drawer instead',
    '- Don\'t trigger a popover from non-obvious elements, the interactive element should clearly indicate it controls a popover',
    '- Don\'t rely on popovers for persistent content since they\'re meant to be transient and dismissible',
    '- Don\'t use a popover on elements that are already part of another complex interaction',
  ]}
  dos={[
    '- Use a popover to display contextual information or options that are secondary to the main task',
    '- Prefer a popover over a tooltip when the content is longer, interactive, or requires formatting (but keep it focused)',
    '- Write a popover content using complete sentences',
    '- Ensure the popover is positioned clearly and does not overlap with its trigger element',
    '- Use a popover for lightweight content such as field explanations, secondary actions',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

![Component anatomy](components/popover/anatomy.png "Component anatomy")

1. **Popover**
2. **Content**
3. **Carret tip** - optional
4. **Trigger**

<Heading label="Placement" level={ 2 } />

**Popover** can be set in a certain position by default around its trigger.

**Popover** has automatic positioning feature. It can detect the edge of the browser so the container always stays visible on a page.

<Heading label="Behavior" level={ 2 } />

By default, a **Popover** is hidden to the user.

It triggers when the user clicks on the **Popover**'s trigger element such as a button.

The **Popover** can be closed or dismissed by clicking anywhere on the page outside the **Popover**'s container.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

Depending on the **Popover** trigger used (e.g., a button or a link), refer to that component's documentation for its keyboard interaction.

When the **Popover** is opened, it gains focus automatically. Focus remains within the **Popover** until it is closed.

Closing it returns focus to the trigger element.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing `Escape` closes the currently opened **Popover**.

Pressing `Tab` moves focus forward through the focusable elements inside the **Popover**.

Pressing `Shift` + `Tab` moves focus backward within the **Popover**.
