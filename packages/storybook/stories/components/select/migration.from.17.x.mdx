import { Badge } from '@ovhcloud/ods-react';
import { Meta, Source } from '@storybook/blocks';
import * as SelectStories from './select.stories';
import { Heading } from '../../../src/components/heading/Heading';

<Meta of={ SelectStories } name="Migration v17 to v18" />

<Heading label="Select - migrate from v17 to v18" level={ 1 } />

<Heading label="Usage changes" level={ 2 } />

Select component has been entirely reworked, there is now only one component `ods-select`
(no more `osds-select-option` and `osds-select-group`).

This component expects the same native children as a classic `select` element (option, optgroup).

Here is an example of the previous declaration:

<Source code={`
<osds-select>
  <span slot="placeholder">Select a country</span>
  <osds-select-group>Europe</osds-select-group>
  <osds-select-option value="fr">France</osds-select-option>
  <osds-select-option value="it">Italy</osds-select-option>
  <osds-select-option value="de">Germany</osds-select-option>
</osds-select>
`}
        dark="true"
        language="html" />

The same result would now be achieved using:

<Source code={`
<ods-select placeholder="Select a country">
  <optgroup label="Europe">
    <option value="fr">France</option>
    <option value="it">Italy</option>
    <option value="de">Germany</option>
  </optgroup>
</ods-select>
`}
        dark="true"
        language="html" />

<Heading label="Attributes changes" level={ 2 } />

`allowMultiple` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

Set this to true to allow multiple selection in the select.

`customRenderer` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

You can use this to customize the rendering of some of the select elements.

`color ` <Badge color="critical" size="sm">Removed</Badge>

Has been removed.

Form components does not provide color variant anymore.

`disabled` <Badge color="information" size="sm">Updated</Badge>

Has been updated.

You can use the new `isDisabled` attribute to obtain the same behavior.

`error` <Badge color="information" size="sm">Updated</Badge>

Has been updated.

You can use the new `hasError` attribute to obtain the same behavior.

`inline` <Badge color="critical" size="sm">Removed</Badge>

Has been removed.

Select now always take the size of its container, this ensure consistency between the select control and the option list.

If you need to set a specific width, you can do by adding a CSS class on the webcomponent directly.

`multipleSelectionLabel` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

Define the label displayed before the selection count in the select.
Only relevant if `allowMultiple` is set to true.

`opened ` <Badge color="critical" size="sm">Removed</Badge>

Has been removed.

You can use the webcomponent `open` / `close` method if you need to update the select state programmatically.

`placeholder` <Badge color="success" size="sm">New</Badge>

New attribute (optional).

Use this if you want to display a placeholder text when no value is yet selected.

`required` <Badge color="information" size="sm">Updated</Badge>

Has been updated.

You can use the new `isRequired` attribute to obtain the same behavior.

`size` <Badge color="critical" size="sm">Removed</Badge>

Has been removed.

This attribute was not used, as there was only one single possible value.

<Heading label="Migration examples" level={ 2 } />

Default select:

<Source code={`
<osds-select>
  <osds-select-option value="fr">France</osds-select-option>
  <osds-select-option value="it">Italy</osds-select-option>
  <osds-select-option value="de">Germany</osds-select-option>
</osds-select>

<!-- is now -->

<ods-select>
  <option value="fr">France</option>
  <option value="it">Italy</option>
  <option value="de">Germany</option>
</ods-select>
`}
        dark="true"
        language="html" />

Disabled select:

<Source code={`
<osds-select disabled>
  <osds-select-option value="fr">France</osds-select-option>
  <osds-select-option value="it">Italy</osds-select-option>
  <osds-select-option value="de">Germany</osds-select-option>
</osds-select>

<!-- is now -->

<ods-select is-disabled>
  <option value="fr">France</option>
  <option value="it">Italy</option>
  <option value="de">Germany</option>
</ods-select>
`}
        dark="true"
        language="html" />

Error select:

<Source code={`
<osds-select error>
  <osds-select-option value="fr">France</osds-select-option>
  <osds-select-option value="it">Italy</osds-select-option>
  <osds-select-option value="de">Germany</osds-select-option>
</osds-select>

<!-- is now -->

<ods-select has-error>
  <option value="fr">France</option>
  <option value="it">Italy</option>
  <option value="de">Germany</option>
</ods-select>
`}
        dark="true"
        language="html" />

Placeholder:

<Source code={`
<osds-select>
  <span slot="placeholder">Select a country</span>
  <osds-select-option value="fr">France</osds-select-option>
  <osds-select-option value="it">Italy</osds-select-option>
  <osds-select-option value="de">Germany</osds-select-option>
</osds-select>

<!-- is now -->

<ods-select placeholder="Select a country">
  <option value="fr">France</option>
  <option value="it">Italy</option>
  <option value="de">Germany</option>
</ods-select>
`}
        dark="true"
        language="html" />

Optgroup:

<Source code={`
<osds-select>
  <osds-select-group>Europe</osds-select-group>
  <osds-select-option value="fr">France</osds-select-option>
  <osds-select-option value="it">Italy</osds-select-option>
  <osds-select-option value="de">Germany</osds-select-option>
</osds-select>

<!-- is now -->

<ods-select>
  <optgroup label="Europe">
    <option value="fr">France</option>
    <option value="it">Italy</option>
    <option value="de">Germany</option>
  </optgroup>
</ods-select>
`}
        dark="true"
        language="html" />

Required select:

<Source code={`
<osds-select required>
  <osds-select-option value="fr">France</osds-select-option>
  <osds-select-option value="it">Italy</osds-select-option>
  <osds-select-option value="de">Germany</osds-select-option>
</osds-select>

<!-- is now -->

<ods-select is-required>
  <option value="fr">France</option>
  <option value="it">Italy</option>
  <option value="de">Germany</option>
</ods-select>
`}
        dark="true"
        language="html" />
