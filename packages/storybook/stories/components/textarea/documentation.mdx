import { ICON_NAME, Icon, Kbd } from '@ovhcloud/ods-react';
import { Meta } from '@storybook/blocks';
import * as TextareaStories from './textarea.stories';
import { Anatomy } from '../../../src/components/anatomy/Anatomy';
import { Banner } from '../../../src/components/banner/Banner';
import { BestPractices } from '../../../src/components/bestPractices/BestPractices';
import { Canvas } from '../../../src/components/canvas/Canvas';
import { Heading } from '../../../src/components/heading/Heading';
import { IdentityCard } from '../../../src/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { HOME_TITLE } from '../../../src/constants/meta';

<Meta of={ TextareaStories } name='Documentation' />

<Banner of={ TextareaStories } />

_A **Textarea** component allows users to input and edit multiple lines of text._

<Canvas of={ TextareaStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Text Box'] }
              extraLinks={ [<StorybookLink title={ HOME_TITLE.formGuidelines }>Form Guidelines</StorybookLink>] }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=53-11147"
              githubUrl="https://github.com/ovh/design-system/tree/master/packages/ods-react/src/components/textarea"
              name="Textarea">
  The **Textarea** component is used to capture and display multi-line text input from users.

  It is typically used in forms where users need to provide detailed information, comments, or descriptions.
</IdentityCard>

<Heading label="Usage" level={ 2 } />

Use the **Textarea** component to allow users to enter multi-line text in forms, such as comments, messages, descriptions, or other detailed information.

Ensure that the **Textarea** is appropriately sized for the expected input and provides clear guidance on what information is needed.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Don\'t use a Textarea for short, single-line inputs. Use an Input instead',
    '- Don\'t rely on a placeholder as a substitute for a proper label since it disappears once the user starts typing',
    '- Don\'t disable resizing if users are expected to write long-form content and might need a larger view',
  ]}
  dos={[
    '- Use a Textarea for inputs that may span multiple lines, such as comments, descriptions, or messages',
    '- Always pair the Textarea with a label to clearly explain what is expected',
    '- Use helper text to provide guidance or clarify formatting when needed',
    '- Allow scrolling or resizing if users are likely to enter long text (based on use case)',
    '- Use Textarea for a text longer than a single line',
  ]}
/>

<Heading label="Best Practices in Context" level={ 3 } />

<Anatomy src="components/textarea/anatomy.png" />

1. **Textarea**
2. **Placeholder or textarea text**
3. **Resize handler** - optional

<Heading label="Placement" level={ 2 } />

**Textarea** should be vertically aligned with other form components on a same page.

<Heading label="Behavior" level={ 2 } />

**Textarea** can be hovered, focused, disabled, or set to read-only.

When disabled, the component cannot be focused or interacted with.

If the user types more text than the **Textarea** can display, a scrollbar appears to allow scrolling.

The **Textarea** supports native browser resizing, but it is not enabled by default.

<Heading label="Navigation" level={ 2 } />

<Heading label="Focus Management" level={ 3 } />

When the **Textarea** is enabled, it can receive focus via keyboard interaction.

A disabled **Textarea** cannot receive focus.

A read-only **Textarea** can receive focus, allowing users to scroll and select content, but its content cannot be modified.

<Heading label="General Keyboard Shortcuts" level={ 3 } />

Pressing <Kbd>Tab</Kbd> moves focus to the **Textarea**.

Pressing <Kbd>Shift</Kbd> + <Kbd>Tab</Kbd> moves focus to the previous focusable element.

Pressing <Kbd>Enter</Kbd> creates a new line within the **Textarea**.

Pressing <Kbd>Arrow</Kbd> keys moves the caret within the text content.

Pressing <Kbd>Ctrl</Kbd> + <Kbd>Arrow Left</Kbd> / <Kbd>Arrow Right</Kbd> (or <Kbd>Option</Kbd> + <Kbd>Arrow Left</Kbd> / <Kbd>Arrow Right</Kbd> on macOS) moves the caret by word.

Pressing <Kbd>Home</Kbd> / <Kbd>End</Kbd> (or <Kbd>Cmd</Kbd>+ <Kbd>Arrow</Kbd> keys on macOS) moves the caret to the beginning or end of the line.

Pressing <Kbd>Page Up</Kbd> / <Kbd>Page Down</Kbd> scrolls through the content if it's longer than the visible area.

<Heading label="Accessibility" level={ 2 } />

To ensure proper accessibility, it must be correctly labeled, and provide live updates if a character limit is set.

<Heading label="Always provide an explicit label" level={ 3 } />

Every **Textarea** must have a clear and explicit label to ensure that users (especially screen reader users) understand its purpose,
using either **FormField** or a native label tag.

<Canvas of={ TextareaStories.AccessibilityFormField } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label and the field.

<Heading label="Linking helper text" level={ 3 } />

<Canvas of={ TextareaStories.AccessibilityDescribedBy } sourceState="shown" />

<Icon name={ ICON_NAME.circleCheck }
      style={{ color: 'var(--ods-color-success-500)' }} /> Screen readers will announce the label, the field and the helper text.
