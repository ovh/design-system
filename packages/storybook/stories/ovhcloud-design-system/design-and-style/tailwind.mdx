import { ICON_NAME, Message, MessageBody, MessageIcon } from '@ovhcloud/ods-react';
import { Meta, Source } from '@storybook/blocks';
import { ExternalLink } from '../../../src/components/externalLink/ExternalLink';
import { Heading } from '../../../src/components/heading/Heading';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { HOME_TITLE } from '../../../src/constants/meta';

<Meta
  tags={ ['new'] }
  title="OVHcloud Design System/Design and Style/Tailwind CSS Integration" />

<Heading label="Tailwind CSS Integration" level={ 1 } />

This guide covers how to integrate Tailwind CSS with the OVHcloud Design System (ODS) for both v3 and v4 versions.

Tailwind CSS is a utility-first CSS framework that can be integrated with ODS components and design tokens, but it is not mandatory as ODS is not based on Tailwind.

<Message dismissible={false}>
  <MessageIcon name={ICON_NAME.circleInfo} />
  <MessageBody>
    Technically, you don't need any configuration to make ODS work with Tailwind.
    These guides are here to add some auto-completion and best practices when using Tailwind,
    but you can directly use the design tokens right out of the box without any additional configuration.
  </MessageBody>
</Message>

<Heading label="Tailwind CSS v3 Configuration" level={ 2 } />

For Tailwind CSS v3, create a `tailwind.config.js` which contains a remapping of ODS variables:
<Source code={`
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      borderRadius: {
        'ods-border-radius-xs': 'var(--ods-border-radius-xs)',
        'ods-border-radius-sm': 'var(--ods-border-radius-sm)',
        'ods-border-radius-md': 'var(--ods-border-radius-md)',
        'ods-border-radius-lg': 'var(--ods-border-radius-lg)',
      },
      colors: {
        'ods-color-primary-500': 'var(--ods-color-primary-500)',
        'ods-color-success-500': 'var(--ods-color-success-500)',
        'ods-color-warning-700': 'var(--ods-color-warning-700)',
      },
      fontFamily: {
        'ods-font-family-default': 'var(--ods-font-family-default)',
      },
    },
  },
  plugins: [],
}

`} dark language="js" />

<Heading label="Integration with IDEs" level={ 3 } />
<Heading label="Integration with JetBrains" level={ 4 } />
This should work straight out of the box.

<Heading label="Integration with VSCode" level={ 4 } />
Create a `./.vscode/tailwind.json` containing the classes you want to expose for autocompletion.
<Source code={`
{
    "customClasses": [
      "ods-color-primary-500",
      "ods-color-success-500",
      "ods-color-critical-700",
      "ods-border-radius-xs",
      "ods-border-radius-sm",
      "ods-border-radius-md",
      "ods-border-radius-lg",
      "ods-font-family-default",
    ]
  }
`} dark language="json" />

<Heading label="Tailwind CSS v4 Configuration" level={ 2 } />
For Tailwind CSS v4, create a CSS file using the <ExternalLink href="https://tailwindcss.com/docs/adding-custom-styles">@theme</ExternalLink> property:

<Source code={`
@theme {
  --radius-ods-xs: var(--ods-border-radius-xs);
  --radius-ods-sm: var(--ods-border-radius-sm);
  --radius-ods-md: var(--ods-border-radius-md);
  --radius-ods-lg: var(--ods-border-radius-lg);

  --color-ods-primary: var(--ods-color-primary-500);
  --color-ods-success: var(--ods-color-success-500);
  --color-ods-critical: var(--ods-color-critical-700);

  --font-ods-default: var(--ods-font-family-default);
}
`}
        dark
        language="css" />

Then import that file after the main ODS theme and Tailwind CSS.
In order for you to properly be able to overwrite the ODS theme, you need to redefine the order of the CSS layers.
Base is optional.
<Source code={`

// index.css

@layer theme, base, components, ods-quarks, ods-atoms, ods-molecules, ods-organisms, molecules, utilities;
@import "tailwindcss";
@import '@ovhcloud/ods-themes/default';
@import './ods-tailwind.css';
`}
        dark
        language="typescript" />

<Heading label="Usage Examples" level={ 2 } />

You can use Tailwind utilities alongside ODS components:

<Source code={`
import { Button } from '@ovhcloud/ods-react';

function MyComponent() {
  return (
  <div>
      <p className="text-critical">Click on the button!</p>
      <Button className="bg-color-primary">Click me!</Button>
  </div>
  );
}
`}
        dark="true"
        language="tsx" />

<Heading label="Best Practices & Troubleshooting" level={ 2 } />

<Heading label="Color Usage" level={ 3 } />

- Use semantic color names (e.g., `ods-primary-500`, `ods-success-200`) instead of generic colors
- **Issue**: Color classes not working? Verify that the Tailwind config includes the ODS color mappings and ensure the content paths include your component files.

<Heading label="Spacing and Layout" level={ 3 } />

- Use ODS border radius tokens (`rounded-ods-sm`, `rounded-ods-md`, etc.)
- Leverage ODS form element heights for consistent input sizing
- **Issue**: CSS variables not loading? Ensure `@ovhcloud/ods-themes` is imported before Tailwind and check that the theme is properly initialized in your app.

<Heading label="Typography" level={ 3 } />

- Use the ODS font family (`font-ods` for body text, `font-ods-code` for code)
- Apply semantic text colors (`text-ods-text`, `text-ods-heading`)
- Maintain proper contrast ratios with ODS color combinations

<Heading label="Component Integration" level={ 3 } />

- ODS components can be styled with Tailwind utilities using the `className` prop
- Avoid overriding core ODS component styles unless necessary
- Use Tailwind for layout and positioning, ODS for component behavior
- **Issue**: Responsive breakpoints not working? Confirm that the ODS breakpoint variables are properly defined and check that the screen configuration in Tailwind config is correct.

<Heading label="Resources" level={ 2 } />

- <ExternalLink href="https://tailwindcss.com/docs">Tailwind CSS Documentation</ExternalLink>
- <ExternalLink href="https://tailwindcss.com/docs/upgrade-guide">Tailwind v4 Migration Guide</ExternalLink>
- <StorybookLink title={ HOME_TITLE.getStarted }>ODS Get Started Guide</StorybookLink>
- <StorybookLink title={ HOME_TITLE.designTokens }>ODS Design Tokens</StorybookLink>
