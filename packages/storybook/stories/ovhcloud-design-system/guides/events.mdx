import { OdsLink } from '@ovhcloud/ods-components/react';
import { Meta, Source } from '@storybook/blocks';
import { Heading } from '../../../src/components/heading/Heading';

<Meta title="OVHcloud Design System/Guides/Using Events" />

<Heading label="Using Events" level={ 1 } />

Some ODS components are emitting <OdsLink href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent" label="Custom Events" target="_blank" />.

Those events behave the same as native Javascript events, thus they can be used the same way using
<OdsLink href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener" label="Event Listeners" target="_blank" />.

Example for an `ods-input`:

<Source code={`
<ods-input id="my-input" name="my-input">
</ods-input>

<script>
  const inputElement = document.querySelector('#my-input');

  inputElement.addEventListener('odsChange', (event) => {
    console.log(event.detail);
  });
</script>
`}
        dark="true"
        language="html" />

Custom event may contains information, depending on the event and the component, those are contained in the `detail` property of the event.

The corresponding TS type is available with all information regarding the event and its details.

Example for an `ods-input`:

<Source code={`
import type {
  OdsInputChangeEvent, // the CustomEvent interface
  OdsInputChangeEventDetail, // the CustomEvent detail interface
} from '@ovhcloud/ods-components';
`}
        dark="true"
        language="typescript" />

<Heading label="React handlers" level={ 2 } />

Like native events, an handler is available for each ODS React component events.

Naming use the same transformation as native events: `on<Event>`.

Example for an `odsInput`:

<Source code={`
import type { OdsInputChangeEvent } from '@ovhcloud/ods-components';
import { OdsInput } from '@ovhcloud/ods-components/react';

const MyComponent = () => {
  return (
    <OdsInput name="my-input"
              onOdsChange={ (event: OdsInputChangeEvent) => {
                console.log(event.detail);
              }} />
  );
};
`}
        dark="true"
        language="tsx" />
