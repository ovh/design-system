import { Meta, Source } from '@storybook/blocks';
import { ICON_NAME, MESSAGE_COLOR, Message, MessageBody, MessageIcon, Table } from '@ovhcloud/ods-react';
import { ExternalLink } from '../../../src/components/externalLink/ExternalLink';
import { Heading } from '../../../src/components/heading/Heading';
import { OdsLocaleList } from '../../../src/components/odsLocaleList/OdsLocaleList';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { REACT_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta 
  tags={ ['new'] }
  title="OVHcloud Design System/Guides/Fonts" />

<Heading label="Fonts" level={1} />

<Heading label="Available fonts" level={2} />

There are 3 different fonts exposed by ODS: one for icons (ODS Icon) and two fonts for the text (Source Sans Pro and Source Code Pro).

Both text font files are available in font weights going from 200 to 900, in regular and italic for latin and latin-ext unicode blocks (latin-ext is required to display polish correctly).

<Table>
  <thead>
    <tr>
      <th scope="col">Filename</th>
      <th scope="col">Font</th>
      <th scope="col">Kind</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>ods-icon/icomoon/icomoon.woff</th>
      <td style={{ textAlign: 'left' }}>ODS Icon</td>
      <td style={{ textAlign: 'left' }}></td>
    </tr>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>source-sans-pro/woff2/source-sans-pro-regular.woff2</th>
      <td style={{ textAlign: 'left' }}>Source Sans Pro</td>
      <td style={{ textAlign: 'left' }}>regular / latin</td>
    </tr>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>source-sans-pro/woff2/source-sans-pro-italic.woff2</th>
      <td style={{ textAlign: 'left' }}>Source Sans Pro</td>
      <td style={{ textAlign: 'left' }}>italic / latin</td>
    </tr>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>source-sans-pro/woff2/source-sans-pro-regular-ext.woff2</th>
      <td style={{ textAlign: 'left' }}>Source Sans Pro</td>
      <td style={{ textAlign: 'left' }}>regular / latin-ext</td>
    </tr>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>source-sans-pro/woff2/source-sans-pro-italic-ext.woff2</th>
      <td style={{ textAlign: 'left' }}>Source Sans Pro</td>
      <td style={{ textAlign: 'left' }}>italic / latin-ext</td>
    </tr>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>source-code-pro/woff2/source-code-pro-regular.woff2</th>
      <td style={{ textAlign: 'left' }}>Source Code Pro</td>
      <td style={{ textAlign: 'left' }}>regular / latin</td>
    </tr>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>source-code-pro/woff2/source-code-pro-italic.woff2</th>
      <td style={{ textAlign: 'left' }}>Source Code Pro</td>
      <td style={{ textAlign: 'left' }}>italic / latin</td>
    </tr>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>source-code-pro/woff2/source-code-pro-regular-ext.woff2</th>
      <td style={{ textAlign: 'left' }}>Source Code Pro</td>
      <td style={{ textAlign: 'left' }}>regular / latin-ext</td>
    </tr>
    <tr>
      <th scope="row" style={{ textAlign: 'left' }}>source-code-pro/woff2/source-code-pro-italic-ext.woff2</th>
      <td style={{ textAlign: 'left' }}>Source Code Pro</td>
      <td style={{ textAlign: 'left' }}>italic / latin-ext</td>
    </tr>
  </tbody>
</Table>

If necessary, the fonts are exported through a specific entrypoint: `@ovhcloud/ods-themes/fonts` in subdirectories.

<Heading label="Preloading fonts" level={2} />

<Message
  color={ MESSAGE_COLOR.warning }
  dismissible={ false }>
  <MessageIcon name={ ICON_NAME.triangleExclamation } />

  <MessageBody>
    Preloading fonts is only available if you're using the new recommended way (>= v19.2.0) to load the styles and fonts in your application (see the <StorybookLink kind={ REACT_COMPONENTS_TITLE.getStarted }>Get started</StorybookLink> section).
  </MessageBody>
</Message>

To preload the fonts, if you're using vite, webpack and rspack, you can use a plugin like `unplugin-inject-preload`.

Here is an example with vite:

<Source
  code={`
import UnpluginInjectPreload from "unplugin-inject-preload/vite";

const preloadFont = () =>
UnpluginInjectPreload({
injectTo: "head",
files: [
{
entryMatch: /.*source-sans-pro-regular.woff2$/,
},
],
});

// https://vite.dev/config/
export default defineConfig({
plugins: [react(), preloadFont()],
})
`}
dark="true"
language="js"
/>

This will append at build time the preloaded import in the `<head>` element of your html entry point.

<Message
  color={ MESSAGE_COLOR.warning }
  dismissible={ false }>
  <MessageIcon name={ ICON_NAME.triangleExclamation } />

  <MessageBody>
    You should not preload all the fonts as they will not all be used at the start up of your application.
  </MessageBody>
</Message>
