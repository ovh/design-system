import { Canvas, Meta } from '@storybook/blocks';
import * as PopoverStories from './popover.stories';
import { Banner } from '../../../src/components/banner/Banner';
import { BestPractices } from '../../../src/components/bestPractices/BestPractices';
import { Heading } from '../../../src/components/heading/Heading';
import { IdentityCard } from '../../../src/components/identityCard/IdentityCard';
import { StorybookLink } from '../../../src/components/storybookLink/StorybookLink';
import { ATOMIC_TYPE } from '../../../src/constants/atomicDesign';
import { ODS_COMPONENTS_TITLE, STORY } from '../../../src/constants/meta';

<Meta of={ PopoverStories } name="Documentation" />

<Banner of={ PopoverStories } />

_**Popover** component is triggered by click and is used to provide additional information to the user in a new temporary surface that overlays the page_

<Canvas of={ PopoverStories.Overview } sourceState="none" />

<Heading label="Overview" level={ 2 } />

<IdentityCard aliases={ ['Complex Tooltip'] }
              atomicType={ ATOMIC_TYPE.atom }
              figmaLink="https://www.figma.com/design/9jDDTcR4a9jPRFcdjawAlf/ODS---UI-Kit?node-id=49-8447"
              githubUrl="https://github.com/ovh/design-system/tree/master/packages/ods/src/components/popover"
              name="Popover"
              relatedComponents={ [{ name: 'Button' }, { name: 'Text' }] }>
  A **Popover** will provide additional information to the user in a clear and concise way.

  It is commonly used to appear by click, thus crucial information should not be displayed in the **Popover**.
</IdentityCard>

<Heading label="Anatomy" level={ 2 } />

![Component anatomy](components/popover/anatomy.png "Component anatomy")

1. **Container**: main container that has all content (i.e <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } />, <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } label="Button" story={ STORY.documentation } />, etc.)
2. **Arrow tip** (optional)

<Heading label="Usage" level={ 2 } />

A **Popover** is used to provide an explanation for a user interface element.

It can include interactive elements such as <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } label="Button" story={ STORY.documentation } /> or <StorybookLink kind={ ODS_COMPONENTS_TITLE.link } label="Link" story={ STORY.documentation } />.

<Heading label="Tooltip vs Popover" level={ 3 } />

- Both components look similar but a <StorybookLink kind={ ODS_COMPONENTS_TITLE.tooltip } label="Tooltip" story={ STORY.documentation } /> is displayed on hover and focus while a **Popover** is triggered by click.
- <StorybookLink kind={ ODS_COMPONENTS_TITLE.tooltip } label="Tooltip" story={ STORY.documentation } /> are commonly used for shorter explanations, while longer <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } /> / complex UIs would suit **Popovers** better.
- Use a **Popover** when you need to insert interactive elements such as <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } label="Button" story={ STORY.documentation } />.
- A **Popover** can be dismissed if an action <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } label="Button" story={ STORY.documentation } /> allows it.

<Heading label="Dos & Don'ts" level={ 3 } />

<BestPractices
  donts={[
    '- Write very important information within a Popover since it is only displayed by click so the user might miss its crucial content',
    '- Insert rich information such as image in a Popover',
    '- Overlap the Popover\'s trigger element with the Popover itself when it has been triggered',
  ]}
  dos={[
    <span>- Use a Popover instead of a <StorybookLink kind={ ODS_COMPONENTS_TITLE.tooltip } label="Tooltip" story={ STORY.documentation } /> when the <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } /> is long; but keep it concise</span>,
    <span>- Write Popover's <StorybookLink kind={ ODS_COMPONENTS_TITLE.text } label="Text" story={ STORY.documentation } /> as full sentences with punctuation</span>,
  ]}
/>

<Heading label="Placement" level={ 2 } />

**Popover** can be set in a certain position by default around its trigger.

**Popover** has automatic positioning feature. It can detect the edge of the browser so the container always stays visible on a page.

<Heading label="Behavior" level={ 2 } />

By default, a **Popover** is hidden to the user.

It triggers when the user clicks on the **Popover**'s trigger element such as a <StorybookLink kind={ ODS_COMPONENTS_TITLE.button } label="Button" story={ STORY.documentation } />.

The **Popover** can be closed or dismissed by clicking anywhere on the page outside the **Popover**'s container.

<Heading label="Variation" level={ 2 } />

N/A

<Heading label="Accessibility" level={ 2 } />

When visible, **Popover** gains the user's focus.

- `Escape` closes the currently opened **Popover**
- `Tab` allows to focus in inner **Popover** content
